# Pass 2 Test-Coverage Audit
**Audit run:** 2026-02-26-01
**Agent ID:** A45
**Files audited:**
- `src/main/java/com/bean/DriverBean.java`
- `src/main/java/com/bean/DriverJobDetailsBean.java`
- `src/main/java/com/bean/DriverTrainingBean.java`

**Test directory searched:** `src/test/java/`
**Existing test files found:**
- `com/calibration/UnitCalibrationImpactFilterTest.java`
- `com/calibration/UnitCalibrationTest.java`
- `com/calibration/UnitCalibratorTest.java`
- `com/util/ImpactUtilTest.java`

None of the three audited classes appear in any test file.

---

## Reading-Evidence Blocks

### 1. DriverBean

**File:** `src/main/java/com/bean/DriverBean.java`
**Class:** `com.bean.DriverBean`
**Annotations:** `@Data`, `@NoArgsConstructor`, `implements Serializable`
**serialVersionUID:** `-6234180688512824118L` (line 12)

**Fields (all private):**

| Line | Type | Name | Sensitive |
|------|------|------|-----------|
| 14 | Long | id | |
| 15 | String | comp_id | |
| 17 | String | first_last | |
| 18 | String | first_name | |
| 19 | String | last_name | |
| 20 | String | licno | |
| 21 | String | expirydt | |
| 22 | String | joindt | |
| 23 | String | phone | PII |
| 24 | boolean | active | |
| 25 | String | location | |
| 26 | String | department | |
| 27 | String | card_no | PII |
| 28 | String | facility_code | |
| 30 | String | licence_number | PII |
| 31 | String | expiry_date | |
| 32 | String | security_number | SENSITIVE (security credential) |
| 33 | String | address | PII |
| 34 | String | app_access | |
| 35 | String | mobile | PII |
| 36 | String | email_addr | PII |
| 37 | String | pass | SENSITIVE (plaintext password field) |
| 38 | String | cpass | SENSITIVE (confirm-password field) |
| 39 | String | pass_hash | SENSITIVE (hashed password) |
| 40 | String | op_code | |
| 41 | String | cognito_username | SENSITIVE (auth identity) |
| 42 | String | accessToken | SENSITIVE (auth bearer token) |

**Methods:**

| Lines | Signature | Generated by |
|-------|-----------|--------------|
| 45–77 | `private DriverBean(Long id, ...)` (27-arg builder constructor) | `@Builder` |
| 79–81 | `public String getName()` | hand-written |
| — | `public Long getId()` | `@Data` (Lombok) |
| — | `public String getComp_id()` ... (all getters) | `@Data` (Lombok) |
| — | `public void setId(Long id)` ... (all setters) | `@Data` (Lombok) |
| — | `public boolean equals(Object)` | `@Data` (Lombok) |
| — | `public int hashCode()` | `@Data` (Lombok) |
| — | `public String toString()` | `@Data` (Lombok) — includes ALL fields |
| — | `public static DriverBeanBuilder builder()` | `@Builder` (Lombok) |

**FIXME note at line 29:** `// FIXME is it same than licno ?` — `licence_number` vs `licno` inconsistency is unresolved and untested.

---

### 2. DriverJobDetailsBean

**File:** `src/main/java/com/bean/DriverJobDetailsBean.java`
**Class:** `com.bean.DriverJobDetailsBean`
**Annotations:** none
**Interfaces:** none (not Serializable, no `@Data`)

**Fields (all private):**

| Line | Type | Name |
|------|------|------|
| 7 | int | id |
| 8 | String | action |
| 9 | String | equipId |
| 10 | String | jobId |
| 11 | ArrayList (raw) | driverList |
| 12 | String | name |
| 13 | String | startTime |
| 14 | String | endTime |
| 15 | String | fromTime |
| 16 | String | toTime |
| 17 | String | instruct |
| 18 | String | jobTitle |
| 19 | String | description |
| 20 | String | driverId |

**Methods (hand-written getters/setters):**

| Lines | Signature |
|-------|-----------|
| 21–23 | `public int getId()` |
| 24–26 | `public String getAction()` |
| 27–29 | `public String getEquipId()` |
| 30–32 | `public String getJobId()` |
| 33–35 | `public ArrayList getDriverList()` |
| 36–38 | `public String getName()` |
| 39–41 | `public String getStartTime()` |
| 42–44 | `public String getEndTime()` |
| 45–47 | `public String getFromTime()` |
| 48–50 | `public String getToTime()` |
| 51–53 | `public String getInstruct()` |
| 54–56 | `public String getJobTitle()` |
| 57–59 | `public String getDescription()` |
| 60–62 | `public String getDriverId()` |
| 63–65 | `public void setId(int id)` |
| 66–68 | `public void setAction(String action)` |
| 69–71 | `public void setEquipId(String equipId)` |
| 72–74 | `public void setJobId(String jobId)` |
| 75–77 | `public void setDriverList(ArrayList driverList)` |
| 78–80 | `public void setName(String name)` |
| 81–83 | `public void setStartTime(String startTime)` |
| 84–86 | `public void setEndTime(String endTime)` |
| 87–89 | `public void setFromTime(String fromTime)` |
| 90–92 | `public void setToTime(String toTime)` |
| 93–95 | `public void setInstruct(String instruct)` |
| 96–98 | `public void setJobTitle(String jobTitle)` |
| 99–101 | `public void setDescription(String description)` |
| 102–104 | `public void setDriverId(String driverId)` |

No constructor, no `equals()`, no `hashCode()`, no `toString()`, no `serialVersionUID`.

---

### 3. DriverTrainingBean

**File:** `src/main/java/com/bean/DriverTrainingBean.java`
**Class:** `com.bean.DriverTrainingBean`
**Annotations:** `@Data`, `@NoArgsConstructor`, `implements Serializable`
**serialVersionUID:** `1250913872236247965L` (line 12)

**Fields (all private):**

| Line | Type | Name |
|------|------|------|
| 14 | Long | id |
| 15 | Long | driver_id |
| 16 | String | first_name |
| 17 | String | last_name |
| 18 | String | email |
| 19 | String | unit_name |
| 20 | Long | unit_id |
| 21 | Long | manufacture_id |
| 22 | String | manufacture_name |
| 23 | Long | type_id |
| 24 | String | type_name |
| 25 | Long | fuel_type_id |
| 26 | String | fuel_type_name |
| 27 | String | training_date |
| 28 | String | expiration_date |
| 29 | Long | comp_id |
| 30 | String | comp_email |

**Methods:**

| Lines | Signature | Generated by |
|-------|-----------|--------------|
| 33–67 | `private DriverTrainingBean(Long id, ...)` (17-arg builder constructor) | `@Builder` |
| — | All getters/setters for every field | `@Data` (Lombok) |
| — | `public boolean equals(Object)` | `@Data` (Lombok) |
| — | `public int hashCode()` | `@Data` (Lombok) |
| — | `public String toString()` | `@Data` (Lombok) |
| — | `public static DriverTrainingBeanBuilder builder()` | `@Builder` (Lombok) |

**Note:** `unit_id` appears in the field list (line 20) but is the last parameter in the builder constructor (line 48), after all others — parameter ordering mismatch with field declaration ordering. Untested.

---

## Grep Results — Test Directory Coverage

| Class | Grep hits in `src/test/java/` |
|-------|-------------------------------|
| `DriverBean` | 0 |
| `DriverJobDetailsBean` | 0 |
| `DriverTrainingBean` | 0 |

**All three classes have zero test coverage.**

---

## Findings

### A45-1 | Severity: CRITICAL | DriverBean — Lombok @Data toString() exposes plaintext credentials

`DriverBean` is annotated with `@Data`, which auto-generates a `toString()` method that includes **every field** in the class. Fields `pass` (line 37), `cpass` (line 38), `pass_hash` (line 39), `cognito_username` (line 41), and `accessToken` (line 42) will be emitted verbatim in any log line, stack trace, or debug output that prints the bean. There are no `@ToString.Exclude` annotations on any field. No test exists that verifies sensitive fields are absent from `toString()` output. This is an active credential-leakage risk in any environment with application logging.

**Affected file:** `src/main/java/com/bean/DriverBean.java`, lines 37–42
**Remediation:** Add `@ToString.Exclude` to `pass`, `cpass`, `pass_hash`, `cognito_username`, `accessToken`, and add a test asserting `toString()` does not contain those field values.

---

### A45-2 | Severity: CRITICAL | DriverBean — plaintext password fields stored in a Serializable bean

`DriverBean implements Serializable` with a hard-coded `serialVersionUID`. Fields `pass` (line 37) and `cpass` (line 38) hold plaintext (or confirm) password strings. A Serializable bean containing plaintext credentials can be persisted to disk, written to an HTTP session store, or placed in a distributed cache in cleartext. No test verifies that password fields are excluded from serialization (e.g., via `transient`). No test verifies round-trip serialization integrity.

**Affected file:** `src/main/java/com/bean/DriverBean.java`, lines 37–38
**Remediation:** Mark `pass`, `cpass`, `pass_hash`, `accessToken` as `transient`. Write serialization round-trip tests asserting those fields are null after deserialization.

---

### A45-3 | Severity: HIGH | DriverBean — accessToken stored in Serializable bean and emitted by toString()

`accessToken` (line 42) is a bearer token used for Cognito authentication. It is neither `transient` nor annotated with `@ToString.Exclude`. As a short-lived but highly privileged credential, leaking it through serialization, caching, or logging is a separate high-severity concern from the password fields above, because token compromise enables full session takeover without knowing the underlying password.

**Affected file:** `src/main/java/com/bean/DriverBean.java`, line 42
**Remediation:** Mark `accessToken` as `transient` and exclude from `toString()`. Add a targeted test.

---

### A45-4 | Severity: HIGH | DriverBean — zero test coverage (entire class)

No test file references `DriverBean`. The hand-written method `getName()` (lines 79–81) concatenates `first_name + " " + last_name` without null-guards. If either field is null a literal `"null"` string is produced; this is untested. Builder construction, `equals()`, `hashCode()`, and the 27-argument constructor are also completely untested.

**Affected file:** `src/main/java/com/bean/DriverBean.java`, lines 79–81
**Gaps:** `getName()` null-name behaviour, builder, `@NoArgsConstructor`, all Lombok-generated methods.

---

### A45-5 | Severity: HIGH | DriverJobDetailsBean — zero test coverage (entire class)

No test file references `DriverJobDetailsBean`. The class has no `equals()`, no `hashCode()`, and no `toString()` — all 14 getters and 14 setters are hand-written and completely untested. There is no no-arg constructor declared; the compiler-default is used implicitly. The class is not `Serializable` despite being used as a data transfer object in what appears to be a session/action context (Struts).

**Affected file:** `src/main/java/com/bean/DriverJobDetailsBean.java`
**Gaps:** All 28 accessor methods, default constructor.

---

### A45-6 | Severity: HIGH | DriverTrainingBean — zero test coverage (entire class)

No test file references `DriverTrainingBean`. Builder construction, `@NoArgsConstructor`, all Lombok-generated accessors, `equals()`, `hashCode()`, and `toString()` are completely untested.

**Affected file:** `src/main/java/com/bean/DriverTrainingBean.java`
**Gaps:** Builder, `@NoArgsConstructor`, all Lombok-generated methods.

---

### A45-7 | Severity: HIGH | DriverJobDetailsBean — raw ArrayList type on driverList field

Field `driverList` at line 11 is declared as `ArrayList` (raw type, no generic parameter). The corresponding getter (line 33–35) and setter (line 75–77) also use raw `ArrayList`. Raw types bypass compile-time type safety. No test verifies what element types are accepted or returned, meaning a runtime `ClassCastException` in callers is untested and undetected.

**Affected file:** `src/main/java/com/bean/DriverJobDetailsBean.java`, lines 11, 33–35, 75–77

---

### A45-8 | Severity: MEDIUM | DriverBean — FIXME: licence_number vs licno duplication unresolved and untested

Line 29 contains `// FIXME is it same than licno ?`. Both `licno` (line 20) and `licence_number` (line 30) exist as separate fields. There is no test that exercises the semantics of either field, verifies that they hold different values, or documents which should be populated in which code path. The FIXME has not been resolved.

**Affected file:** `src/main/java/com/bean/DriverBean.java`, lines 20, 29–30

---

### A45-9 | Severity: MEDIUM | DriverTrainingBean — builder parameter order differs from field declaration order for unit_id

`unit_id` is declared as the third field after `driver_id` and before `manufacture_id` (line 20), but in the `@Builder` constructor (lines 33–49) it is placed as the **last** parameter (line 48), after `comp_email`. This order mismatch is error-prone for callers using positional reasoning and is entirely untested. A test using the builder and asserting the correct value of `unit_id` would catch any future refactor that relies on order.

**Affected file:** `src/main/java/com/bean/DriverTrainingBean.java`, lines 20, 48

---

### A45-10 | Severity: MEDIUM | DriverBean — getName() produces "null null" when fields are uninitialised

`getName()` (lines 79–81) returns `this.first_name + " " + this.last_name`. Both fields default to `null` (initialised explicitly to `null` in the field declarations). When a `DriverBean` is constructed via `@NoArgsConstructor` and `getName()` is called before the fields are populated, the return value is the string `"null null"`. No test exercises this failure mode, and no null-guard exists in the method body.

**Affected file:** `src/main/java/com/bean/DriverBean.java`, lines 79–81

---

### A45-11 | Severity: MEDIUM | DriverJobDetailsBean — no equals()/hashCode() — identity equality used by default

`DriverJobDetailsBean` has no `equals()` or `hashCode()`. Any collection-based deduplication, map keying, or assertion-based test comparing two `DriverJobDetailsBean` instances with the same data will silently use reference equality, producing incorrect results. This is a correctness risk in Struts action logic and collection handling. No test covers this gap.

**Affected file:** `src/main/java/com/bean/DriverJobDetailsBean.java`

---

### A45-12 | Severity: MEDIUM | DriverJobDetailsBean — not Serializable despite use as action/session bean in Struts/Tomcat

`DriverJobDetailsBean` does not implement `Serializable`. In a Struts2/Tomcat application, action beans or session-scoped objects may be serialized during session persistence, clustering, or failover. If `DriverJobDetailsBean` is stored in the session (directly or indirectly), a `java.io.NotSerializableException` will be thrown at runtime. No test covers serialization behaviour or guards against this.

**Affected file:** `src/main/java/com/bean/DriverJobDetailsBean.java`

---

### A45-13 | Severity: LOW | DriverBean — @Builder constructor is private; builder is the only multi-field construction path, untested

The `@Builder`-annotated constructor is `private` (line 45). The only public multi-field construction path is the static `DriverBeanBuilder.builder()` fluent API. No test exercises builder construction, including partial builds (some fields omitted), to confirm defaults are preserved correctly.

**Affected file:** `src/main/java/com/bean/DriverBean.java`, lines 44–77

---

### A45-14 | Severity: LOW | DriverTrainingBean — @Builder constructor is private; builder entirely untested

Same pattern as A45-13. The `@Builder` constructor for `DriverTrainingBean` is `private` (line 33). No test exercises the builder or any field default values after partial construction.

**Affected file:** `src/main/java/com/bean/DriverTrainingBean.java`, lines 32–67

---

### A45-15 | Severity: LOW | DriverTrainingBean — toString() includes email and comp_email (PII) with no exclusion

`@Data` generates a `toString()` for `DriverTrainingBean` that includes the `email` (line 18) and `comp_email` (line 30) fields. While not as severe as credentials, PII appearing in log output is a compliance concern (GDPR, PIPEDA, similar). No `@ToString.Exclude` is present and no test verifies log-safe output.

**Affected file:** `src/main/java/com/bean/DriverTrainingBean.java`, lines 18, 30

---

### A45-16 | Severity: INFO | DriverBean — security_number field: purpose and sensitivity undocumented

Field `security_number` (line 32) is ambiguous. It could be a social insurance/social security number (highly sensitive PII), a facility security code, or an internal reference. No Javadoc, no test, and no comment clarifies intent. It is included unmasked in `toString()` output.

**Affected file:** `src/main/java/com/bean/DriverBean.java`, line 32

---

## Summary Table

| ID | Severity | Class | Description |
|----|----------|-------|-------------|
| A45-1 | CRITICAL | DriverBean | Lombok @Data toString() emits pass, cpass, pass_hash, cognito_username, accessToken |
| A45-2 | CRITICAL | DriverBean | Serializable bean with plaintext pass/cpass — no transient guards, no serialization test |
| A45-3 | HIGH | DriverBean | accessToken in Serializable bean and in toString() — session-takeover risk |
| A45-4 | HIGH | DriverBean | Zero test coverage — getName() null-name bug, builder, all Lombok methods |
| A45-5 | HIGH | DriverJobDetailsBean | Zero test coverage — all 28 hand-written accessors untested |
| A45-6 | HIGH | DriverTrainingBean | Zero test coverage — builder, all Lombok methods untested |
| A45-7 | HIGH | DriverJobDetailsBean | Raw ArrayList type — ClassCastException risk untested |
| A45-8 | MEDIUM | DriverBean | FIXME licno vs licence_number duplication unresolved and untested |
| A45-9 | MEDIUM | DriverTrainingBean | unit_id builder parameter order differs from field declaration order |
| A45-10 | MEDIUM | DriverBean | getName() returns "null null" when fields uninitialised — no null-guard, no test |
| A45-11 | MEDIUM | DriverJobDetailsBean | No equals()/hashCode() — identity equality silently used |
| A45-12 | MEDIUM | DriverJobDetailsBean | Not Serializable — NotSerializableException risk in Struts/Tomcat session |
| A45-13 | LOW | DriverBean | Private @Builder constructor untested; partial-build defaults unverified |
| A45-14 | LOW | DriverTrainingBean | Private @Builder constructor untested; partial-build defaults unverified |
| A45-15 | LOW | DriverTrainingBean | toString() includes email/comp_email PII without @ToString.Exclude |
| A45-16 | INFO | DriverBean | security_number field purpose and sensitivity undocumented |
