# Pass 2 – Test Coverage Audit
**Audit Run:** 2026-02-26-01
**Agent ID:** A70
**Date:** 2026-02-26
**Audited Files:**
1. `src/main/java/com/cognito/bean/UserSignUpRequest.java`
2. `src/main/java/com/cognito/bean/UserSignUpResponse.java`
3. `src/main/java/com/cognito/bean/UserUpdateRequest.java`

**Test Directory Searched:** `src/test/java/`

---

## Evidence of Reading

### 1. UserSignUpRequest

**Class name:** `UserSignUpRequest`
**Package:** `com.cognito.bean`
**Interfaces implemented:** `java.io.Serializable`
**Lombok annotations:** `@Data`, `@NoArgsConstructor`, `@Builder` (on all-args constructor)
**Unused import detected:** `com.cognito.bean.UserRequest.UserRequestBuilder` (line 5) — imported but never referenced in the class body.

**Fields:**

| Field | Type | Line |
|-------|------|------|
| `serialVersionUID` | `private static final long` | 18 |
| `username` | `private String` | 19 |
| `password` | `private String` | 20 |
| `email` | `private String` | 21 |
| `name` | `private String` | 22 |
| `lastname` | `private String` | 23 |
| `phoneNumber` | `private String` | 24 |
| `givenName` | `private String` | 25 |

**Methods (explicit; Lombok-generated methods listed separately):**

| Method | Line | Notes |
|--------|------|-------|
| `UserSignUpRequest()` (no-arg constructor) | generated by `@NoArgsConstructor` | — |
| `UserSignUpRequest(String username, String password, String email, String name, String lastname, String phoneNumber, String givenName)` | 28–38 | `private`, annotated `@Builder`; builder entry point |

**Lombok-generated methods (implicit via `@Data`):**

| Method | Notes |
|--------|-------|
| `getUsername()` | getter |
| `getPassword()` | getter — returns raw credential |
| `getEmail()` | getter |
| `getName()` | getter |
| `getLastname()` | getter |
| `getPhoneNumber()` | getter |
| `getGivenName()` | getter |
| `setUsername(String)` | setter |
| `setPassword(String)` | setter — sets raw credential |
| `setEmail(String)` | setter |
| `setName(String)` | setter |
| `setLastname(String)` | setter |
| `setPhoneNumber(String)` | setter |
| `setGivenName(String)` | setter |
| `equals(Object)` | — |
| `hashCode()` | — |
| `toString()` | — includes password field |
| `builder()` | static builder factory (Lombok `@Builder` on private constructor) |

---

### 2. UserSignUpResponse

**Class name:** `UserSignUpResponse`
**Package:** `com.cognito.bean`
**Interfaces implemented:** None (does NOT implement `Serializable`)
**Lombok annotations:** `@Data`, `@NoArgsConstructor`, `@EqualsAndHashCode` (imported but annotation not applied to class-level in observed source — unused import)
**Jackson annotation:** `@JsonInclude(JsonInclude.Include.NON_NULL)` (line 11)

**Fields:**

| Field | Type | Line |
|-------|------|------|
| `serialVersionUID` | `private static final long` | 17 |
| `username` | `private String` | 18 |
| `userCreatedDate` | `private String` | 19 |
| `lastModifiedDate` | `private String` | 20 |
| `enabled` | `private boolean` | 21 |
| `userStatus` | `private String` | 22 |
| `password` | `private String` | 23 |
| `email` | `private String` | 24 |
| `brokerID` | `private String` | 25 |
| `code` | `private Integer` | 26 |
| `message` | `private String` | 27 |
| `detail` | `private String` | 28 |

**Methods (explicit):** None beyond Lombok-generated.

**Lombok-generated methods (implicit via `@Data`):**

| Method | Notes |
|--------|-------|
| `getUsername()` | getter |
| `getUserCreatedDate()` | getter |
| `getLastModifiedDate()` | getter |
| `isEnabled()` | boolean getter |
| `getUserStatus()` | getter |
| `getPassword()` | getter — returns raw credential |
| `getEmail()` | getter |
| `getBrokerID()` | getter |
| `getCode()` | getter |
| `getMessage()` | getter |
| `getDetail()` | getter |
| `setUsername(String)` | setter |
| `setUserCreatedDate(String)` | setter |
| `setLastModifiedDate(String)` | setter |
| `setEnabled(boolean)` | setter |
| `setUserStatus(String)` | setter |
| `setPassword(String)` | setter — sets raw credential |
| `setEmail(String)` | setter |
| `setBrokerID(String)` | setter |
| `setCode(Integer)` | setter |
| `setMessage(String)` | setter |
| `setDetail(String)` | setter |
| `equals(Object)` | — |
| `hashCode()` | — |
| `toString()` | — includes password field |

---

### 3. UserUpdateRequest

**Class name:** `UserUpdateRequest`
**Package:** `com.cognito.bean`
**Interfaces implemented:** None
**Lombok annotations:** `@Data`, `@NoArgsConstructor`, `@Builder` (on all-args constructor)

**Fields:**

| Field | Type | Line |
|-------|------|------|
| `username` | `private String` | 11 |
| `email` | `private String` | 12 |
| `given_name` | `private String` | 13 |
| `family_name` | `private String` | 14 |
| `phone_number` | `private String` | 15 |
| `password` | `private String` | 16 |
| `accessToken` | `private String` | 17 |

**Methods (explicit):**

| Method | Line | Notes |
|--------|------|-------|
| `UserUpdateRequest()` (no-arg constructor) | generated by `@NoArgsConstructor` | — |
| `UserUpdateRequest(String username, String email, String given_name, String family_name, String phone_number, String password, String accessToken)` | 20–28 | `private`, annotated `@Builder` |

**Lombok-generated methods (implicit via `@Data`):**

| Method | Notes |
|--------|-------|
| `getUsername()` | getter |
| `getEmail()` | getter |
| `getGiven_name()` | getter |
| `getFamily_name()` | getter |
| `getPhone_number()` | getter |
| `getPassword()` | getter — returns raw credential |
| `getAccessToken()` | getter — returns bearer/access token |
| `setUsername(String)` | setter |
| `setEmail(String)` | setter |
| `setGiven_name(String)` | setter |
| `setFamily_name(String)` | setter |
| `setPhone_number(String)` | setter |
| `setPassword(String)` | setter — sets raw credential |
| `setAccessToken(String)` | setter — sets bearer token |
| `equals(Object)` | — |
| `hashCode()` | — |
| `toString()` | — includes password and accessToken |
| `builder()` | static builder factory |

---

## Test Coverage Search Results

| Class | Search term | Matching test files found |
|-------|-------------|--------------------------|
| `UserSignUpRequest` | `UserSignUpRequest` | None |
| `UserSignUpResponse` | `UserSignUpResponse` | None |
| `UserUpdateRequest` | `UserUpdateRequest` | None |

Total test files in `src/test/java/`: 4 files, all in unrelated packages (`com.calibration`, `com.util`). No test in any package references any of the three audited classes.

---

## Findings

### A70-1 | Severity: CRITICAL | UserSignUpRequest has zero test coverage

No test class, test method, or test fixture in `src/test/java/` references `UserSignUpRequest` in any form. The class is used as the primary payload object for Cognito user sign-up in `AdminDriverAddAction` and `AdminRegisterAction`, making it a high-value code path with no automated verification of correct field population, builder behaviour, or serialization.

---

### A70-2 | Severity: CRITICAL | UserSignUpResponse has zero test coverage

No test class, test method, or test fixture in `src/test/java/` references `UserSignUpResponse` in any form. The class carries the return value from the Cognito sign-up REST call consumed in `RestClientService.signUpRequest()`, `AdminDriverAddAction`, and `AdminRegisterAction`. Its `code`, `message`, and `detail` fields drive downstream error-handling logic that is entirely unverified by automated tests.

---

### A70-3 | Severity: CRITICAL | UserUpdateRequest has zero test coverage

No test class, test method, or test fixture in `src/test/java/` references `UserUpdateRequest` in any form. The class is the payload for Cognito user-update calls in `DriverDAO` and `CompanyDAO`. The builder-constructed field mappings (including `accessToken`, `password`, `given_name`, `family_name`, `phone_number`) are unverified.

---

### A70-4 | Severity: HIGH | Builder pattern is private and untested — construction correctness unverifiable

All three classes place `@Builder` on a `private` all-args constructor. The Lombok-generated `builder()` static method is the only external construction path beyond the no-arg constructor. There are no tests verifying that:
- The builder correctly propagates every field value to the constructed object.
- A partially populated builder (only some fields set) leaves remaining fields null/default.
- Multiple sequential builder calls do not share state.

Affected files: `UserSignUpRequest` (line 27–38), `UserUpdateRequest` (line 19–28).

---

### A70-5 | Severity: HIGH | password field exposed via Lombok-generated toString() and getter — no test guards against inadvertent logging

`UserSignUpRequest` (line 20), `UserSignUpResponse` (line 23), and `UserUpdateRequest` (line 16) all declare a `private String password` field. Lombok `@Data` generates `toString()` that includes this field unconditionally, and `getPassword()` returns the raw credential. There are no tests confirming:
- That `toString()` output is redacted or suppressed for the password field.
- That logging interceptors or callers do not inadvertently expose credentials.

This is also a design defect (absence of `@ToString.Exclude` on the `password` field) that tests should catch through contract verification.

---

### A70-6 | Severity: HIGH | accessToken exposed via Lombok-generated toString() — no test guards against inadvertent logging

`UserUpdateRequest` (line 17) declares `private String accessToken`. Lombok `@Data` generates `toString()` that includes this bearer token in plain text. No tests verify that the token is excluded from serialized string representations.

---

### A70-7 | Severity: HIGH | UserSignUpResponse declares serialVersionUID but does not implement Serializable

`UserSignUpResponse` (line 17) declares `private static final long serialVersionUID = 4896099777087206031L` but the class declaration at line 12 does not implement `java.io.Serializable`. This is a dead field: the JVM will not use `serialVersionUID` for a non-serializable class, and the declaration will generate a compiler warning. No test exists to catch this inconsistency, and the field may mislead maintainers into assuming the class is safely serializable.

---

### A70-8 | Severity: HIGH | UserUpdateRequest field naming violates Java conventions — no tests enforce contract

`UserUpdateRequest` fields `given_name` (line 13), `family_name` (line 14), and `phone_number` (line 15) use snake_case rather than the Java standard camelCase. Lombok generates getters `getGiven_name()`, `getFamily_name()`, and `getPhone_number()`. No tests verify:
- That the getter/setter names are stable and have not silently changed across Lombok versions.
- That Jackson serialization of these field names matches the expected Cognito API attribute names.

---

### A70-9 | Severity: MEDIUM | No Serializable contract test for UserSignUpRequest

`UserSignUpRequest` implements `java.io.Serializable` (line 13) with an explicit `serialVersionUID` (line 18). There are no tests verifying round-trip serialization/deserialization, that the declared `serialVersionUID` matches the actual computed value, or that adding/removing fields causes a deliberate version bump. A mismatch would cause `InvalidClassException` at runtime when deserializing objects written by an older version of the class.

---

### A70-10 | Severity: MEDIUM | No test for @JsonInclude(NON_NULL) behavior on UserSignUpResponse

`UserSignUpResponse` is annotated `@JsonInclude(JsonInclude.Include.NON_NULL)` (line 11). There are no tests verifying that:
- Null fields (e.g., `message`, `detail`, `brokerID`) are omitted from JSON serialization.
- The `enabled` boolean field (primitive, always has a value, never null) is always included.
- The `code` Integer field (nullable) is correctly omitted when null.

Incorrect `@JsonInclude` semantics could silently corrupt API responses consumed by callers.

---

### A70-11 | Severity: MEDIUM | No test for equals/hashCode contract across all three classes

Lombok `@Data` generates `equals()` and `hashCode()` based on all fields. No tests verify:
- Two instances with identical field values are equal.
- Two instances differing in one field are not equal.
- `hashCode()` is consistent with `equals()`.
- Null fields do not cause `NullPointerException` in `equals()` or `hashCode()`.

This is relevant because `UserSignUpResponse` instances may be stored in collections or compared in service logic.

---

### A70-12 | Severity: MEDIUM | No test verifying no-arg constructor leaves all fields null/default

All three classes use `@NoArgsConstructor`. No tests verify the post-construction state: all String fields null, `boolean enabled` false (for `UserSignUpResponse`), `Integer code` null. Callers relying on default values (e.g., checking `response.getCode() == null` to detect unset responses) could be broken silently.

---

### A70-13 | Severity: MEDIUM | Unused import in UserSignUpRequest not caught by any test infrastructure

`UserSignUpRequest` line 5 imports `com.cognito.bean.UserRequest.UserRequestBuilder` which is never used in the class. While this is a compiler-level issue rather than a test issue, the absence of any static analysis or test coverage means this import went undetected. No existing test compilation step enforces clean imports.

---

### A70-14 | Severity: MEDIUM | Unused import @EqualsAndHashCode in UserSignUpResponse not caught

`UserSignUpResponse` line 6 imports `lombok.EqualsAndHashCode` but the annotation is not applied to the class. `@Data` already generates `equals()` and `hashCode()`, making this import both unused and misleading. No test or static-analysis step has caught this.

---

### A70-15 | Severity: LOW | No tests for builder with null field values

None of the three classes have tests passing `null` for any field through the builder. Lombok's generated builder does not validate for null, meaning null values silently populate fields. In `UserSignUpRequest` and `UserUpdateRequest`, passing null for `password`, `username`, or `email` would produce an object that will fail at the HTTP call boundary rather than at construction time, with no early-failure test coverage.

---

### A70-16 | Severity: LOW | No integration or round-trip test for JSON serialization of UserSignUpRequest or UserUpdateRequest

`UserSignUpRequest` and `UserUpdateRequest` are serialized as JSON HTTP request bodies in `RestClientService`. No test verifies that Jackson correctly serializes these objects (e.g., field names match Cognito API expectations, no unexpected fields are included or excluded, content-type and field casing are correct).

---

### A70-17 | Severity: INFO | Test directory contains only 4 test files covering unrelated packages

The test suite (`src/test/java/`) contains exactly 4 test files:
- `com/calibration/UnitCalibrationImpactFilterTest.java`
- `com/calibration/UnitCalibrationTest.java`
- `com/calibration/UnitCalibratorTest.java`
- `com/util/ImpactUtilTest.java`

No test coverage exists for any class in `com.cognito.*`, `com.action.*`, `com.service.*`, or `com.dao.*`. The three audited bean classes are among many completely untested components.

---

## Summary Table

| Finding | Severity | Description |
|---------|----------|-------------|
| A70-1 | CRITICAL | UserSignUpRequest has zero test coverage |
| A70-2 | CRITICAL | UserSignUpResponse has zero test coverage |
| A70-3 | CRITICAL | UserUpdateRequest has zero test coverage |
| A70-4 | HIGH | Private builder construction correctness is unverified |
| A70-5 | HIGH | password in toString() unguarded — no test catches credential exposure |
| A70-6 | HIGH | accessToken in toString() unguarded — no test catches token exposure |
| A70-7 | HIGH | UserSignUpResponse declares serialVersionUID but does not implement Serializable |
| A70-8 | HIGH | Snake_case field names in UserUpdateRequest — getter contract and JSON mapping untested |
| A70-9 | MEDIUM | No serialization round-trip test for UserSignUpRequest |
| A70-10 | MEDIUM | No test for @JsonInclude(NON_NULL) behavior on UserSignUpResponse |
| A70-11 | MEDIUM | No equals/hashCode contract tests for any of the three classes |
| A70-12 | MEDIUM | No test verifying no-arg constructor post-construction state |
| A70-13 | MEDIUM | Unused import (UserRequestBuilder) in UserSignUpRequest undetected |
| A70-14 | MEDIUM | Unused import (@EqualsAndHashCode) in UserSignUpResponse undetected |
| A70-15 | LOW | No builder null-field tests for any class |
| A70-16 | LOW | No JSON serialization round-trip test for request beans |
| A70-17 | INFO | Entire cognito/action/service/dao package tree has no test coverage |
