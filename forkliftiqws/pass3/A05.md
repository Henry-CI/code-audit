# A05 – Pass 3 Documentation Audit
**Date:** 2026-02-27
**Auditor:** A05
**Pass:** 3 (Documentation)

---

## Source Files Audited

1. `src/main/java/com/journaldev/spring/jdbc/controller/APKUpdaterController.java`
2. `src/main/java/com/journaldev/spring/jdbc/controller/CompanyController.java`
3. `src/main/java/com/journaldev/spring/jdbc/controller/ConfigurationController.java`

---

## Reading Evidence

### File 1: APKUpdaterController.java (Lines 1–69)

- `@Controller` / `@Slf4j` class with no class-level Javadoc.
- **Private method** `getURLBase(HttpServletRequest request, String pkgName)` (line 28): no Javadoc. Private scope, so not a public API finding, but noted.
- **Public method** `getAvailablePackage(HttpServletRequest request, @PathVariable String pkgname, @RequestParam String version)` (line 38): no Javadoc. Maps `GET /rest/apk/{pkgname}/update`. Returns `PackageEntry` or `null` on `MalformedURLException`. Contains an inline `// TODO Handle error` comment at line 48 indicating an unresolved error-handling gap.
- **Public method** `downloadPackage(@PathVariable String pkgname, @RequestParam String version)` (line 56): no Javadoc. Maps `GET /rest/apk/{pkgname}`. Returns a `ResponseEntity<Resource>` with content type `application/vnd.android.package-archive`.
- No class-level Javadoc exists.

### File 2: CompanyController.java (Lines 1–175)

- `@Controller` class extending `ConfigurationController`.
- **Class-level Javadoc** (lines 20–22): `/** Handles requests for the Employee JDBC Service. */` — this is a copy-paste artefact from a template; the class handles *Company* (and driver) operations, not employee operations.
- **Public method** `getCompany(@PathVariable Long uid)` (line 37): no Javadoc. Maps `GET /rest/company/get/{uid}`. Returns all companies associated with a driver ID.
- **Public method** `getCompanyDrivers(@PathVariable int uid)` (line 44): no Javadoc. Maps `GET /rest/company/owner/{uid}/drivers`. Returns all drivers belonging to a company owner.
- **Public method** `searchCompany(@PathVariable String keyword)` (line 53): no Javadoc. Maps `GET /rest/company/search/{keyword}`. Returns matching companies.
- **Public method** `addCompany(@RequestBody Permissions permission)` (line 62): no Javadoc. Maps `POST /rest/company/add`. Complex business logic: inserts a permission record, fetches company owner email, and sends an email notification. No parameter or return documentation.
- **Public method** `companyAcceptWeb(@PathVariable String token)` (line 121): no Javadoc. Maps `GET /rest/company/accept/web/{token}`. Validates token via MD5 hash and enables the permission record.
- **Public method** `companyAccept(@PathVariable int pid)` (line 148): no Javadoc. Maps `PUT /rest/company/accept/{pid}`. Enables permission by ID.
- **Public method** `companyDelete(@PathVariable int pid)` (line 163): no Javadoc. Maps `PUT /rest/company/delete/{pid}`. Deletes permission record by ID.
- Inline `JdbcTemplate` instantiation (e.g., line 64, 124, 151, 165) occurs throughout; no documentation explains why this bypasses the autowired pattern.

### File 3: ConfigurationController.java (Lines 1–26)

- Abstract `@Controller` class with a single-line class-level Javadoc: `/** Abstract controller class to help to inject global configuration component */` (line 13–15).
- No public methods are declared. The class only exposes two `protected` fields: `configuration` (type `Configuration`) and `dataSource` (type `DataSource`).
- The existing class Javadoc mentions only `configuration` but the class also exposes `dataSource` — the description is incomplete.
- No `@author`, `@since`, or `@version` tags are present anywhere in the three files.

---

## Public Method Inventory

| # | Class | Method Signature | HTTP Mapping | Javadoc Present? |
|---|-------|-----------------|--------------|-----------------|
| 1 | APKUpdaterController | `getAvailablePackage(HttpServletRequest, String, String)` | GET /rest/apk/{pkgname}/update | No |
| 2 | APKUpdaterController | `downloadPackage(String, String)` | GET /rest/apk/{pkgname} | No |
| 3 | CompanyController | `getCompany(Long)` | GET /rest/company/get/{uid} | No |
| 4 | CompanyController | `getCompanyDrivers(int)` | GET /rest/company/owner/{uid}/drivers | No |
| 5 | CompanyController | `searchCompany(String)` | GET /rest/company/search/{keyword} | No |
| 6 | CompanyController | `addCompany(Permissions)` | POST /rest/company/add | No |
| 7 | CompanyController | `companyAcceptWeb(String)` | GET /rest/company/accept/web/{token} | No |
| 8 | CompanyController | `companyAccept(int)` | PUT /rest/company/accept/{pid} | No |
| 9 | CompanyController | `companyDelete(int)` | PUT /rest/company/delete/{pid} | No |

**Total public methods: 9. Javadoc present: 0.**

---

## Findings

---

### A05-1
**Severity:** HIGH
**File:** `APKUpdaterController.java`
**Location:** Class declaration, line 22

**Description:** No class-level Javadoc exists for `APKUpdaterController`. The purpose of the controller (APK update and download endpoints for Android clients), its dependencies, and intended consumers are entirely undocumented.

---

### A05-2
**Severity:** HIGH
**File:** `APKUpdaterController.java`
**Location:** `getAvailablePackage`, line 38

**Description:** Public REST endpoint method has no Javadoc. No documentation for the `pkgname` or `version` parameters, no description of the return value (`PackageEntry` or `null`), and no documentation of the error condition that silently returns `null` on `MalformedURLException`.

---

### A05-3
**Severity:** HIGH
**File:** `APKUpdaterController.java`
**Location:** `downloadPackage`, line 56

**Description:** Public REST endpoint method has no Javadoc. No documentation for parameters, return type (`ResponseEntity<Resource>`), content-type behaviour (`application/vnd.android.package-archive`), or failure modes (e.g., resource not found).

---

### A05-4
**Severity:** CRITICAL
**File:** `CompanyController.java`
**Location:** Class-level Javadoc, lines 20–22

**Description:** The class-level Javadoc reads `"Handles requests for the Employee JDBC Service."` This is factually inaccurate. The class handles Company and Driver permission operations via the `/rest/company/` endpoint family. The term "Employee" does not correspond to any domain concept in this class. This is a stale copy-paste artefact from a project template, and actively misleads readers about the class's purpose.

---

### A05-5
**Severity:** HIGH
**File:** `CompanyController.java`
**Location:** `getCompany`, line 37

**Description:** Public REST endpoint method has no Javadoc. The `uid` parameter represents a driver ID (not a company ID), which is non-obvious from the method name alone. No documentation for the return value or the DAO delegation.

---

### A05-6
**Severity:** HIGH
**File:** `CompanyController.java`
**Location:** `getCompanyDrivers`, line 44

**Description:** Public REST endpoint method has no Javadoc. The `uid` parameter type is `int` while the analogous `getCompany` uses `Long`; this inconsistency is undocumented and unexplained.

---

### A05-7
**Severity:** HIGH
**File:** `CompanyController.java`
**Location:** `searchCompany`, line 53

**Description:** Public REST endpoint method has no Javadoc. No documentation describing the matching semantics of the `keyword` parameter (prefix, substring, case sensitivity) or the potential for an empty result list.

---

### A05-8
**Severity:** HIGH
**File:** `CompanyController.java`
**Location:** `addCompany`, line 62

**Description:** Public REST endpoint method has no Javadoc. This is the most complex method in the file: it conditionally inserts a permission record, executes multiple SQL queries inline, resolves a company-owner email address, and dispatches an email notification. None of this is documented. The business rules (e.g., self-association guard at line 66, duplicate-permission guard at line 70) are entirely implicit. HTTP 502 BAD_GATEWAY is returned on two distinct logic-error paths with no documentation.

---

### A05-9
**Severity:** HIGH
**File:** `CompanyController.java`
**Location:** `companyAcceptWeb`, line 121

**Description:** Public REST endpoint method has no Javadoc. The token parameter is an MD5 hash derived from `createdat` and `id`; this security-sensitive mechanism is entirely undocumented. The method is invoked via a URL in an email link (line 100 of `addCompany`) making its contract particularly important to document.

---

### A05-10
**Severity:** HIGH
**File:** `CompanyController.java`
**Location:** `companyAccept`, line 148

**Description:** Public REST endpoint method has no Javadoc. No documentation for the `pid` (permission ID) parameter, return status, or the absence of existence validation before the UPDATE statement.

---

### A05-11
**Severity:** HIGH
**File:** `CompanyController.java`
**Location:** `companyDelete`, line 163

**Description:** Public REST endpoint method has no Javadoc. No documentation for `pid`, return status, or the absence of existence validation before the DELETE statement. Despite being a destructive operation, the method is mapped to HTTP PUT rather than DELETE — this deviation from REST conventions is not documented.

---

### A05-12
**Severity:** MEDIUM
**File:** `ConfigurationController.java`
**Location:** Class-level Javadoc, lines 13–15

**Description:** The existing class Javadoc (`"Abstract controller class to help to inject global configuration component"`) is partially inaccurate. The class also injects a `dataSource` bean (`@Qualifier("dataSource")`), which is not mentioned. The description covers only one of the two protected injected fields.

---

### A05-13
**Severity:** LOW
**File:** `APKUpdaterController.java`, `CompanyController.java`, `ConfigurationController.java`
**Location:** All files

**Description:** No `@author`, `@since`, or `@version` Javadoc tags are present in any of the three files. While not strictly required, their absence impedes traceability and change management, particularly given the evident presence of multiple contributors (evidenced by the git log).

---

### A05-14
**Severity:** MEDIUM
**File:** `APKUpdaterController.java`
**Location:** `getAvailablePackage`, line 48

**Description:** An inline `// TODO Handle error` comment exists at the point where `MalformedURLException` is caught. The method silently returns `null` in this error case, which will propagate as an HTTP 200 response with a null body to the client. This unresolved TODO is undocumented at the method level and represents an acknowledged but deferred defect.

---

## Summary

| Severity | Count |
|----------|-------|
| CRITICAL | 1 |
| HIGH | 10 |
| MEDIUM | 2 |
| LOW | 1 |
| **Total** | **14** |

**Overall documentation state:** Poor. Zero of nine public methods carry any Javadoc. The one class-level Javadoc that does exist (`CompanyController`) is actively inaccurate. `ConfigurationController` has a partial class-level Javadoc that omits a key field. The most critical documentation gap is on `addCompany`, which contains multi-step business logic, email dispatch, and dual error paths — all without a single line of explanatory documentation.
