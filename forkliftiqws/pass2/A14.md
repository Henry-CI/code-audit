# Audit Report A14 - Pass 2: Test Coverage
**Agent:** A14
**Date:** 2026-02-27
**Pass:** 2 - Test Coverage
**Scope:** Model classes - Equipment, EquipmentType, ErrorMessage

---

## Reading Evidence

### File 1: Equipment.java
**Path:** `src/main/java/com/journaldev/spring/jdbc/model/Equipment.java`
**Class:** `Equipment implements Serializable`
**Annotations:** `@Data`, `@NoArgsConstructor`, `@Builder` (on constructor)

**Fields (all private):**

| Field | Type | Line |
|-------|------|------|
| `serialVersionUID` | `static final long` | 12 |
| `id` | `int` | 14 |
| `name` | `String` | 15 |
| `type_id` | `int` | 16 |
| `comp_id` | `int` | 17 |
| `active` | `boolean` | 18 |
| `manu_id` | `int` | 19 |
| `fuel_type_id` | `int` | 20 |
| `attachment_id` | `int` | 21 |
| `type` | `String` | 22 |
| `manu` | `String` | 23 |
| `fuel_type` | `String` | 24 |
| `comp` | `String` | 25 |
| `serial_no` | `String` | 26 |
| `mac_address` | `String` | 27 |
| `url` | `String` | 28 |
| `impact_threshold` | `long` | 29 |
| `alert_enabled` | `boolean` | 30 |
| `driver_based` | `boolean` | 31 |

**Methods (generated by Lombok `@Data` - not explicit in source, but fully active at runtime):**

| Method | Source |
|--------|--------|
| `getId()` | Lombok @Data |
| `getName()` | Lombok @Data |
| `getType_id()` | Lombok @Data |
| `getComp_id()` | Lombok @Data |
| `isActive()` | Lombok @Data |
| `getManu_id()` | Lombok @Data |
| `getFuel_type_id()` | Lombok @Data |
| `getAttachment_id()` | Lombok @Data |
| `getType()` | Lombok @Data |
| `getManu()` | Lombok @Data |
| `getFuel_type()` | Lombok @Data |
| `getComp()` | Lombok @Data |
| `getSerial_no()` | Lombok @Data |
| `getMac_address()` | Lombok @Data |
| `getUrl()` | Lombok @Data |
| `getImpact_threshold()` | Lombok @Data |
| `isAlert_enabled()` | Lombok @Data |
| `isDriver_based()` | Lombok @Data |
| `setId(int)` | Lombok @Data |
| `setName(String)` | Lombok @Data |
| `setType_id(int)` | Lombok @Data |
| `setComp_id(int)` | Lombok @Data |
| `setActive(boolean)` | Lombok @Data |
| `setManu_id(int)` | Lombok @Data |
| `setFuel_type_id(int)` | Lombok @Data |
| `setAttachment_id(int)` | Lombok @Data |
| `setType(String)` | Lombok @Data |
| `setManu(String)` | Lombok @Data |
| `setFuel_type(String)` | Lombok @Data |
| `setComp(String)` | Lombok @Data |
| `setSerial_no(String)` | Lombok @Data |
| `setMac_address(String)` | Lombok @Data |
| `setUrl(String)` | Lombok @Data |
| `setImpact_threshold(long)` | Lombok @Data |
| `setAlert_enabled(boolean)` | Lombok @Data |
| `setDriver_based(boolean)` | Lombok @Data |
| `equals(Object)` | Lombok @Data |
| `hashCode()` | Lombok @Data |
| `toString()` | Lombok @Data |
| `canEqual(Object)` | Lombok @Data |
| `Equipment()` (no-arg) | Lombok @NoArgsConstructor (line 10) |
| `Equipment(int,String,int,int,boolean,int,int,int,String,String,String,String,String,String,String,long,boolean,boolean)` | @Builder constructor (lines 34-56) |
| `Equipment.builder()` static | Lombok @Builder |

**Constants:** `serialVersionUID = 2619546105535442191L`

**Types referenced:** `Serializable`, `lombok.Builder`, `lombok.Data`, `lombok.NoArgsConstructor`

---

### File 2: EquipmentType.java
**Path:** `src/main/java/com/journaldev/spring/jdbc/model/EquipmentType.java`
**Class:** `EquipmentType implements Serializable`
**Annotations:** None (hand-written getters/setters)

**Fields (all private):**

| Field | Type | Line |
|-------|------|------|
| `serialVersionUID` | `static final long` | 10 |
| `id` | `int` | 11 |
| `name` | `String` | 12 |
| `icon` | `String` | 13 |

**Methods (explicit):**

| Method | Line |
|--------|------|
| `getId()` | 16 |
| `setId(int id)` | 19 |
| `getName()` | 22 |
| `setName(String name)` | 25 |
| `getIcon()` | 28 |
| `setIcon(String icon)` | 31 |

**No-arg constructor:** Implicit Java default constructor (no explicit constructor declared).

**Constants:** `serialVersionUID = 172500681596273029L`

**Types referenced:** `Serializable`

**Note:** `EquipmentType` is declared and serialized in this model package but is **referenced nowhere else in the production codebase** (confirmed by grep scan). There is no DAO, controller, or mapper that imports or uses `EquipmentType`.

---

### File 3: ErrorMessage.java
**Path:** `src/main/java/com/journaldev/spring/jdbc/model/ErrorMessage.java`
**Class:** `ErrorMessage implements Serializable`
**Annotations:** `@Data`, `@NoArgsConstructor`

**Fields (all private):**

| Field | Type | Line |
|-------|------|------|
| `serialVersionUID` | `static final long` | 15 |
| `message` | `String` | 16 |
| `code` | `String` | 17 |
| `detail` | `String` | 18 |

**Methods (generated by Lombok `@Data`):**

| Method | Source |
|--------|--------|
| `getMessage()` | Lombok @Data |
| `getCode()` | Lombok @Data |
| `getDetail()` | Lombok @Data |
| `setMessage(String)` | Lombok @Data |
| `setCode(String)` | Lombok @Data |
| `setDetail(String)` | Lombok @Data |
| `equals(Object)` | Lombok @Data |
| `hashCode()` | Lombok @Data |
| `toString()` | Lombok @Data |
| `canEqual(Object)` | Lombok @Data |
| `ErrorMessage()` (no-arg) | Lombok @NoArgsConstructor |

**Constants:** `serialVersionUID = -7636476173287405171L`

**Types referenced:** `Serializable`, `lombok.Data`, `lombok.NoArgsConstructor`

**Production usage:** `ErrorMessage` is held in the `errors` field of `ResponseWrapper` (line 20 of `ResponseWrapper.java`). It is instantiated in `AWSFileStorageService.java` only via a log call on the AWS SDK's own `getErrorMessage()` method (unrelated to this class). No controller explicitly builds an `ErrorMessage` instance and places it into a `ResponseWrapper.errors` list in the searched codebase.

---

## Test Coverage Summary

### Test suite inventory
Three test files exist under `src/test/java/`:

| Test File | Class Under Test |
|-----------|-----------------|
| `PackageEntryTest.java` | `PackageEntry` |
| `APKUpdaterServiceTest.java` | `APKUpdaterService` (all tests commented out) |
| `DateUtilTest.java` | `DateUtil` |

**None of the three test files reference `Equipment`, `EquipmentType`, or `ErrorMessage` directly or indirectly.** The `@Data`/`@Builder`/`@NoArgsConstructor` Lombok annotations generate the methods at compile time; those generated methods are also not exercised indirectly through any of the three existing test files.

---

## Findings

### A14-1 - Severity: CRITICAL
**Zero test coverage for `Equipment` model class**

No test file references, imports, instantiates, or indirectly exercises the `Equipment` class. The class is central to the application: it is used as the return type of `EquipmentDAO.getEquipmentByMacAddress()`, as the entity mapped from SQL results via `BeanPropertyRowMapper` in `EquipmentDAOImpl`, and consumed by `EquipmentController`, `ImpactController`, `ResumeController`, and `SessionController`. Despite its broad functional role, the following are entirely untested:

- All 18 Lombok-generated getters
- All 18 Lombok-generated setters
- The `@Builder`-annotated all-argument constructor (lines 34-56)
- The Lombok `@NoArgsConstructor` no-arg constructor
- `equals()` / `hashCode()` / `toString()` / `canEqual()` generated methods
- The `Equipment.builder()` static factory

The absence of any test exposes risks around: correct `BeanPropertyRowMapper` column-to-field binding for the 18 fields (particularly the snake_case field names `type_id`, `comp_id`, `manu_id`, `fuel_type_id`, `attachment_id`, `serial_no`, `mac_address`, `fuel_type`), default values for uninitialized primitive fields (`int` defaults to 0, `boolean` defaults to false, `long` defaults to 0L), and serialization round-trips.

---

### A14-2 - Severity: CRITICAL
**Zero test coverage for `EquipmentType` model class**

`EquipmentType` has no test coverage at all. Unlike `Equipment`, which at least has Lombok annotation-driven generation, `EquipmentType` carries six hand-written methods (`getId`, `setId`, `getName`, `setName`, `getIcon`, `setIcon`) none of which are tested. More critically, `EquipmentType` is **not referenced anywhere in the production codebase outside its own file** - no DAO, controller, service, or mapper imports or uses it. This raises the possibility that the class is a dead artifact that was never wired into the application, or that a mapping layer intended to use it was silently dropped. Either scenario represents a defect that only a test would have caught.

Untested paths:
- `getId()` / `setId(int)`
- `getName()` / `setName(String)`
- `getIcon()` / `setIcon(String)`
- Default Java no-arg constructor
- Java `equals()` / `hashCode()` / `toString()` (default Object implementations; no `@Data`)
- Serialization (no test validates the `serialVersionUID` round-trip)

---

### A14-3 - Severity: HIGH
**Zero test coverage for `ErrorMessage` model class**

`ErrorMessage` has no test coverage. It is the primary error-reporting vehicle returned inside `ResponseWrapper.errors` to API consumers. Its three fields (`message`, `code`, `detail`) are the contract by which all error information is communicated to clients. None of the following are tested:

- `getMessage()` / `setMessage(String)`
- `getCode()` / `setCode(String)`
- `getDetail()` / `setDetail(String)`
- `ErrorMessage()` no-arg constructor
- `equals()` / `hashCode()` / `toString()` / `canEqual()`
- Serialization round-trip

The untested error paths include: whether `code` is populated before `message`, whether `detail` is ever non-null (it appears optional in practice), and whether `toString()` is safe when all fields are null (Lombok generates null-tolerant output, but this is not verified).

---

### A14-4 - Severity: HIGH
**`Equipment` builder constructor not validated against field count**

The `@Builder`-annotated constructor at lines 34-56 accepts 18 parameters. The Lombok `@Data` annotation also generates a no-arg constructor via `@NoArgsConstructor`. There is no test asserting that the builder correctly assigns all 18 fields, that omitting a field leaves the correct default, or that the builder is the same object produced via `BeanPropertyRowMapper` in `EquipmentDAOImpl`. A mismatch between the builder parameter list and the `BeanPropertyRowMapper` column bindings could cause silent data loss that would be undetectable without a test.

---

### A14-5 - Severity: HIGH
**`EquipmentType` appears to be dead code with no production wiring**

A grep of the entire `src/main/java` tree finds `EquipmentType` referenced only in its own file. No DAO interface, DAO implementation, controller, service, or mapper uses the class. The class is Serializable and has a hand-coded `serialVersionUID`, suggesting it was intended to be persisted or transmitted. The absence of any consumer and the absence of any test means that if this class was meant to represent a lookup table (equipment types), that functionality is silently missing. A test for `EquipmentType` instantiation and use-via-DAO would have surfaced this gap.

---

### A14-6 - Severity: MEDIUM
**`Equipment.mac_address` and `Equipment.serial_no` have no null-safety tests**

The field `mac_address` (line 27) is used as the primary lookup key in `EquipmentDAOImpl.getEquipmentIdByMacAddress()` and `getEquipmentByMacAddress()`. No test validates model-level behavior when `mac_address` is null or empty. The SQL queries in `EquipmentDAOImpl` pass `mac_address` as a positional parameter with no null check; a null value will produce a SQL error rather than a controlled application error. A unit test on the model validating null/empty handling, combined with an integration test, is absent.

---

### A14-7 - Severity: MEDIUM
**`Equipment.impact_threshold` is `long` but no boundary tests exist**

`impact_threshold` (line 29, type `long`) represents a numeric threshold for impact alerts. No test validates: the minimum value (0), negative values (which may be semantically invalid but are structurally permissible), `Long.MAX_VALUE`, or interaction with the `alert_enabled` boolean flag. The combination of `alert_enabled = true` with `impact_threshold = 0` is a particularly risky edge case (potentially triggering alerts on every event) that is entirely untested.

---

### A14-8 - Severity: MEDIUM
**`ErrorMessage` has no validation or constraint enforcement**

`ErrorMessage` is a plain POJO with three nullable `String` fields and no JSR-303/Bean Validation annotations (`@NotNull`, `@NotBlank`, etc.). There is no test asserting that a fully null `ErrorMessage` (all three fields null) produces meaningful serialized output, or that the `code` field follows any enumerated format. Because `ErrorMessage` is the sole error contract returned to API clients, untested null field combinations may result in clients receiving empty or structurally incomplete error objects.

---

### A14-9 - Severity: LOW
**`EquipmentType` missing `@Data` or equivalent Lombok annotation - no `equals`/`hashCode` override**

`Equipment` and `ErrorMessage` use `@Data` which generates correct field-based `equals()` and `hashCode()`. `EquipmentType` uses neither Lombok nor hand-coded `equals()`/`hashCode()`, meaning it falls back to `Object` identity comparison. If `EquipmentType` instances are placed in collections (`Set`, `Map`) or compared in assertions, identity-based equality will produce incorrect results. No test exists to detect this behavioral difference between `EquipmentType` and the other two model classes.

---

### A14-10 - Severity: LOW
**`Equipment` field naming convention (snake_case) deviates from Java convention and is untested for serialization**

Fields such as `type_id`, `comp_id`, `manu_id`, `fuel_type_id`, `attachment_id`, `serial_no`, `mac_address`, `fuel_type` (lines 16-31) use snake_case rather than the Java camelCase convention. Lombok will generate getter/setter names that include the underscore (e.g., `getType_id()`, `setMac_address()`). This diverges from standard JavaBeans naming conventions that Jackson and Spring's `BeanPropertyRowMapper` rely on. No test validates that JSON serialization/deserialization round-trips these fields correctly, or that `BeanPropertyRowMapper` maps the SQL column names to the correct fields without a custom `ColumnMapRowMapper`. A serialization test (e.g., Jackson `ObjectMapper` round-trip) is entirely absent for all three model classes.

---

### A14-11 - Severity: INFO
**All three model classes implement `Serializable` with explicit `serialVersionUID` but serialization is untested**

`Equipment` (serialVersionUID = 2619546105535442191L), `EquipmentType` (serialVersionUID = 172500681596273029L), and `ErrorMessage` (serialVersionUID = -7636476173287405171L) all implement `Serializable`. No test verifies that any of these classes can be serialized to a byte stream and deserialized back to an equal object. If the `serialVersionUID` values are changed (or if fields are added without updating `serialVersionUID`), deserialization of previously cached objects will fail with `InvalidClassException`. This risk is unmitigated by any test.

---

## Summary Table

| Finding | Class | Severity | Description |
|---------|-------|----------|-------------|
| A14-1 | Equipment | CRITICAL | Zero test coverage |
| A14-2 | EquipmentType | CRITICAL | Zero test coverage; class appears to be dead code |
| A14-3 | ErrorMessage | HIGH | Zero test coverage for primary error contract |
| A14-4 | Equipment | HIGH | Builder vs BeanPropertyRowMapper field alignment unverified |
| A14-5 | EquipmentType | HIGH | No production wiring found in entire codebase |
| A14-6 | Equipment | MEDIUM | No null-safety tests for mac_address used as DB lookup key |
| A14-7 | Equipment | MEDIUM | No boundary tests for impact_threshold long field |
| A14-8 | ErrorMessage | MEDIUM | No validation constraints; null field combinations untested |
| A14-9 | EquipmentType | LOW | Missing equals/hashCode override; falls back to identity comparison |
| A14-10 | Equipment | LOW | Snake_case field names untested for JSON/BeanPropertyRowMapper mapping |
| A14-11 | All three | INFO | Serializable with serialVersionUID but serialization untested |
