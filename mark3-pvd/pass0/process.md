# Pass 0: Process Review — mark3-pvd
**Date:** 2026-02-28
**Branch:** master
**Auditor:** Claude (main conversation)

---

## Reading Evidence

All process-adjacent files in the repository were read in full before findings were recorded.

| File | Lines | Description |
|---|---|---|
| `.gitignore` | 8 | Five rules: `Makefile`, `FleetFocus`, `.*` (with `!.gitignore` exception), `/tmp`, `*.bak` |
| `mk3.pro` | 193 | Main Qt project. TARGET=FleetFocus. 34 SOURCES, 35 HEADERS (logger.h listed twice), 23 FORMS, 1 TRANSLATIONS entry, 1 DISTFILES entry |
| `mk3-test.pro` | 201 | Test Qt project. Adds `UNIT_TEST` define and 4 test source/header pairs. `main.cpp` absent. `TEST_MODE=0` (same value as production) |
| `run_tests` | 8 | Shell script. Executes `./FleetFocus` and pipes output through awk to colour-code PASS/FAIL/DEBUG/WARN lines |
| `netcfg.json` | 4 | Network configuration. Contains `"ssid": "cigSecureConnect"` and `"password": "P@ssMK3!"`. Listed in DISTFILES in both `.pro` files. Tracked in git |
| `Makefile.test` | ~677KB | Generated by qmake from a specific developer's machine. Hardcodes `/home/ryanharm/git/…` and `/home/pvd/Data/…` absolute paths throughout |
| `lang.dat` | — | Binary file; not readable |

**No CLAUDE.md exists. No README.md or any other documentation file exists in the repository.**

---

## Findings

### P0-1 — No CLAUDE.md
**Severity:** MEDIUM
**File:** (absent)

There is no CLAUDE.md in the repository. The audit framework (AUDIT-FRAMEWORK_legacy.md and SKILL-Audit-Pass0.md) explicitly instructs auditors to "Check CLAUDE.md for project-specific security concerns" before each security pass. Without it, every future audit session must reconstruct project context from source code alone. Information that belongs in CLAUDE.md and is currently undocumented includes:

- What Qt version and cross-compilation toolchain are required
- What the `netcfg.json` file is and whether its committed credentials are intentional
- Whether `Makefile.test` being committed is intentional
- What `TEST_MODE` controls and why it is 0 in both production and test builds
- The target hardware platform and any platform-specific audit considerations
- Known security-relevant architectural decisions (e.g., TLS configuration, OTA update signing)

A future auditor reading only the AUDIT-FRAMEWORK_legacy.md will be told to "check CLAUDE.md for project-specific security concerns" and find nothing, which may cause that step to be skipped or misinterpreted as meaning no concerns exist.

---

### P0-2 — No README
**Severity:** MEDIUM
**File:** (absent)

There is no README.md or equivalent documentation file at the repository root or in any subdirectory. The framework's Pass 3 documentation check explicitly requires a README documenting build requirements (Qt version, cross-compilation toolchain), how to build, how to flash to device, and the test procedure. The absence means:

- A new developer or auditor cannot determine the required Qt version (the generated `Makefile.test` references Qt 5.9.6 and `arm-none-linux-gnueabi-gcc`, but this is only visible in a committed generated file, not documented policy).
- How to run tests is not documented (only inferable from `run_tests`).
- The target hardware platform is unnamed in any document.
- No deployment or flashing procedure exists anywhere in the repository.

This is a gap that will be re-reported as a finding in Pass 3. Recording here because it is also a process gap: future audit sessions cannot rely on README context.

---

### P0-3 — Audit framework branch mismatch
**Severity:** LOW
**File:** `/Projects/cig-audit/audit-skills/AUDIT-FRAMEWORK_legacy.md` (line 29)

The audit framework mapping table specifies:

```
| mark3-pvd | C++/Qt | main |
```

The repository has no `main` branch. The only branch is `master`. Every future audit session that follows the framework literally will check out a branch that does not exist, fail, and need to resolve the discrepancy manually. This was caught at session start in this audit run but required explicit investigation. The framework entry for mark3-pvd should be corrected to `master`.

---

### P0-4 — Generated file with developer-specific paths committed to version control
**Severity:** LOW
**File:** `Makefile.test` (entire file)

`Makefile.test` is a file generated by `qmake` from `mk3-test.pro`. It is committed to the repository and tracked in git (it is not in `.gitignore`). The file contains hardcoded absolute paths from the developer's local machine:

- `/home/ryanharm/git/sdk/qt/bin/qmake`
- `/home/ryanharm/git/mark3-pvd/tmp/obj/…`
- `/home/pvd/Data/nuc972/rootfs/bluetooth/_install/include`
- `/home/pvd/Data/nuc972/rootfs/openssl/_install/usr/include`

These paths are non-functional on any machine other than the original developer's. A future auditor seeing this file will either (a) be confused about whether it is authoritative build configuration, or (b) attempt to use it and fail. The `.gitignore` excludes `Makefile` (unanchored) but not `Makefile.test`, creating an inconsistency: the production generated Makefile is excluded, but the test generated Makefile is included.

This also leaks the developer's username (`ryanharm`) and internal path structure (`pvd`, `nuc972`) into version control history.

---

### P0-5 — `run_tests` assumes pre-built binary with no guard
**Severity:** LOW
**File:** `run_tests` (line 2)

The `run_tests` script executes `./FleetFocus` directly with no check that the binary exists or that it was built from the test project (`mk3-test.pro`) rather than the production project (`mk3.pro`). Both projects produce a binary named `FleetFocus` (both set `TARGET = FleetFocus`).

If a developer runs `run_tests` after a production build (i.e., the `FleetFocus` binary exists but was built without `UNIT_TEST`), the script will run the production firmware binary instead of the test binary and produce no test output — but will not indicate any error. Equally, if no binary exists at all, the script exits with a shell error message that has no special formatting and is easily missed.

This creates a process risk: a developer could believe tests passed (no red FAIL output) when tests were never run.

---

### P0-6 — `TEST_MODE=0` in test build project is ambiguous
**Severity:** INFO
**File:** `mk3-test.pro` (line 6); `mk3.pro` (line 6)

Both the production build (`mk3.pro`) and the test build (`mk3-test.pro`) define `TEST_MODE=0`. The test project also defines `UNIT_TEST`. It is not documented anywhere what `TEST_MODE` controls, nor why both production and test builds set it to 0. This creates ambiguity for future sessions:

- Does `TEST_MODE=1` enable a different device behaviour, and was this intentionally excluded from the test build?
- Is `TEST_MODE` dead/unused code?
- Is `UNIT_TEST` the only macro that matters for test compilation, making `TEST_MODE` irrelevant?

Without a CLAUDE.md or README to explain the distinction, a future auditor cannot determine whether `TEST_MODE=0` in the test project is intentional design or a copy-paste oversight.

---

### P0-7 — `utils/logger.h` listed twice in HEADERS in both project files
**Severity:** INFO
**File:** `mk3.pro` (lines 63 and 122); `mk3-test.pro` (lines 120 and 130)

`utils/logger.h` appears twice in the `HEADERS` section of both `.pro` files. qmake silently ignores duplicate entries, so this has no build effect. However, it is a process quality issue: the duplication suggests the HEADERS sections were assembled by copy-paste and not reviewed, which reduces confidence that the file lists are otherwise accurate and complete.

---

## Summary

| ID | Severity | Title |
|---|---|---|
| P0-1 | MEDIUM | No CLAUDE.md |
| P0-2 | MEDIUM | No README |
| P0-3 | LOW | Audit framework branch mismatch (main vs master) |
| P0-4 | LOW | Generated Makefile.test with developer paths committed |
| P0-5 | LOW | `run_tests` does not verify binary exists or is the test build |
| P0-6 | INFO | TEST_MODE=0 in test project is undocumented and ambiguous |
| P0-7 | INFO | utils/logger.h duplicated in HEADERS in both .pro files |

**Note:** `netcfg.json` contains a committed plaintext WiFi credential (`"password": "P@ssMK3!"`). This is not a process document finding — it will be reported as a security finding in Pass 1.
