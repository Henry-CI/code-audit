# Audit Pass 2 — Test Coverage
**Agent:** A62
**Audit run:** 2026-02-26-01
**Assigned files:**
1. `app/src/main/java/au/com/collectiveintelligence/fleetiq360/ui/fragment/EquipmentListFragment.java`
2. `app/src/main/java/au/com/collectiveintelligence/fleetiq360/ui/fragment/EquipmentPrestartFragment.java`
3. `app/src/main/java/au/com/collectiveintelligence/fleetiq360/ui/fragment/IncidentFragment.java`

---

## PROJECT-WIDE FINDING

### A62-1 — CRITICAL: Zero automated test coverage across the entire app

**Severity:** HIGH (project-wide structural gap; elevated to HIGH per scope of impact across safety-critical code paths)

The `app/` and `LibCommon/` modules contain no `test/` or `androidTest/` source directories whatsoever. The complete source tree under `app/src/` has only a single `main/` subtree — no unit tests, no instrumented tests, no Robolectric tests, and no Espresso tests exist.

```
app/src/
  main/         ← only this directory exists
    java/
    res/
  (no test/)
  (no androidTest/)
```

The only test files in the entire repository are in `LibImageloader/src/test/` — a third-party image loading library unrelated to business logic:
- `LibImageloader/src/test/java/com/nostra13/universalimageloader/core/assist/ImageSizeTest.java`
- `LibImageloader/src/test/java/com/nostra13/universalimageloader/core/download/BaseImageDownloaderTest.java`

No test exercises any code in the application's safety-critical pre-start checklist gate, training expiry enforcement, equipment selection, incident reporting, session management, or offline sync pipeline. Every finding below describes a gap that exists against a zero-coverage baseline.

---

## File 1: EquipmentListFragment.java

### Reading Evidence

**Fully qualified class name:**
`au.com.collectiveintelligence.fleetiq360.ui.fragment.EquipmentListFragment`

**Implements:**
- `AbsRecyclerAdapter.OnItemClickListener`
- `EquipmentSelectForkPresenter.ShowResultCallBack`

**Fields and constants (all instance/static):**

| Declaration | Kind | Line |
|---|---|---|
| `SelectForkAdapter myAdapter` | private instance field | 43 |
| `EquipmentSelectForkPresenter presenter` | private instance field | 44 |
| `List<String> urlList` | public instance field | 45 |
| `GetEquipmentResultArray getEquipmentResultArray` | public static field | 46 |
| `boolean equipmentChanged` | package-private static field | 47 |
| `int equipmentSelected` | package-private static field | 48 |
| `EquipmentActivity activity` | package-private instance field | 49 |

**Methods with line numbers and signatures:**

| Line | Signature |
|---|---|
| 53 | `public View onCreateView(@NonNull LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState)` |
| 59 | `public void onDestroy()` |
| 64 | `public void initViews()` |
| 94 | `private void setRecyclerViewdata(List<EquipmentItem> list)` |
| 103 | `public void onItemClick(View v, final int position)` |
| 108 | `public void selectEquipment(final int position)` |
| 159 | `private Date getTrainingExpiryDate(List<TrainingItem> training, int position)` |
| 175 | `private void goToCurrentEquipmentNext(int position)` |
| 184 | `private void showNext()` |
| 191 | `public void uiUpdateEquipmentList(GetEquipmentResultArray resultArray)` |
| 206 | `public void onRightButton(View view)` |
| 216 | `public void onMiddleButton(View view)` |

---

### A62-2 — CRITICAL: No test for training-expiry enforcement in selectEquipment()

**File:** `EquipmentListFragment.java`
**Method:** `selectEquipment(int position)` — lines 108–156
**Severity:** CRITICAL

`selectEquipment()` is the sole gate that enforces training/licence expiry before a driver can operate equipment. The logic at lines 128–155 computes `diffInDays` from the expiry date and routes to one of three outcomes:

1. `diffInDays < 0` — blocks operation and calls `getActivity().finish()` (expired licence)
2. `diffInDays < 30` — shows a warning dialog and then proceeds (expiring soon)
3. All other cases — proceeds directly

There are no tests for any of these branches. A regression could silently disable the expiry check, allowing operators with expired licences to start equipment sessions. Because this is an access control for machinery operation, the consequence of a failure is safety-critical.

Specific untested scenarios:
- Expired training (`diffInDays == -1`, `-365`, etc.) — gate must block
- Training expiring today (`diffInDays == 0`) — boundary: falls into the warning-dialog branch, proceeds
- Training expiring in exactly 29 days — warning shown, proceeds
- Training expiring in exactly 30 days — no warning, proceeds
- `getTrainingExpiryDate()` returns `null` (no matching training record) — proceeds without check
- Active session already exists (`WebData.instance().getSessionResult() != null`) — shows error dialog and returns early; no test

---

### A62-3 — HIGH: No test for getTrainingExpiryDate() matching logic

**File:** `EquipmentListFragment.java`
**Method:** `getTrainingExpiryDate(List<TrainingItem> training, int position)` — lines 159–173
**Severity:** HIGH

This method matches equipment to training records by triple key: `manu_id`, `type_id`, and `fuel_type_id`. If any field mismatches, the method returns `null` and the caller skips the expiry check entirely (line 121–124: `if (trainingExpiry == null) { goToCurrentEquipmentNext(position); return; }`). No test covers:

- All three fields match — expiry date is returned
- Any one field mismatches — returns `null`, bypassing the check
- Empty training list — returns `null`
- Multiple training records where only the last matches
- `training.get(i).expiration_date` is null or malformed — `parseDate` returns `null`, propagates as `null` expiry

A bug in this matching logic causes silent bypass of the training-expiry gate.

---

### A62-4 — HIGH: No test for uiUpdateEquipmentList() with equipmentChanged flag

**File:** `EquipmentListFragment.java`
**Method:** `uiUpdateEquipmentList(GetEquipmentResultArray resultArray)` — lines 191–203
**Severity:** HIGH

The `equipmentChanged` static boolean triggers a refresh when set externally. No test covers:

- `equipmentChanged == true` — verifies a second `presenter.getEquipmentList()` call is made and the flag is reset to `false`
- `equipmentChanged == false`, `resultArray == null` — adapter receives empty list; "join company" tips visibility
- `equipmentChanged == false`, `resultArray` non-null — adapter receives data
- Static state leaking between tests due to `getEquipmentResultArray` and `equipmentChanged` being `static`

---

### A62-5 — MEDIUM: No test for setRecyclerViewdata() with empty list

**File:** `EquipmentListFragment.java`
**Method:** `setRecyclerViewdata(List<EquipmentItem> list)` — lines 94–100
**Severity:** MEDIUM

The `join_company_tips` view visibility is toggled based on `dataList.size() == 0`. No test confirms the correct visibility state for an empty or non-empty equipment list, including the edge case of exactly one item.

---

### A62-6 — MEDIUM: No test for onRightButton() contact-person branch

**File:** `EquipmentListFragment.java`
**Method:** `onRightButton(View view)` — lines 206–213
**Severity:** MEDIUM

When the current user `isContactPerson()`, the button navigates to `AddEquipmentFragment`. When not, it calls `super.onRightButton()`. No test covers either branch, including the case where `isContactPerson()` changes state between views.

---

### A62-7 — MEDIUM: No test for goToCurrentEquipmentNext() with out-of-bounds position

**File:** `EquipmentListFragment.java`
**Method:** `goToCurrentEquipmentNext(int position)` — lines 175–180
**Severity:** MEDIUM

The guard `if (position < getEquipmentResultArray.arrayList.size())` silently skips the assignment if position is out of range, and then calls `showNext()` with whatever `MyCommonValue.currentEquipmentItem` was previously. No test covers the out-of-bounds case, which could start a session on a stale equipment item.

---

### A62-8 — MEDIUM: No test for showNext() when activity is null

**File:** `EquipmentListFragment.java`
**Method:** `showNext()` — lines 184–188
**Severity:** MEDIUM

`showNext()` checks `if (activity != null)` before calling `createAndSaveSession()`. No test covers the case where `activity` is `null` (the fragment is not attached to an `EquipmentActivity`), which silently swallows the event with no user feedback.

---

### A62-9 — LOW: Static field getEquipmentResultArray not reset between logical flows

**File:** `EquipmentListFragment.java`
**Field:** `public static GetEquipmentResultArray getEquipmentResultArray` — line 46
**Severity:** LOW

This static field is nulled only in `onDestroy()`. If the fragment is recreated without `onDestroy()` being called (e.g., process death recovery, configuration change through the back stack), stale data may be displayed. No test verifies the lifecycle interaction.

---

## File 2: EquipmentPrestartFragment.java

### Reading Evidence

**Fully qualified class name:**
`au.com.collectiveintelligence.fleetiq360.ui.fragment.EquipmentPrestartFragment`

**Implements:**
- `AbsRecyclerAdapter.OnItemClickListener`

**Fields and constants:**

| Declaration | Kind | Line |
|---|---|---|
| `String TAG` | private static field | 35 |
| `PrestartCheckListAdapter myAdapter` | private instance field | 36 |
| `ArrayList<PreStartQuestionItem> qustionItemArrayList` | public instance field | 38 |
| `PreStartCheckListPresenter presenter` | private instance field | 39 |
| `String myCommentStr` | private instance field (init `""`) | 41 |

**Methods with line numbers and signatures:**

| Line | Signature |
|---|---|
| 45 | `public View onCreateView(@NonNull LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState)` |
| 50 | `public void setRecyclerViewdata(PreStartQuestionResultArray result)` |
| 60 | `public void initViews()` |
| 107 | `private void setDriverInfoHeader()` |
| 120 | `public void showNext()` |
| 125 | `public void onLeftButton(View view)` |
| 135 | `public void onMiddleButton(View view)` |
| 143 | `public void onRightButton(View view)` |
| 150 | `public void onHiddenChanged(boolean hidden)` |
| 155 | `public void onItemClick(View v, int position)` |

**Safety context note:** This fragment is the pre-start checklist safety gate. `onMiddleButton()` (the SAVE action) is the sole enforcement point for "answer all questions before submission." `PreStartCheckListPresenter.savePreStartCheckListAnswerResult()` performs the network submission and, in the failure path (lines 84–105 of the presenter), calls `SessionDb.setSessionPreStartFinished()` with `offline=true` when there is offline data — this marks the pre-start as complete and advances to the next screen without confirmed server-side recording.

---

### A62-10 — CRITICAL: No test for incomplete checklist bypass in onMiddleButton()

**File:** `EquipmentPrestartFragment.java`
**Method:** `onMiddleButton(View view)` — lines 135–140
**Severity:** CRITICAL

The only enforcement that prevents submission of an incomplete checklist is a single equality check at line 136:

```java
if (presenter.mapAnswers.size() != qustionItemArrayList.size())
    EquipmentPrestartFragment.this.showToast("Please answer all the questions first");
else
    presenter.savePreStartCheckListAnswerResult(presenter.mapAnswers, myCommentStr);
```

No test verifies this gate. Specific untested scenarios:

- `mapAnswers.size() < qustionItemArrayList.size()` — must show toast and not call save
- `mapAnswers.size() == qustionItemArrayList.size()` — must call save
- `mapAnswers.size() > qustionItemArrayList.size()` — theoretically impossible but not guarded
- `qustionItemArrayList` is empty and `mapAnswers` is empty — the gate passes (0 == 0), submitting an empty checklist as complete. There is no minimum-question-count guard.
- A race condition where the adapter populates `mapAnswers` asynchronously while questions are loading and the user taps SAVE during the window — no test for the transient state.

A regression disabling this check would allow a driver to complete a session's pre-start with zero answered questions, defeating the safety gate entirely.

---

### A62-11 — CRITICAL: No test for offline submission advancing past safety gate

**File:** `EquipmentPrestartFragment.java` (via `PreStartCheckListPresenter`)
**Method:** `onMiddleButton()` → `PreStartCheckListPresenter.savePreStartCheckListAnswerResult()` — presenter lines 58–109
**Severity:** CRITICAL

When the network call to `savePreStartResult` fails and `SessionDb.hasOfflineData(parameter.session_id)` returns `true`, the presenter calls `SessionDb.setSessionPreStartFinished(session_id, parameter, offline=true)` and then advances to the next screen (jobs screen) — identical to a successful submission. No test covers this path.

This means:
1. Any network failure when offline data exists silently marks the pre-start as finished in the local database.
2. The driver proceeds to operate equipment without server confirmation of the completed checklist.
3. The offline sync pipeline (`SyncService`) is responsible for eventually uploading the answers — but there is no test that the pre-start answers are correctly queued, correctly formatted, or successfully synced after resumption.
4. If the device is lost, wiped, or the app is force-stopped before sync, the pre-start data is permanently lost while the session shows as pre-start-complete in the local database.

---

### A62-12 — CRITICAL: No test for network failure when no offline data exists in pre-start submission

**File:** `EquipmentPrestartFragment.java` (via `PreStartCheckListPresenter`)
**Method:** `PreStartCheckListPresenter.savePreStartCheckListAnswerResult()` — presenter lines 96–105
**Severity:** CRITICAL

When the network call fails AND `SessionDb.hasOfflineData()` returns `false`, the presenter calls `ui.updateProgress("Prestart result save failed")` and then hides the progress dialog — but does not return the user to the checklist, does not clear answers, and does not prevent the user from pressing SAVE again. The fragment remains in its current state with no further guidance. No test covers:

- Whether the UI correctly recovers and allows retry
- Whether the user is left stranded (no retry button, no error dialog, no navigation)
- Whether pressing SAVE a second time produces a duplicate network request with a different `finish_time`
- Whether `mapAnswers` and `qustionItemArrayList` are still consistent after the failed save

---

### A62-13 — HIGH: No test for setRecyclerViewdata() with empty question list

**File:** `EquipmentPrestartFragment.java`
**Method:** `setRecyclerViewdata(PreStartQuestionResultArray result)` — lines 50–58
**Severity:** HIGH

If the server returns an empty question array, `qustionItemArrayList` will be empty and `mapAnswers` will trivially equal its size (both 0). The SAVE gate at `onMiddleButton()` would then pass immediately on first press, submitting an empty checklist as complete. No test covers this empty-question-array edge case.

---

### A62-14 — HIGH: No test for setDriverInfoHeader() timezone branching

**File:** `EquipmentPrestartFragment.java`
**Method:** `setDriverInfoHeader()` — lines 107–118
**Severity:** HIGH

The "TRAINING REQUIRED" indicator visibility is conditioned on `tz.getID().contains("America")` — a string-based timezone heuristic. No test covers:

- A device in an American timezone where `currentEquipmentItem.trained == false` — training banner must be visible
- A device in an American timezone where `currentEquipmentItem.trained == true` — training banner must be invisible
- A device in a non-American timezone — training banner is always invisible regardless of `trained` field
- The `currentEquipmentItem` being `null` — `NullPointerException` at line 112

---

### A62-15 — HIGH: No test for getPreStartCheckListInfo() network failure fallback

**File:** `EquipmentPrestartFragment.java` (via `PreStartCheckListPresenter`)
**Method:** `PreStartCheckListPresenter.getPreStartCheckListInfo()` — presenter lines 34–56
**Severity:** HIGH

On network failure, the presenter falls back to `PreStartQuestionDb.getQuestionResultArray()` using the cached questions. If the cache is also absent, only a toast is shown ("Get prestart info failed.") and the fragment remains with an empty, uninteractable checklist. No test covers:

- Network fails, cached questions exist — adapter is populated with stale cached data; pre-start proceeds
- Network fails, no cache — toast only; fragment left non-functional; user cannot proceed or back out gracefully
- The fallback questions differ from the current server questions (stale cache) — checklist may not match current equipment requirements

---

### A62-16 — MEDIUM: No test for onLeftButton() SessionActivity branch

**File:** `EquipmentPrestartFragment.java`
**Method:** `onLeftButton(View view)` — lines 125–131
**Severity:** MEDIUM

When the host activity is a `SessionActivity`, the left button calls `onExitSessionActivity()`. When it is not, it calls `super.onLeftButton()` (which calls `getActivity().finish()`). No test covers either branch. Specifically, pressing the left button (DASHBOARD) during a pre-start could allow a driver to abandon an incomplete checklist and exit the session — no confirmation dialog is shown.

---

### A62-17 — MEDIUM: No test for onRightButton() diagnosis intent construction

**File:** `EquipmentPrestartFragment.java`
**Method:** `onRightButton(View view)` — lines 143–147
**Severity:** MEDIUM

The DIAGNOSIS button builds a URL using `URLBuilder.urlGetDiagnosis(MyCommonValue.currentEquipmentItem.id)` and starts a `WebActivity`. No test covers:

- `MyCommonValue.currentEquipmentItem` being null — `NullPointerException`
- URL construction with a valid equipment ID
- The correct intent extra key and value

---

### A62-18 — LOW: Typo in field name qustionItemArrayList never caught by tests

**File:** `EquipmentPrestartFragment.java`
**Field:** `public ArrayList<PreStartQuestionItem> qustionItemArrayList` — line 38
**Severity:** LOW

The field is misspelled ("qustion" instead of "question"). This is not a functional defect in isolation, but it indicates no code review or test suite has enforced naming conventions. Any future refactoring of this field name would be caught only if tests reference it. As a public field this is also API surface.

---

## File 3: IncidentFragment.java

### Reading Evidence

**Fully qualified class name:**
`au.com.collectiveintelligence.fleetiq360.ui.fragment.IncidentFragment`

**Extends:** `FleetFragment`

**Fields and constants:**

| Declaration | Kind | Line |
|---|---|---|
| `ToggleImageButton incident_checkbox` | private instance field | 40 |
| `ToggleImageButton near_miss_checkbox` | private instance field | 41 |
| `TextView incident_date` | private instance field | 42 |
| `TextView incident_time` | private instance field | 43 |
| `EditText description` | private instance field | 44 |
| `IncidentActivity incidentActivity` | private instance field | 45 |
| `TextView equipment_name` | private instance field | 46 |
| `Calendar incidentCal` | private instance field | 48 |
| `CompanyDateFormatter companyDateFormatter` | private instance field | 49 |
| `ServerDateFormatter serverDateFormatter` | private instance field | 50 |
| `Boolean dateSet` | private instance field | 51 |
| `Boolean timeSet` | private instance field | 52 |
| `EquipmentItem equipmentItem` | private instance field | 54 |
| `ArrayList<EquipmentItem> equipmentList` | private instance field (init `new ArrayList<>()`) | 55 |

**Methods with line numbers and signatures:**

| Line | Signature |
|---|---|
| 57 | `private void showEquipmentName()` |
| 62 | `private void showEquipmentNameList()` |
| 93 | `private void loadEquipment(final Runnable runnable)` |
| 128 | `public View onCreateView(@NonNull LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState)` |
| 134 | `public void initViews()` |
| 197 | `private void initValue()` |
| 212 | `private void showTimePicker()` |
| 230 | `private void showDatePicker()` |
| 246 | `private void updateTime()` |
| 250 | `private void updateDate()` |
| 255 | `public void onRightButton(View view)` |

---

### A62-19 — HIGH: No test for incident data loss on back-press

**File:** `IncidentFragment.java` and `IncidentActivity.java`
**Method:** `IncidentActivity.onBackPressed()` — `IncidentActivity.java` lines 36–42
**Severity:** HIGH

`IncidentActivity.onBackPressed()` calls `finish()` only if `impactResult != null`. If `impactResult` is still null (i.e., the incident report has not been successfully submitted), back-press falls through to `super.onBackPressed()`, which pops the back stack. The `IncidentFragment` does not intercept back-press at all.

When the user has partially filled in incident data — selected equipment, typed a description, chosen date/time, set incident type — and then presses Back, all data entered in `IncidentFragment` is silently discarded. There is no confirmation dialog ("Are you sure you want to discard this incident report?"). No test covers:

- User presses Back after entering partial data — data is lost, no warning
- User presses Back after completing all fields but before pressing NEXT — data is lost, no warning
- The `impactParameter` object in `IncidentActivity` holds partially written state (from `initViews` reading prior `impactParameter` values) that does not survive the activity being finished

Given that incidents are workplace safety events, loss of an incident report is a compliance risk. The driver must restart from scratch.

---

### A62-20 — HIGH: No test for onRightButton() validation — null equipment, dateSet=false, timeSet=false

**File:** `IncidentFragment.java`
**Method:** `onRightButton(View view)` — lines 255–278
**Severity:** HIGH

The NEXT button validates three sequential guards:

1. `if (null == equipmentItem)` → toast, return
2. `if (!dateSet)` → toast, return
3. `if (!timeSet)` → toast, return

No test covers any of these guards or the happy path. Missing coverage:

- Equipment not selected, presses NEXT — must block and show toast
- Date not selected, equipment selected — must block at date guard
- Time not selected, date and equipment selected — must block at time guard
- Neither incident nor near_miss checked, all other fields filled — currently proceeds with both unchecked (no validation); the resulting submission has `incident=false, near_miss=false`
- `description.getText().toString()` is empty — currently proceeds with empty description; no minimum-length validation

---

### A62-21 — HIGH: No test for loadEquipment() network failure path

**File:** `IncidentFragment.java`
**Method:** `loadEquipment(final Runnable runnable)` — lines 93–124
**Severity:** HIGH

On network failure, the method falls back to `EquipmentDb.getEquipmentResultArray(usrId)`. If the local database also has no data, it calls `showErrDialog("Failed to get equipment list.")` and the runnable is never executed. No test covers:

- Network fails, local DB has data — equipment list is populated from cache, dialog shown
- Network fails, local DB empty — error dialog shown, equipment name picker left empty
- Network succeeds — loading hidden, list populated, runnable executed
- `runnable` is `null` — null check at lines 102 and 115 prevents NPE, but this path is untested

---

### A62-22 — HIGH: No test for loadEquipment() being triggered multiple times (equipmentList population)

**File:** `IncidentFragment.java`
**Method:** `showEquipmentNameList()` — lines 62–91
**Severity:** HIGH

`showEquipmentNameList()` calls `loadEquipment(runnable)` only when `equipmentList.size() == 0` (line 86). Once the list is populated, subsequent taps use the cached list. No test covers:

- First tap — triggers network load, list shown after load
- Second tap without network change — uses cached list
- Equipment added/removed on server between taps — stale list shown because `equipmentList.size() > 0` prevents refresh
- The dialog's selection callback correctly sets `equipmentItem` and calls `showEquipmentName()`

---

### A62-23 — MEDIUM: No test for initValue() when SessionDb.readRunningEquipmentItem() returns null

**File:** `IncidentFragment.java`
**Method:** `initValue()` — lines 197–210
**Severity:** MEDIUM

`initValue()` attempts to pre-populate `equipmentItem` from the running session if it is not already set. If `SessionDb.readRunningEquipmentItem()` returns `null`, `equipmentItem` remains `null`. No test covers this path or the subsequent `showEquipmentName()` call which correctly handles `null` by showing `"--Equipment Name--"`.

---

### A62-24 — MEDIUM: No test for initViews() with pre-existing event_time in impactParameter

**File:** `IncidentFragment.java`
**Method:** `initViews()` — lines 134–195
**Severity:** MEDIUM

When `incidentActivity.impactParameter.event_time` is non-null (lines 145–148), `incidentCal` is set from the parsed datetime and both `dateSet` and `timeSet` are set to `true`. When it is null, both are `false`. No test covers:

- Pre-populated `event_time` — calendar is set, date and time fields pre-filled
- `event_time` is non-null but malformed — `serverDateFormatter.parseDateTime()` returns `null`, `incidentCal.setTime(null)` throws `NullPointerException`
- Null `event_time` — fields show hints only

---

### A62-25 — MEDIUM: No test for showDatePicker() and showTimePicker() picker callbacks

**File:** `IncidentFragment.java`
**Methods:** `showDatePicker()` lines 230–244; `showTimePicker()` lines 212–228
**Severity:** MEDIUM

The date and time pickers set `dateSet`/`timeSet` flags and call `updateDate()`/`updateTime()`. No test covers:

- Date picker callback sets correct year/month/day on `incidentCal`
- Time picker callback sets correct hour/minute/second (second always set to 0) on `incidentCal`
- `updateDate()` formats and sets text correctly when `dateSet=true`; clears when `dateSet=false`
- `updateTime()` formats and sets text correctly when `timeSet=true`; clears when `timeSet=false`

---

### A62-26 — MEDIUM: No test for showEquipmentNameList() dialog pre-selection logic

**File:** `IncidentFragment.java`
**Method:** `showEquipmentNameList()` — lines 62–91
**Severity:** MEDIUM

The dialog pre-selects the item whose name matches the current `equipment_name` TextView text (lines 69–72). If the equipment name displayed does not exactly match any item in the list (e.g., trailing whitespace, truncation), `selectedStr` remains `null` and no item is pre-selected. No test covers this string comparison or the selection callback that sets `equipmentItem`.

---

### A62-27 — LOW: No test for updateDate() / updateTime() null clearing

**File:** `IncidentFragment.java`
**Methods:** `updateDate()` line 250–252; `updateTime()` line 246–248
**Severity:** LOW

Both methods set the text to `null` (not empty string) when the flag is false. Setting a `TextView`'s text to `null` is handled by Android (renders empty), but this behavior depends on the specific Android version and view implementation. No test exercises whether the hint is shown correctly after `setText(null)`.

---

## Summary Table

| ID | Severity | File | Description |
|---|---|---|---|
| A62-1 | HIGH | Project-wide | Zero automated test coverage in app/ and LibCommon/ |
| A62-2 | CRITICAL | EquipmentListFragment | No test for training-expiry enforcement in selectEquipment() |
| A62-3 | HIGH | EquipmentListFragment | No test for getTrainingExpiryDate() matching logic and bypass via null |
| A62-4 | HIGH | EquipmentListFragment | No test for uiUpdateEquipmentList() with equipmentChanged flag |
| A62-5 | MEDIUM | EquipmentListFragment | No test for setRecyclerViewdata() with empty list |
| A62-6 | MEDIUM | EquipmentListFragment | No test for onRightButton() contact-person branch |
| A62-7 | MEDIUM | EquipmentListFragment | No test for goToCurrentEquipmentNext() with out-of-bounds position |
| A62-8 | MEDIUM | EquipmentListFragment | No test for showNext() when activity is null |
| A62-9 | LOW | EquipmentListFragment | Static field getEquipmentResultArray not reset between logical flows |
| A62-10 | CRITICAL | EquipmentPrestartFragment | No test for incomplete checklist bypass in onMiddleButton() |
| A62-11 | CRITICAL | EquipmentPrestartFragment | No test for offline submission advancing past safety gate |
| A62-12 | CRITICAL | EquipmentPrestartFragment | No test for network failure with no offline data leaving user stranded |
| A62-13 | HIGH | EquipmentPrestartFragment | No test for empty question list allowing empty checklist submission |
| A62-14 | HIGH | EquipmentPrestartFragment | No test for setDriverInfoHeader() timezone branching and null equipment |
| A62-15 | HIGH | EquipmentPrestartFragment | No test for getPreStartCheckListInfo() network failure fallback |
| A62-16 | MEDIUM | EquipmentPrestartFragment | No test for onLeftButton() SessionActivity vs default branch |
| A62-17 | MEDIUM | EquipmentPrestartFragment | No test for onRightButton() diagnosis URL construction with null equipment |
| A62-18 | LOW | EquipmentPrestartFragment | Misspelled field qustionItemArrayList uncaught without test coverage |
| A62-19 | HIGH | IncidentFragment | No test for incident data loss on back-press without confirmation |
| A62-20 | HIGH | IncidentFragment | No test for onRightButton() validation guards (null equipment, date, time) |
| A62-21 | HIGH | IncidentFragment | No test for loadEquipment() network failure and local DB fallback |
| A62-22 | HIGH | IncidentFragment | No test for equipmentList caching staleness in showEquipmentNameList() |
| A62-23 | MEDIUM | IncidentFragment | No test for initValue() when running session equipment is null |
| A62-24 | MEDIUM | IncidentFragment | No test for initViews() with pre-existing event_time including malformed value |
| A62-25 | MEDIUM | IncidentFragment | No test for date/time picker callbacks and flag state transitions |
| A62-26 | MEDIUM | IncidentFragment | No test for equipment dialog pre-selection string matching |
| A62-27 | LOW | IncidentFragment | No test for setText(null) behavior in updateDate() / updateTime() |
