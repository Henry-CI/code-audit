# Audit Pass 2 – Test Coverage
## Agent: A61
## Files Assigned
1. `app/src/main/java/au/com/collectiveintelligence/fleetiq360/ui/fragment/DriverStatsFragment3.java`
2. `app/src/main/java/au/com/collectiveintelligence/fleetiq360/ui/fragment/DriverStatsListAdapter.java`
3. `app/src/main/java/au/com/collectiveintelligence/fleetiq360/ui/fragment/EquipmentConnectFragment.java`

---

## Project-Wide Finding: Zero Automated Test Coverage (HIGH)

**A61-1 | HIGH | Project-wide**

The `app/` and `LibCommon/` modules contain no test directories whatsoever. No unit tests (`src/test/`), no instrumentation tests (`src/androidTest/`), and no test resources exist in either module. The only test files found in the entire repository are in third-party image-loading library modules (`LibImageloader`, `LibImagePicker`, `LibPercentProgress`) that are not application code.

This means every class, method, and business-logic path in the application has zero automated test coverage. Regressions cannot be caught by CI; behaviour is verified only by manual testing, which is not systematic and leaves all error paths, edge cases, and state-management bugs undetected until they reach users.

All file-specific findings below are direct consequences of this project-wide gap. They document the specific risk surface that the absence of tests leaves unguarded.

---

## File 1: DriverStatsFragment3.java

### Reading Evidence

**Fully qualified class name:** `au.com.collectiveintelligence.fleetiq360.ui.fragment.DriverStatsFragment3`
**Superclass:** `FleetFragment`

**Fields and constants defined:**

| Name | Type | Line | Notes |
|---|---|---|---|
| `mChart` | `LineChart` | 38 | MPAndroidChart line chart widget |
| `info_layout_1` | `LinearLayout` | 39 | Left column of equipment info cards |
| `info_layout_2` | `LinearLayout` | 39 | Right column of equipment info cards |
| `driverStatsResultArray` | `EquipmentStatsResultArray` | 40 | Cached server response |
| `arrayList` | `ArrayList<EquipmentStatsItem>` | 41 | Public; backing list for info cards |
| `selectedType` | `int` | 50 | 0=weekly, 1=monthly, 2=yearly |
| `mColors` | `static final int[]` | 233–249 | 15-element palette for chart lines |

**Inner classes defined:**

| Name | Kind | Line |
|---|---|---|
| `MyValueFormatter` | `public class implements IValueFormatter` | 316 |
| `MyAxisValueFormatter` | `public static class implements IAxisValueFormatter` | 324 |

**Methods defined:**

| Line | Signature |
|---|---|
| 44 | `public View onCreateView(@NonNull LayoutInflater, ViewGroup, Bundle)` |
| 52 | `public void initViews()` |
| 102 | `private void getUserDetail()` |
| 107 | `private void onWeekView()` |
| 112 | `private void onMonthView()` |
| 117 | `private void onYearView()` |
| 122 | `private void loadData()` |
| 145 | `private void setUserData()` |
| 156 | `private void onData(EquipmentStatsResultArray)` |
| 168 | `private void showInfo()` |
| 206 | `private void showItem(int, EquipmentStatsItem, View)` |
| 214 | `private void initChar()` |
| 251 | `private void clearChartData()` |
| 257 | `private void initChartData(EquipmentStatsResultArray)` |
| 292 | `private ArrayList<String> getColumnLabels(EquipmentStatsResultArray)` |
| 309 | `private MyAxisValueFormatter getXAixsFormatter(EquipmentStatsResultArray)` |
| 318 (inner) | `public String getFormattedValue(float, Entry, int, ViewPortHandler)` — `MyValueFormatter` |
| 328 (inner) | `public String getFormattedValue(float, AxisBase)` — `MyAxisValueFormatter` |

---

### Findings – DriverStatsFragment3

**A61-2 | HIGH | No test file exists for DriverStatsFragment3**

There is no corresponding test file at any path (neither unit nor instrumented) for `DriverStatsFragment3`. Every method listed above is completely untested.

---

**A61-3 | HIGH | `loadData()` API failure path has no test**

`loadData()` (line 122) calls `WebApi.async().getEquipmentStats(...)` and handles the `onFailed(WebResult)` callback at line 138 by calling `showErrDialog(...)`. No test verifies that a network failure causes the error dialog to be shown, that the loading layout is hidden, or that `driverStatsResultArray` remains `null` so a subsequent retry triggers a fresh API call rather than re-using stale (non-existent) data.

---

**A61-4 | MEDIUM | `initChartData()` crashes silently if `equipmentStatsResultArray.arrayList` is null**

`initChartData(EquipmentStatsResultArray)` (line 257) calls `equipmentStatsResultArray.arrayList.size()` at line 260 without a null guard on `arrayList`. The field is nullable (the `EquipmentStatsItem` constructor only initialises `usageList` when the JSON key is present). If the server returns a response object with a null `arrayList`, this throws a `NullPointerException` and crashes the fragment. No test covers this path. (By contrast, `onData()` at line 159 does guard `driverStatsResultArray.arrayList != null` before iterating, making this inconsistency harder to spot.)

---

**A61-5 | MEDIUM | `getColumnLabels()` silently returns an empty list when `resultArray.arrayList` is empty**

`getColumnLabels(EquipmentStatsResultArray)` (line 292) returns an empty `ArrayList` when `resultArray.arrayList.size() == 0`. This causes the X-axis of the chart to render with no labels and a label count of zero. The interaction with `mChart.getXAxis().setLabelCount(0, true)` is untested and may produce a blank or malformed chart axis. No test exercises the empty-data-set rendering path.

---

**A61-6 | MEDIUM | `showInfo()` index arithmetic is untested for odd and even list sizes**

`showInfo()` (line 168) uses the expression `(arrayList.size() + 1) / 2` as the loop bound, then computes paired indices `p1 = 2*i` and `p2 = 2*i + 1`. For an odd-length list the final iteration correctly accesses `p1` but skips `p2 < arrayList.size()`. For an even-length list both are accessed. No test verifies either the single-item, odd-count, or even-count cases, nor that `info_layout_1` and `info_layout_2` receive the correct views.

---

**A61-7 | MEDIUM | `loadData()` caching logic is untested**

`loadData()` (line 122) short-circuits and calls `onData(driverStatsResultArray)` immediately when `driverStatsResultArray != null` (line 123–125). The period view switchers (`onWeekView`, `onMonthView`, `onYearView`) each null `driverStatsResultArray` before calling `loadData()`, which is the mechanism that forces a fresh fetch. No test verifies that switching between period types correctly invalidates the cache, nor that re-selecting the same period does not trigger an unnecessary API call.

---

**A61-8 | LOW | `MyAxisValueFormatter.getFormattedValue()` boundary guard is untested**

`MyAxisValueFormatter.getFormattedValue(float, AxisBase)` (line 328) uses `Math.round(value)` to convert the float index, then returns `"-"` for out-of-bounds indices. No test verifies behaviour when `value` is negative, when `value` rounds to exactly `labelList.size()`, or when `labelList` is empty. These are the exact boundary conditions that a chart axis produces when data is sparse.

---

**A61-9 | LOW | `setUserData()` does not guard against `null` from `user.getLicenseNumber()`**

`setUserData()` (line 145) calls `user.getLicenseNumber() != null ? user.getLicenseNumber() : ""` (line 152), which correctly handles null. However, `user.getEmail()` (line 150) and `user.isContactPerson()` (line 151) are called unconditionally even though `user` itself is guarded by `if (user != null)` at line 149. This guard is redundant with `CurrentUser.get()` being called directly on line 146 outside the null check, meaning `setUserData()` would NPE at line 146 if `CurrentUser.get()` ever returns null. No test exercises the null-user path.

---

**A61-10 | INFO | `arrayList` is public with no access control**

`arrayList` (line 41) is `public`, allowing external code to add, remove, or clear entries without notifying the chart or the info layouts. Exposing mutable fragment state breaks the single-source-of-truth principle and can cause the displayed chart to diverge from the displayed info cards. No test guards against external mutation.

---

## File 2: DriverStatsListAdapter.java

### Reading Evidence

**Fully qualified class name:** `au.com.collectiveintelligence.fleetiq360.ui.fragment.DriverStatsListAdapter`
**Superclass:** `ArrayAdapter<DriverStatsItem>`

**Fields and constants defined:**

| Name | Type | Line | Notes |
|---|---|---|---|
| `context` | `Context` | 20 | Stored context (package-private visibility) |
| `mData` | `ArrayList<DriverStatsItem>` | 21 | Backing list |
| `JOYFUL_COLORS` | `static final int[]` | 30–37 | 6-element palette; note: `colors` uses 8 entries total after `initColors()` |
| `colors` | `ArrayList<Integer>` | 39 | Dynamic color list built in `initColors()` |
| `maxValue` | `float` | 48 | Initialised to `-1.0f`; tracks maximum `value` field across items |

**Inner classes defined:**

| Name | Kind | Line |
|---|---|---|
| `ListHolder` | `static class` | 133 | View-holder pattern with 5 fields |

**Methods defined:**

| Line | Signature |
|---|---|
| 23 | `DriverStatsListAdapter(Context, ArrayList<DriverStatsItem>)` |
| 41 | `private void initColors()` |
| 50 | `private void initData()` |
| 61 | `private float getItemRatio(DriverStatsItem)` |
| 70 | `private int getColor(int)` |
| 76 | `public View getView(int, View, @NonNull ViewGroup)` |
| 123 | `public int getCount()` |
| 128 | `public DriverStatsItem getItem(int)` |

---

### Findings – DriverStatsListAdapter

**A61-11 | HIGH | No test file exists for DriverStatsListAdapter**

There is no corresponding test file. Every method is completely untested.

---

**A61-12 | HIGH | `initData()` is called inside `getView()` on every cell recycle, re-scanning the entire list each time**

`getView()` (line 76) calls `initData()` at line 78 unconditionally before binding any data. `initData()` iterates over the entire `mData` list to recompute `maxValue`. For a list of N items, rendering all N rows costs O(N²) work. This is never caught in testing because ListView/RecyclerView recycling behaviour requires an instrumented environment. Beyond the performance issue, `initData()` also calls `initColors()`, which appends to the `colors` list each time `getView()` is called. After N rows are rendered, `colors` contains `2 + 6*N` entries rather than 8, and `getColor()` produces wrong results via modulo arithmetic against the inflated list. No test verifies that colours are stable across recycling or that `maxValue` is not recomputed redundantly.

---

**A61-13 | HIGH | `initColors()` appends to `colors` every call rather than clearing first — produces unbounded list growth and wrong colour cycling**

`initColors()` (line 41) calls `colors.add(...)` eight times unconditionally. The `colors` field is initialised as a new empty `ArrayList` at the field declaration (line 39), which is evaluated once at construction time. However, because `initData()` calls `initColors()` and `initData()` is called from `getView()` on every recycle, each call to `getView()` appends 8 more entries to `colors`. After N `getView()` calls, `colors.size()` is `8*N` and `getColor(position)` returns `colors.get(position % (8*N))`, which is always `colors.get(position)` for the first `8*N` positions — breaking the intended 8-colour cycle. No test covers this.

---

**A61-14 | MEDIUM | `getItemRatio()` returns `0.0f` when `maxValue` is negative (all-zero data set)**

`getItemRatio(DriverStatsItem)` (line 61) guards on `maxValue > 0.0f`. `maxValue` is initialised to `-1.0f` (line 48) and is never reset between `initData()` calls. If `mData` is empty, or all items have `value == "0"` or negative float values, `maxValue` remains `-1.0f` and `getItemRatio` always returns `0.0f`. In `getView()` this triggers the `ratio < 0.01f` floor (line 113), causing every bar to render at the minimum width — a correct fallback, but one that has never been tested against the empty-list or all-zero-data edge case.

---

**A61-15 | MEDIUM | `Float.valueOf(item.value)` in `initData()` is not guarded against parse failure**

`initData()` (line 50) calls `Float.valueOf(item.value)` at line 54 inside a null guard (`if (v != null)`) that can never be true for primitive boxing from `Float.valueOf(String)`: if the string is unparseable, `Float.valueOf` throws `NumberFormatException` rather than returning null. The identical pattern in `getView()` at line 104 correctly uses a `try/catch (Exception ignored)`, but `initData()` does not. A malformed `value` field in any `DriverStatsItem` will crash the adapter construction and crash the list. No test covers this.

---

**A61-16 | MEDIUM | `getItem(int)` does not guard against out-of-bounds access**

`getItem(int i)` (line 128) calls `mData.get(i)` directly without bounds checking, and `getCount()` (line 123) returns `mData.size()`. If `mData` is modified concurrently from another thread (e.g., data refresh triggered by a background API call), the list can be accessed at an index that has been removed, throwing `IndexOutOfBoundsException`. No test covers concurrent modification or list shrinkage between `getCount()` and `getItem()`.

---

**A61-17 | LOW | `context` field retains an `Activity` reference throughout adapter lifetime**

`context` is assigned in the constructor (line 26) and never nulled. `getView()` casts `context` to `Activity` at line 83. If the adapter outlives the activity (e.g., retained across a configuration change), the cast will succeed but the inflater will reference a destroyed activity. No test verifies adapter lifecycle with respect to the owning activity.

---

## File 3: EquipmentConnectFragment.java

### Reading Evidence

**Fully qualified class name:** `au.com.collectiveintelligence.fleetiq360.ui.fragment.EquipmentConnectFragment`
**Superclass:** `FleetFragment`

**Fields and constants defined:**

| Name | Type | Line | Notes |
|---|---|---|---|
| `loadingIV` | `ImageView` | 36 | Animation frame display |
| `connecting_text` | `View` | 37 | Text shown while connecting |
| `activity` | `Activity` | 38 | Package-private; set in `onActivityCreated` |
| `loadingResIds` | `int[]` | 40–42 | 15 animation frame drawable IDs |
| `autoConnect` | `public boolean` | 44 | Triggers immediate connect on `initViews()` |
| `myHandler` | `Handler` | 45 | UI-thread handler for animation ticks |
| `operationFinished` | `private static boolean` | 46 | **Static** — shared across all instances |
| `operationSucceeded` | `private static boolean` | 47 | **Static** — shared across all instances |
| `permissionNotGranted` | `private static boolean` | 48 | **Static** — shared across all instances; initialised `true` |
| `runTime` | `private static int` | 49 | **Static** — shared across all instances |
| `connect_button` | `View` | 101 | Connect action button |
| `abort_button` | `View` | 102 | Abort action button |
| `stoppingSession` | `private boolean` | 206 | Guards animation runnable from re-entry |
| `REQUEST_ENABLE_BT` | `private int` | 207 | Activity result code for BT enable intent |
| `runnableAfterPermission` | `private Runnable` | 284 | Set in `startConnect()` |
| `updateTimerMethod` | `private Runnable` | 65 | Animation tick runnable |

**Methods defined:**

| Line | Signature |
|---|---|
| 51 | `private void startAnimationThread()` |
| 55 | `private void stopTimer()` |
| 59 | `public void onDestroy()` |
| 65 | `private Runnable updateTimerMethod` (anonymous Runnable field) |
| 83 | `public View onCreateView(@NonNull LayoutInflater, @Nullable ViewGroup, @Nullable Bundle)` |
| 91 | `public void onActivityCreated(Bundle)` |
| 104 | `public void initViews()` |
| 132 | `private void stopConnection()` |
| 138 | `private void enableButton(boolean)` |
| 147 | `private void setInfo()` |
| 157 | `private void onOperationDone()` |
| 169 | `public void onResume()` |
| 179 | `private void startWorkHandler()` |
| 189 | `private void startConnect()` |
| 201 | `private void showNext()` |
| 210 | `public void onActivityResult(int, int, Intent)` |
| 217 | `private void onConnectSucceed()` |
| 223 | `private void onConnectFailed()` |
| 236 | `private void onAbort()` |
| 242 | `private void connectEquipment(EquipmentItem)` |

---

### Findings – EquipmentConnectFragment

**A61-18 | HIGH | No test file exists for EquipmentConnectFragment**

There is no corresponding test file. Every method is completely untested.

---

**A61-19 | HIGH | Static BLE connection flags survive operator sessions — no cleanup tested**

`operationFinished`, `operationSucceeded`, `permissionNotGranted`, and `runTime` are all declared `private static` (lines 46–49). Because they are static, they are class-level state shared across every instance of `EquipmentConnectFragment` created during the process lifetime. When a session ends and a new operator starts a new session, a fresh `EquipmentConnectFragment` is instantiated, but these fields retain the values left by the previous instance.

Concrete consequences, none of which are tested:
- If the previous session succeeded (`operationSucceeded = true`), `onResume()` (line 172) immediately calls `showNext()` for the new operator without waiting for the BLE connection to actually establish, bypassing the entire connect flow.
- If the previous session failed (`operationFinished = true`, `operationSucceeded = false`), `onResume()` calls `onConnectFailed()` immediately on the new operator's first resume, showing an error dialog before any connection is attempted.
- `permissionNotGranted` is initialised `true` at the class level (line 48) but is set to `false` only on certain error paths (line 275). After a successful session it is never reset to `true`, so if BLE permissions are actually missing in a subsequent session, the fragment displays the wrong error message ("Failed to connect" instead of "Since location access has not been granted...").
- `runTime` leaking between sessions causes the animation to begin at a non-zero frame on the second session.

The commented-out reset at `FleetFragment.java:274` (`//permissionNotGranted = true;`) suggests this was a known concern that was never resolved.

---

**A61-20 | HIGH | BLE connection timeout path has no test**

`connectEquipment()` (line 242) calls `BleController.instance().startConnect(...)`. `BleController` defines `CONNECT_PERIOD = 30*1000` ms and `SCAN_TIMEOUT = 10*1000` ms as timeout values. When neither `onSucceed()` nor `onFailed()` is called by the `EquipmentListener` within the timeout period (e.g., the remote device stops advertising mid-scan, or the GATT connection stalls), the `updateTimerMethod` runnable continues ticking indefinitely — `runTime` increments forever and the animation loops. There is no timeout detection in `EquipmentConnectFragment` itself: the fragment never calls a watchdog, never posts a timeout `Runnable`, and never disables the connect UI after a maximum wait. No test covers this scenario.

---

**A61-21 | HIGH | BLE connection failure path for `EQUIPMENT_CONNECT_CODE_BLE_NOT_ON` diverges into an unguarded `onActivityResult` flow**

When BLE is off, `connectEquipment()` fires an `ACTION_REQUEST_ENABLE` intent at line 273 and relies on `onActivityResult()` (line 210) to call `connectEquipment(MyCommonValue.currentEquipmentItem)` again. This path has two untested gaps:
1. If the user denies the BT-enable dialog (`resultCode != Activity.RESULT_OK`), `onActivityResult()` falls through with no handler, leaving the UI in the "connecting" state with the abort button enabled but no operation in progress and `operationFinished` still `false`. The user cannot retry without pressing Abort.
2. `connectEquipment()` is called with `MyCommonValue.currentEquipmentItem` from `onActivityResult()` rather than the equipment item stored in the fragment's original `startConnect()` closure. If `MyCommonValue.currentEquipmentItem` has been changed between the initial call and the BT-enable result (e.g., session state was modified in the background), a different device is connected than the one shown in the UI.

---

**A61-22 | MEDIUM | `onConnectFailed()` calls `onAbort()` unconditionally on dialog dismiss, even if the user did not cancel**

`onConnectFailed()` (line 223) presents an error dialog and on dismiss calls `onAbort()` (line 230–233). `onAbort()` (line 236) calls `((SessionActivity) getBaseActivity()).abortSession(sessionResult)`, which terminates the session. The user is given no choice to retry from within the dialog — dismiss always aborts. This is a UX design issue, but also a correctness issue: if the fragment was in a state where the user pressed "Abort" (`stopConnection()` sets `operationFinished = true`), `onResume()` at line 174 will call `onConnectFailed()` again when the fragment resumes (e.g., after the BT system dialog). No test exercises this double-abort path.

---

**A61-23 | MEDIUM | `setInfo()` calls `WebData.instance().getSessionResult()` without null guard**

`setInfo()` (line 147) calls `WebData.instance().getSessionResult().start_time` (line 148). If `getSessionResult()` returns null (no active session, or session not yet committed to `WebData`), this is an immediate NPE that crashes the fragment. Similarly, `onAbort()` at line 237 calls `WebData.instance().getSessionResult()` and guards with `if(sessionResult != null)`, which is the correct pattern — but `setInfo()` does not apply the same guard. No test covers the null-session-result case for `setInfo()`.

---

**A61-24 | MEDIUM | `connectEquipment()` resets `BleController.ble_status` to `STATUS_IDLE` directly before calling `startConnect()`**

`connectEquipment()` (line 242) assigns `BleController.instance().ble_status = STATUS_IDLE` directly before calling `startConnect()`. `BleController.startConnect()` guards against a busy controller by checking `ble_status != STATUS_IDLE` at line 532 and firing `onFailed(EQUIPMENT_CONNECT_CODE_BUSY)`. By forcefully resetting the status field from outside the controller, `EquipmentConnectFragment` bypasses this guard and can start a second BLE scan while a previous one is still running internally in `BleController`. This is a data-race risk in a multi-threaded BLE environment. No test covers concurrent connection attempts or the forced-reset path.

---

**A61-25 | MEDIUM | Animation runnable accesses `loadingIV` after `onDestroy()` if `stopTimer()` races with the posted delay**

`stopTimer()` (line 55) calls `myHandler.removeCallbacks(updateTimerMethod)`, which removes pending callbacks but does not cancel a callback already past the scheduler's removal point. If the 160ms delay fires between `onDestroy()` being called and `stopTimer()` removing the callback, `updateTimerMethod.run()` executes and accesses `loadingIV` on a destroyed fragment. The `stoppingSession` guard at line 67 returns early only if `stoppingSession` is true — but `stoppingSession` is set nowhere in the destroy path. No test covers this race.

---

**A61-26 | LOW | `REQUEST_ENABLE_BT` is an instance field rather than a constant, allowing it to be overwritten**

`REQUEST_ENABLE_BT` (line 207) is declared `private int` rather than `private static final int`. While nothing in the class modifies it, it is not final, so a subclass or reflective caller could overwrite it, causing `onActivityResult()` to fail to match the expected request code. No test verifies that the request code round-trips correctly through `startActivityForResult` / `onActivityResult`.

---

**A61-27 | LOW | `onActivityCreated()` casts `getActivity()` to `SessionActivity` without checking**

`onActivityCreated()` (line 91) calls `((SessionActivity) Objects.requireNonNull(activity)).connectingDevice = true`. If this fragment is attached to any activity other than `SessionActivity` (e.g., during a refactor or navigation change), this throws `ClassCastException`. Similarly `showNext()` (line 202) casts `activity` to `SessionActivity`. Neither cast is tested.

---

**A61-28 | INFO | `autoConnect` is a public field with no documentation of its expected lifecycle**

`autoConnect` (line 44) is `public boolean`, set externally before `initViews()` is called. If it is set after `initViews()` has already run (e.g., due to asynchronous Fragment argument handling), it has no effect. The field is never reset after the auto-connect flow completes, so if the fragment is re-used, it will auto-connect again on the next `initViews()` call without the caller's intent. No test covers the timing of `autoConnect` assignment relative to `initViews()`.

---

## Summary Table

| ID | Severity | File | Description |
|---|---|---|---|
| A61-1 | HIGH | Project-wide | Zero automated test coverage in `app/` and `LibCommon/` modules |
| A61-2 | HIGH | DriverStatsFragment3 | No test file exists |
| A61-3 | HIGH | DriverStatsFragment3 | `loadData()` API failure path untested |
| A61-4 | MEDIUM | DriverStatsFragment3 | `initChartData()` NPE when `arrayList` is null |
| A61-5 | MEDIUM | DriverStatsFragment3 | `getColumnLabels()` empty-list path produces blank chart axis |
| A61-6 | MEDIUM | DriverStatsFragment3 | `showInfo()` index arithmetic untested for odd/even sizes |
| A61-7 | MEDIUM | DriverStatsFragment3 | Period-switch cache invalidation logic untested |
| A61-8 | LOW | DriverStatsFragment3 | `MyAxisValueFormatter` boundary guard untested |
| A61-9 | LOW | DriverStatsFragment3 | `setUserData()` NPE if `CurrentUser.get()` returns null |
| A61-10 | INFO | DriverStatsFragment3 | `arrayList` is public and mutable by external callers |
| A61-11 | HIGH | DriverStatsListAdapter | No test file exists |
| A61-12 | HIGH | DriverStatsListAdapter | `initData()` called in `getView()` produces O(N²) scan and corrupts `colors` list |
| A61-13 | HIGH | DriverStatsListAdapter | `initColors()` appends without clearing — unbounded list growth, wrong colour cycling |
| A61-14 | MEDIUM | DriverStatsListAdapter | `getItemRatio()` returns 0 for all-zero or empty data, not tested |
| A61-15 | MEDIUM | DriverStatsListAdapter | `Float.valueOf()` in `initData()` throws `NumberFormatException` on bad input |
| A61-16 | MEDIUM | DriverStatsListAdapter | `getItem()` not guarded against concurrent list modification |
| A61-17 | LOW | DriverStatsListAdapter | `context` retains `Activity` reference beyond activity lifetime |
| A61-18 | HIGH | EquipmentConnectFragment | No test file exists |
| A61-19 | HIGH | EquipmentConnectFragment | Static BLE flags survive operator sessions — stale state on new session |
| A61-20 | HIGH | EquipmentConnectFragment | BLE connection timeout path has no test; animation loops indefinitely |
| A61-21 | HIGH | EquipmentConnectFragment | BT-enable denial leaves UI stuck; `onActivityResult` uses potentially stale equipment item |
| A61-22 | MEDIUM | EquipmentConnectFragment | `onConnectFailed()` dialog dismiss always aborts session; double-abort path untested |
| A61-23 | MEDIUM | EquipmentConnectFragment | `setInfo()` NPE if `getSessionResult()` returns null |
| A61-24 | MEDIUM | EquipmentConnectFragment | Force-reset of `BleController.ble_status` bypasses busy guard; data-race risk |
| A61-25 | MEDIUM | EquipmentConnectFragment | Animation `Runnable` can access destroyed `loadingIV` after `onDestroy()` |
| A61-26 | LOW | EquipmentConnectFragment | `REQUEST_ENABLE_BT` is a mutable instance field rather than a constant |
| A61-27 | LOW | EquipmentConnectFragment | `SessionActivity` casts not guarded; `ClassCastException` if fragment re-hosted |
| A61-28 | INFO | EquipmentConnectFragment | `autoConnect` public field has no documented lifecycle contract |
