# Audit Pass 2 — Agent A36
**Audit run:** 2026-02-26-01
**Agent:** A36
**Files assigned:**
1. `app/src/main/java/au/com/collectiveintelligence/fleetiq360/WebService/webserviceclasses/results/EquipmentTypeResultArray.java`
2. `app/src/main/java/au/com/collectiveintelligence/fleetiq360/WebService/webserviceclasses/results/FuelTypeResultArray.java`
3. `app/src/main/java/au/com/collectiveintelligence/fleetiq360/WebService/webserviceclasses/results/GetCompanyResultArray.java`

---

## PROJECT-WIDE FINDING

### A36-1 — HIGH: Zero automated test coverage across app/ and LibCommon/ modules

**Severity:** HIGH

The `app/` module and `LibCommon/` module contain no `test/` or `androidTest/` source directories at all. The only test code found in the repository lives in three third-party library modules (`LibImageloader`, `LibImagePicker`, `LibPercentProgress`) and covers only those libraries' own internals. No unit tests, no instrumented tests, and no integration tests exist for any application code. Every class assigned to this agent — along with the entire web service layer, UI layer, and data layer — has zero automated test coverage.

All findings below describe specific gaps within this broader context of total absence of test coverage.

---

## Reading Evidence

### File 1: EquipmentTypeResultArray.java

**Fully qualified class name:**
`au.com.collectiveintelligence.fleetiq360.WebService.webserviceclasses.results.EquipmentTypeResultArray`

**Superclass:** `WebServiceResultPacket` (which extends `WebServicePacket`) — implements `Serializable`

**Fields defined:**
- Line 14: `public ArrayList<EquipmentTypeItem> arrayList`

**Methods defined:**
| Line | Signature |
|------|-----------|
| 16   | `public EquipmentTypeResultArray()` — no-arg constructor |
| 19   | `public EquipmentTypeResultArray(JSONArray jsonArray) throws JSONException` — parsing constructor |

**Constants defined:** None

**Item class parsed:** `EquipmentTypeItem` (fields: `int id`, `String name`, `String url`)

---

### File 2: FuelTypeResultArray.java

**Fully qualified class name:**
`au.com.collectiveintelligence.fleetiq360.WebService.webserviceclasses.results.FuelTypeResultArray`

**Superclass:** `WebServiceResultPacket` — implements `Serializable`

**Fields defined:**
- Line 14: `public ArrayList<FuelTypeItem> arrayList`

**Methods defined:**
| Line | Signature |
|------|-----------|
| 16   | `public FuelTypeResultArray()` — no-arg constructor |
| 19   | `public FuelTypeResultArray(JSONArray jsonArray) throws JSONException` — parsing constructor |

**Constants defined:** None

**Item class parsed:** `FuelTypeItem` (fields: `int id`, `String name`)

---

### File 3: GetCompanyResultArray.java

**Fully qualified class name:**
`au.com.collectiveintelligence.fleetiq360.WebService.webserviceclasses.results.GetCompanyResultArray`

**Superclass:** `WebServiceResultPacket` — implements `Serializable`

**Fields defined:**
- Line 14: `public ArrayList<CompanyItem> arrayList`

**Methods defined:**
| Line | Signature |
|------|-----------|
| 16   | `public GetCompanyResultArray()` — no-arg constructor |
| 19   | `public GetCompanyResultArray(JSONArray jsonArray) throws JSONException` — parsing constructor |

**Constants defined:** None

**Item class parsed:** `CompanyItem` (fields: `int id`, `String name`, `String email`, `String password`, `ArrayList<RoleItem> arrRoles`, `PermissionItem permission`)

**Note on CompanyItem:** `CompanyItem` carries a `password` field that is deserialized directly from JSON and stored in a plain `String`. This field participates in `Serializable` serialization. This is noted here because it is directly relevant to what a test of `GetCompanyResultArray` would exercise.

---

## Findings

### A36-2 — MEDIUM: No test for `EquipmentTypeResultArray(JSONArray)` — null array input path

**File:** `EquipmentTypeResultArray.java`, line 19
**Severity:** MEDIUM

The parsing constructor checks `if (jsonArray != null)` at line 23. When `jsonArray` is null the constructor silently produces an instance with an empty (not null) `arrayList`. No test verifies:
- That passing `null` does not throw.
- That the resulting `arrayList` is non-null and empty rather than null.

Callers that rely on a non-null `arrayList` in the null-input case have no test guarantee that this contract holds. If the null-guard is removed or the initialization of `arrayList` is moved inside the guard, callers would receive a NullPointerException with no test to catch the regression.

---

### A36-3 — MEDIUM: No test for `EquipmentTypeResultArray(JSONArray)` — empty array input path

**File:** `EquipmentTypeResultArray.java`, line 19
**Severity:** MEDIUM

No test passes a zero-length `JSONArray` to the parsing constructor. The loop body at line 26 is never exercised in this case; a test verifying that an empty array produces a non-null, zero-size `arrayList` does not exist. The distinction between "null server response" and "server returned an empty list" is meaningful to callers (e.g., `AddEquipmentFragment` consuming `EquipmentTypeResultArray`) and must be contractually verified.

---

### A36-4 — MEDIUM: No test for `EquipmentTypeResultArray(JSONArray)` — malformed entry propagation

**File:** `EquipmentTypeResultArray.java`, line 26
**Severity:** MEDIUM

The loop calls `jsonArray.getJSONObject(i)` and passes the result directly to `new EquipmentTypeItem(...)`, which calls `jsonObject.getInt("id")`, `jsonObject.getString("name")`, and `jsonObject.getString("url")`. If any array element is not a JSON object (e.g., it is a JSON primitive or a JSON null element) `getJSONObject(i)` throws `JSONException`. The `throws JSONException` declaration propagates this to callers with no in-class handling. No test confirms the exact exception type or message that callers should expect, nor that partial-parse state (items added before the bad entry) is handled correctly.

---

### A36-5 — LOW: No test for `EquipmentTypeResultArray()` — no-arg constructor

**File:** `EquipmentTypeResultArray.java`, line 16
**Severity:** LOW

The no-arg constructor leaves `arrayList` null (it is not initialized in the field declaration or in the constructor body). Any caller that constructs an instance via the no-arg constructor and then accesses `arrayList` without a null check will receive a `NullPointerException`. No test verifies the post-construction state of `arrayList` for this constructor path.

---

### A36-6 — MEDIUM: No test for `FuelTypeResultArray(JSONArray)` — null array input path

**File:** `FuelTypeResultArray.java`, line 19
**Severity:** MEDIUM

Identical structural issue to A36-2. The null guard at line 23 leaves `arrayList` initialized but empty when `null` is passed. No test covers this path. `FuelTypeResultArray` is consumed via `WebApi.getFuelType()` which depends on this contract.

---

### A36-7 — MEDIUM: No test for `FuelTypeResultArray(JSONArray)` — empty array input path

**File:** `FuelTypeResultArray.java`, line 19
**Severity:** MEDIUM

Identical structural issue to A36-3. Zero-length `JSONArray` input is not tested. A fuel type list of zero entries is a valid server response (e.g., for an equipment type with no supported fuels) and callers must be able to rely on an empty, non-null `arrayList` in this case.

---

### A36-8 — MEDIUM: No test for `FuelTypeResultArray(JSONArray)` — malformed entry propagation

**File:** `FuelTypeResultArray.java`, line 26
**Severity:** MEDIUM

Identical structural issue to A36-4. `getJSONObject(i)` on a non-object element throws `JSONException`. No test confirms exception propagation semantics or partial-parse behaviour for a malformed `FuelTypeItem` entry.

---

### A36-9 — LOW: No test for `FuelTypeResultArray()` — no-arg constructor

**File:** `FuelTypeResultArray.java`, line 16
**Severity:** LOW

Identical structural issue to A36-5. No-arg constructor leaves `arrayList` null. No test covers post-construction state.

---

### A36-10 — MEDIUM: No test for `GetCompanyResultArray(JSONArray)` — null array input path

**File:** `GetCompanyResultArray.java`, line 19
**Severity:** MEDIUM

Identical structural issue to A36-2/A36-6. The null guard at line 23 leaves `arrayList` initialized but empty for a null input. Additionally, `GetCompanyResultArray` is the only one of the three array classes that does not appear to be referenced in `WebApi.java` — it is defined but has no confirmed live caller in the current codebase. This increases the risk of undetected breakage in the absence of tests.

---

### A36-11 — MEDIUM: No test for `GetCompanyResultArray(JSONArray)` — empty array input path

**File:** `GetCompanyResultArray.java`, line 19
**Severity:** MEDIUM

Identical structural issue to A36-3/A36-7. Zero-length `JSONArray` is not tested. The "no companies found" path is a meaningful server response and the contract must be verified.

---

### A36-12 — MEDIUM: No test for `GetCompanyResultArray(JSONArray)` — malformed entry propagation

**File:** `GetCompanyResultArray.java`, line 26
**Severity:** MEDIUM

Identical structural issue to A36-4/A36-8. `getJSONObject(i)` on a non-object element throws `JSONException`. `CompanyItem`'s parsing constructor additionally iterates a nested `arrRoles` JSONArray and constructs a `PermissionItem`. A malformed nested `arrRoles` entry or a malformed `permission` object would also propagate `JSONException` up through `GetCompanyResultArray`. None of these propagation paths are tested.

---

### A36-13 — LOW: No test for `GetCompanyResultArray()` — no-arg constructor

**File:** `GetCompanyResultArray.java`, line 16
**Severity:** LOW

Identical structural issue to A36-5/A36-9. No-arg constructor leaves `arrayList` null. No test covers post-construction state.

---

### A36-14 — INFO: `GetCompanyResultArray` is not referenced by any confirmed live caller

**File:** `GetCompanyResultArray.java`
**Severity:** INFO

A search across all `app/` Java source files finds no reference to `GetCompanyResultArray` outside its own source file. The class is defined but does not appear to be wired into `WebApi` or any UI class. It is either dead code, or it is instantiated via reflection/Gson deserialization in a way that is not statically visible. If it is dead code it should be removed; if it is instantiated by a generic deserializer, that deserialization path is itself untested. A test would also serve to verify that the class is reachable.

---

### A36-15 — INFO: All three result array classes share identical structural pattern — a single shared test fixture would cover all

**File:** All three files
**Severity:** INFO

`EquipmentTypeResultArray`, `FuelTypeResultArray`, and `GetCompanyResultArray` are structurally identical: each wraps an `ArrayList`, each has a no-arg constructor and a single `JSONArray` parsing constructor, and each applies the same null guard pattern. A parameterized JUnit test or a shared abstract test base could provide consistent coverage for all three with minimal duplication. This is an opportunity to reduce the cost of establishing coverage.

---

## Summary Table

| ID     | File                          | Severity | Description |
|--------|-------------------------------|----------|-------------|
| A36-1  | Project-wide                  | HIGH     | Zero automated test coverage in app/ and LibCommon/ modules |
| A36-2  | EquipmentTypeResultArray.java | MEDIUM   | No test: parsing constructor, null JSONArray input |
| A36-3  | EquipmentTypeResultArray.java | MEDIUM   | No test: parsing constructor, empty JSONArray input |
| A36-4  | EquipmentTypeResultArray.java | MEDIUM   | No test: parsing constructor, malformed array entry / JSONException propagation |
| A36-5  | EquipmentTypeResultArray.java | LOW      | No test: no-arg constructor leaves arrayList null |
| A36-6  | FuelTypeResultArray.java      | MEDIUM   | No test: parsing constructor, null JSONArray input |
| A36-7  | FuelTypeResultArray.java      | MEDIUM   | No test: parsing constructor, empty JSONArray input |
| A36-8  | FuelTypeResultArray.java      | MEDIUM   | No test: parsing constructor, malformed array entry / JSONException propagation |
| A36-9  | FuelTypeResultArray.java      | LOW      | No test: no-arg constructor leaves arrayList null |
| A36-10 | GetCompanyResultArray.java    | MEDIUM   | No test: parsing constructor, null JSONArray input |
| A36-11 | GetCompanyResultArray.java    | MEDIUM   | No test: parsing constructor, empty JSONArray input |
| A36-12 | GetCompanyResultArray.java    | MEDIUM   | No test: parsing constructor, malformed entry / nested JSONException propagation |
| A36-13 | GetCompanyResultArray.java    | LOW      | No test: no-arg constructor leaves arrayList null |
| A36-14 | GetCompanyResultArray.java    | INFO     | Class has no confirmed live caller — possible dead code or opaque deserialization |
| A36-15 | All three files               | INFO     | Shared structural pattern is suited to a single parameterized test fixture |
