# Pass 2 Test Coverage Audit — forkliftiqapp
**Agent ID:** A28
**Date:** 2026-02-27
**Audit Run:** 2026-02-26-01
**Stack:** Android/Java

---

## PROJECT-WIDE FINDING — No Automated Test Coverage (HIGH)

**Finding A28-1 | HIGH**

The `app/` and `LibCommon/` modules contain no test directories whatsoever. A search of the repository confirms:

- `app/src/` contains only a `main/` subdirectory — no `test/` or `androidTest/` subtree exists.
- `LibCommon/src/` likewise contains only `main/` — no test subtree.
- The only test directories present in the repository belong to unrelated library modules: `LibImageloader/src/test`, `LibImagePicker/src/androidTest`, and `LibPercentProgress/src/androidTest`.

There is zero automated test coverage (unit or instrumentation) for all application code and common library code. Every class analysed in this audit, and every class across the entire `app/` module, is untested. All findings in this report are therefore consequences of a project-wide absence of test infrastructure, not isolated gaps.

**Risk:** Regressions in authentication, web-service parsing, and session handling are undetectable without manual testing. The packet-parsing hierarchy analysed below sits at the boundary between network input and application state, making it the highest-value area for test investment.

---

## Assigned Files

1. `app/src/main/java/au/com/collectiveintelligence/fleetiq360/WebService/webserviceclasses/WebServicePacket.java`
2. `app/src/main/java/au/com/collectiveintelligence/fleetiq360/WebService/webserviceclasses/WebServiceParameterPacket.java`
3. `app/src/main/java/au/com/collectiveintelligence/fleetiq360/WebService/webserviceclasses/WebServiceResultPacket.java`

---

## Reading Evidence

### File 1: WebServicePacket.java

**Fully qualified class name:**
`au.com.collectiveintelligence.fleetiq360.WebService.webserviceclasses.WebServicePacket`

**Package:** `au.com.collectiveintelligence.fleetiq360.WebService.webserviceclasses`

**Extends / Implements:** `implements java.io.Serializable`

**Imports:**
- `org.json.JSONException`
- `org.json.JSONObject`
- `java.io.Serializable`

**Fields / Constants:** None declared.

**Methods:**

| Line | Signature |
|------|-----------|
| 9 | `public WebServicePacket()` |
| 12 | `public WebServicePacket(JSONObject jsonObject) throws JSONException` |

**Method body detail:**

- `WebServicePacket()` (line 9–10): Default no-arg constructor. Empty body.
- `WebServicePacket(JSONObject jsonObject)` (line 12–17): Accepts a `JSONObject`. Contains a null-guard (`if (jsonObject != null)`) but the body of that guard is completely empty — no fields are parsed, no state is set. The `throws JSONException` declaration is present but can never be thrown by this body.

**No Activities, Fragments, Services, BroadcastReceivers, or ContentProviders.**

---

### File 2: WebServiceParameterPacket.java

**Fully qualified class name:**
`au.com.collectiveintelligence.fleetiq360.WebService.webserviceclasses.WebServiceParameterPacket`

**Package:** `au.com.collectiveintelligence.fleetiq360.WebService.webserviceclasses`

**Extends / Implements:**
- `extends WebServicePacket`
- `implements java.io.Serializable` (also inherited via superclass)

**Imports:**
- `org.json.JSONException`
- `org.json.JSONObject`
- `java.io.Serializable`
- `org.json.JSONArray`
- `java.util.ArrayList`
- `java.math.BigDecimal`
- `au.com.collectiveintelligence.fleetiq360.WebService.webserviceclasses.*` (wildcard — redundant, same package)
- `au.com.collectiveintelligence.fleetiq360.WebService.webserviceclasses.results.*` (wildcard)

**Fields / Constants:** None declared.

**Methods:**

| Line | Signature |
|------|-----------|
| 15 | `public WebServiceParameterPacket()` |
| 18 | `public WebServiceParameterPacket(JSONObject jsonObject) throws JSONException` |

**Method body detail:**

- `WebServiceParameterPacket()` (line 15–16): Default no-arg constructor. Empty body.
- `WebServiceParameterPacket(JSONObject jsonObject)` (line 18–25): Calls `super(jsonObject)`. Contains a null-guard (`if (jsonObject != null)`) but the body of that guard is completely empty — no fields are parsed, no state is set. The `throws JSONException` declaration is present but can never be thrown by this body.

**Note:** Imports for `JSONArray`, `ArrayList`, `BigDecimal`, and the wildcard `results.*` import are entirely unused. No fields or logic use these types.

**No Activities, Fragments, Services, BroadcastReceivers, or ContentProviders.**

---

### File 3: WebServiceResultPacket.java

**Fully qualified class name:**
`au.com.collectiveintelligence.fleetiq360.WebService.webserviceclasses.WebServiceResultPacket`

**Package:** `au.com.collectiveintelligence.fleetiq360.WebService.webserviceclasses`

**Extends / Implements:**
- `extends WebServicePacket`
- `implements java.io.Serializable` (also inherited via superclass)

**Imports:**
- `org.json.JSONException`
- `org.json.JSONObject`
- `java.io.Serializable`
- `org.json.JSONArray`
- `java.util.ArrayList`
- `java.math.BigDecimal`
- `au.com.collectiveintelligence.fleetiq360.WebService.webserviceclasses.*` (wildcard — redundant, same package)
- `au.com.collectiveintelligence.fleetiq360.WebService.webserviceclasses.results.*` (wildcard)

**Fields:**

| Line | Name | Type | Visibility | Modifier |
|------|------|------|------------|----------|
| 14 | `requestID` | `String` | `public` | `transient` |

**Methods:**

| Line | Signature |
|------|-----------|
| 16 | `public WebServiceResultPacket()` |
| 21 | `public WebServiceResultPacket(JSONObject jsonObject) throws JSONException` |

**Method body detail:**

- `WebServiceResultPacket()` (line 16–18): Calls `super()`. Empty body otherwise.
- `WebServiceResultPacket(JSONObject jsonObject)` (line 21–28): Calls `super(jsonObject)`. Contains a null-guard (`if (jsonObject != null)`) but the body of that guard is completely empty — `requestID` is never populated from the JSON object despite being the only declared field. The `throws JSONException` declaration is present but can never be thrown by this body.

**Note:** Imports for `JSONArray`, `ArrayList`, `BigDecimal`, and the wildcard `results.*` import are entirely unused.

**No Activities, Fragments, Services, BroadcastReceivers, or ContentProviders.**

---

## Test Coverage Search

No test file for any of the three assigned classes exists anywhere in the repository. The entire `app/` module has no test source tree (`app/src/test/` and `app/src/androidTest/` do not exist). Grep for `WebServicePacket`, `WebServiceParameterPacket`, and `WebServiceResultPacket` across the repository confirms these names appear only in production source files, Pass 1 audit reports, and subclasses — never in a test file.

**Coverage summary:** 0 of 6 methods across 3 files are exercised by any automated test.

---

## Findings

---

### A28-1 | HIGH — Project-wide: Zero Automated Test Coverage in app/ and LibCommon/ Modules

Documented above in the Project-Wide Finding section. Every finding below is a direct consequence of this structural absence.

---

### A28-2 | HIGH — No Tests for WebServicePacket JSON Constructor

**File:** `WebServicePacket.java`
**Method:** `WebServicePacket(JSONObject jsonObject)` — line 12

The JSON-accepting constructor is the root of the entire packet-parsing hierarchy. Every concrete subclass (19 result types under `results/`, 19 parameter types under `parameters/`) calls `super(jsonObject)` which ultimately calls this constructor. It is the foundation of all web-service response deserialization in the application.

There are no tests for:
- Normal construction from a valid `JSONObject`
- Construction from a `null` argument (exercising the null-guard path at line 14)
- Construction from an empty `JSONObject` (`new JSONObject("{}")`)
- Behaviour when the argument contains unexpected types or structure

Although the body of the null-guard is currently empty (no fields parsed here), the method is still the superclass entry point for the entire hierarchy. Any future addition of parsing logic here is guaranteed to be untested. The absence of tests at this level means that regressions in the most widely-inherited constructor in the codebase will go undetected.

---

### A28-3 | HIGH — No Tests for WebServiceParameterPacket JSON Constructor

**File:** `WebServiceParameterPacket.java`
**Method:** `WebServiceParameterPacket(JSONObject jsonObject)` — line 18

This is the base class constructor for all outbound request parameter types (19 concrete subclasses). No tests exercise:
- Normal construction delegating to `super(jsonObject)`
- Construction with `null` argument (null-guard at line 22 is exercised but body is empty)
- Construction with an empty or malformed `JSONObject`
- The full `super` → `WebServicePacket` delegation chain

All 19 parameter subclasses inherit this constructor chain. An untested base means that any shared parameter-construction logic added in future is inherited silently into all parameter types with no test coverage at the base level.

---

### A28-4 | HIGH — No Tests for WebServiceResultPacket JSON Constructor or requestID Field Population

**File:** `WebServiceResultPacket.java`
**Method:** `WebServiceResultPacket(JSONObject jsonObject)` — line 21
**Field:** `requestID` (line 14)

This is the base class for all inbound server response types (21 concrete result subclasses including `GetTokenResult`, `LoginResultArray`, `SessionResult`, etc.). The field `requestID` is declared as `public transient String` — the only piece of response state at this level of the hierarchy. However, the JSON constructor body is empty: `requestID` is never populated from `jsonObject` even when it is non-null.

There are no tests for:
- Whether `requestID` is populated from the server response JSON (it is not, which may be intentional or a latent bug)
- Construction with `null` argument
- Construction with a `JSONObject` that contains a `requestID` key
- Construction with a `JSONObject` that lacks a `requestID` key
- The `transient` modifier's effect on serialization/deserialization cycles (the field is lost on `Serializable` round-trips)

The `transient` modifier on `requestID` means that if any result packet is serialized (e.g., placed in an `Intent` extra or written to disk) and then deserialized, `requestID` will be `null` on recovery regardless of what value it held. Since this class is used as the base for token results (`GetTokenResult`) and session results (`SessionResult`), this silent data loss is untested.

---

### A28-5 | MEDIUM — No Tests for Default (No-Arg) Constructors Across All Three Classes

**Files:** All three assigned files
**Methods:** `WebServicePacket()` (line 9), `WebServiceParameterPacket()` (line 15), `WebServiceResultPacket()` (line 16)

While the no-arg constructors currently have empty bodies, they are part of the public API of these classes and are the only construction path used when objects are deserialized via `java.io.Serializable` (the `Serializable` deserialization mechanism calls the first no-arg constructor of the nearest non-Serializable superclass in the chain). There are no tests confirming:
- That deserialized instances of any result or parameter packet type are in a valid default state
- That `requestID` is `null` (not garbage) on a freshly-deserialized `WebServiceResultPacket`
- That subclasses constructed via the no-arg path behave consistently with those constructed via the JSON path

---

### A28-6 | MEDIUM — Dead/Stub Bodies in JSON Constructors Are Untested and Present Future Regression Risk

**Files:** All three assigned files
**Methods:** All three JSON-accepting constructors

All three JSON constructors declare `throws JSONException` and contain a null-guard (`if (jsonObject != null) { }`) whose body is completely empty. This means:

1. The `throws JSONException` clause is currently a false declaration — no `JSONException` can be thrown by any of these three methods as written. Any caller that wraps these constructors in a `try/catch (JSONException e)` block has dead catch logic. There are no tests confirming that `JSONException` propagation works correctly when parsing is eventually added to these stubs.

2. The null-guard exists but does nothing. If parsing logic is added inside the guard in future, the guard's correctness (does it correctly protect against NPE? does it silently swallow a null without signalling the caller?) becomes testable and important. No tests will exist to catch regressions when that addition happens.

3. The pattern of stub constructors that call `super()` but do nothing else is repeated across the hierarchy. The 19 result subclasses and 19 parameter subclasses all call `super(jsonObject)` through these stubs. Any code that instantiates a concrete subclass believing the base-class state has been populated from JSON will receive an object in default state — silently.

---

### A28-7 | MEDIUM — Unused Imports Indicate Dead Scaffolding That Is Never Exercised

**Files:** `WebServiceParameterPacket.java` (lines 6–10), `WebServiceResultPacket.java` (lines 6–10)
**Unused imports in both files:** `org.json.JSONArray`, `java.util.ArrayList`, `java.math.BigDecimal`, `au.com.collectiveintelligence.fleetiq360.WebService.webserviceclasses.results.*`

These imports are present but none of the declared methods use them. They indicate that parsing logic was either removed, was never implemented, or was moved to subclasses while the imports were left behind. The absence of tests means there is no automated check to confirm that the final state of these classes (with no array or decimal parsing) is intentional and stable. If these imports were left over from removed parsing logic, that removal is untested.

---

### A28-8 | LOW — serialVersionUID Absent on All Three Serializable Classes

**Files:** All three assigned files

`WebServicePacket`, `WebServiceParameterPacket`, and `WebServiceResultPacket` all implement `java.io.Serializable` either directly or via inheritance, but none declare an explicit `serialVersionUID`. The JVM will auto-generate one based on class structure at compile time. If the class structure changes (fields added, methods added, access modifiers changed), the generated `serialVersionUID` changes, and any previously serialized instance stored in an `Intent`, cache, or persistent store will throw `java.io.InvalidClassException` on deserialization.

Because these are base classes for the entire result and parameter hierarchy, a structural change to any of them propagates the `serialVersionUID` mismatch risk to all 40 concrete subclasses simultaneously. There are no tests for serialization round-trips at any level.

---

### A28-9 | INFO — No Test for Null-Guard Branching in JSON Constructors

**Files:** All three assigned files
**Methods:** All three JSON-accepting constructors

Each JSON constructor has the same null-guard pattern:
```java
if (jsonObject != null) {
    // empty
}
```
There is no test that passes `null` to confirm the null branch is taken silently (no NPE thrown, no exception of any kind). There is no test that passes a non-null object to confirm the non-null branch is entered. While the bodies are currently empty, the structural test that confirms the guard itself works correctly (and continues to work when logic is added) is absent.

---

### A28-10 | INFO — Wildcard Imports Create Untraceable Dependency Surface

**Files:** `WebServiceParameterPacket.java` (lines 9–10), `WebServiceResultPacket.java` (lines 9–10)

Both files use:
```java
import au.com.collectiveintelligence.fleetiq360.WebService.webserviceclasses.*;
import au.com.collectiveintelligence.fleetiq360.WebService.webserviceclasses.results.*;
```

Wildcard imports make it impossible to determine by static analysis of the import section alone which types are actually used. Combined with zero test coverage, any type newly introduced into those packages is automatically in scope for both classes without any explicit declaration. This is a maintenance risk, not a security risk, but in the absence of tests there is no automated check that catches unexpected type resolution changes.

---

## Summary of Findings

| ID | Severity | File(s) | Description |
|----|----------|---------|-------------|
| A28-1 | HIGH | Project-wide | Zero automated test coverage in `app/` and `LibCommon/` modules; no `test/` or `androidTest/` directories exist |
| A28-2 | HIGH | `WebServicePacket.java` | No tests for the root JSON constructor — entry point for entire packet hierarchy |
| A28-3 | HIGH | `WebServiceParameterPacket.java` | No tests for parameter base-class JSON constructor used by all 19 parameter subclasses |
| A28-4 | HIGH | `WebServiceResultPacket.java` | No tests for result base-class JSON constructor; `requestID` field not populated from JSON and `transient` modifier causes silent data loss on serialization round-trips |
| A28-5 | MEDIUM | All three files | No tests for no-arg constructors; these are the deserialization entry points for `Serializable` |
| A28-6 | MEDIUM | All three files | Stub JSON constructors with empty bodies and unreachable `throws JSONException` declarations are untested; future additions will have no regression baseline |
| A28-7 | MEDIUM | `WebServiceParameterPacket.java`, `WebServiceResultPacket.java` | Unused imports (`JSONArray`, `ArrayList`, `BigDecimal`, `results.*`) indicate removed or unimplemented parsing logic; no tests confirm current state is intentional |
| A28-8 | LOW | All three files | No `serialVersionUID` declared on any `Serializable` class; structural changes break deserialization for all 40 concrete subclasses simultaneously; no serialization round-trip tests exist |
| A28-9 | INFO | All three files | No test exercises the null-guard branching in any JSON constructor (null path and non-null path both untested) |
| A28-10 | INFO | `WebServiceParameterPacket.java`, `WebServiceResultPacket.java` | Wildcard imports create untraceable dependency surface; no tests to catch unexpected type resolution changes |

---

## Files Read

| File | Purpose |
|------|---------|
| `/c/Projects/cig-audit/audit-skills/SKILL-Audit-Pass2.md` | Audit skill instructions |
| `app/src/main/java/.../webserviceclasses/WebServicePacket.java` | Assigned file 1 — root base class |
| `app/src/main/java/.../webserviceclasses/WebServiceParameterPacket.java` | Assigned file 2 — parameter base class |
| `app/src/main/java/.../webserviceclasses/WebServiceResultPacket.java` | Assigned file 3 — result base class |
| `audit/2026-02-26-01/pass1/APP28.md` | Pass 1 findings for related result subclasses (context) |
