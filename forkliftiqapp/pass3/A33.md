# Pass 3 Findings: A33

---

## File: LibImageloader/src/main/java/com/nostra13/universalimageloader/core/assist/deque/LinkedBlockingDeque.java

### Reading Evidence

- **Class:** `LinkedBlockingDeque<E>` (extends `AbstractQueue<E>`, implements `BlockingDeque<E>`, `java.io.Serializable`)
- **Public Methods:**
  - `LinkedBlockingDeque()` (line 151) — constructor
  - `LinkedBlockingDeque(int capacity)` (line 161) — constructor
  - `LinkedBlockingDeque(Collection<? extends E> c)` (line 176) — constructor
  - `addFirst(E e)` (line 305)
  - `addLast(E e)` (line 314)
  - `offerFirst(E e)` (line 322)
  - `offerLast(E e)` (line 337)
  - `putFirst(E e)` (line 353)
  - `putLast(E e)` (line 370)
  - `offerFirst(E e, long timeout, TimeUnit unit)` (line 387)
  - `offerLast(E e, long timeout, TimeUnit unit)` (line 410)
  - `removeFirst()` (line 432)
  - `removeLast()` (line 441)
  - `pollFirst()` (line 447)
  - `pollLast()` (line 457)
  - `takeFirst()` (line 467)
  - `takeLast()` (line 480)
  - `pollFirst(long timeout, TimeUnit unit)` (line 493)
  - `pollLast(long timeout, TimeUnit unit)` (line 511)
  - `getFirst()` (line 532)
  - `getLast()` (line 541)
  - `peekFirst()` (line 547)
  - `peekLast()` (line 557)
  - `removeFirstOccurrence(Object o)` (line 567)
  - `removeLastOccurrence(Object o)` (line 584)
  - `add(E e)` (line 614)
  - `offer(E e)` (line 622)
  - `put(E e)` (line 630)
  - `offer(E e, long timeout, TimeUnit unit)` (line 638)
  - `remove()` (line 653)
  - `poll()` (line 657)
  - `take()` (line 661)
  - `poll(long timeout, TimeUnit unit)` (line 665)
  - `element()` (line 679)
  - `peek()` (line 683)
  - `remainingCapacity()` (line 698)
  - `drainTo(Collection<? super E> c)` (line 714)
  - `drainTo(Collection<? super E> c, int maxElements)` (line 724)
  - `push(E e)` (line 749)
  - `pop()` (line 756)
  - `remove(Object o)` (line 776)
  - `size()` (line 785)
  - `contains(Object o)` (line 803)
  - `toArray()` (line 871)
  - `toArray(T[] a)` (line 922)
  - `toString()` (line 941)
  - `clear()` (line 968)
  - `iterator()` (line 1000)
  - `descendingIterator()` (line 1018)

- **Constants/Fields (non-public internal state, documented):**
  - `serialVersionUID = -387911632671998426L` (line 76) — private static final long
  - `first` — transient Node<E> (line 113)
  - `last` — transient Node<E> (line 120)
  - `count` — private transient int (line 125)
  - `capacity` — private final int (line 130)
  - `lock` — final ReentrantLock (line 135)
  - `notEmpty` — private final Condition (line 140)
  - `notFull` — private final Condition (line 145)
  - Inner class `Node<E>` (package-private static final, line 81)
  - Inner class `AbstractItr` (private abstract, line 1025)
  - Inner class `Itr` (private, line 1128)
  - Inner class `DescendingItr` (private, line 1141)

### Findings

#### A33-1: `pollFirst()` has no Javadoc [INFO]
- File: `LinkedBlockingDeque.java`, Line: 447
- Description: The method `pollFirst()` has no Javadoc comment. It retrieves and removes the first element, returning `null` if the deque is empty. As a public method implementing a `BlockingDeque` interface contract, it should document its behaviour, return value, and thread-safety guarantee at minimum.

#### A33-2: `pollLast()` has no Javadoc [INFO]
- File: `LinkedBlockingDeque.java`, Line: 457
- Description: The method `pollLast()` has no Javadoc comment. It retrieves and removes the last element, returning `null` if the deque is empty. No documentation is present.

#### A33-3: `takeFirst()` has no Javadoc [INFO]
- File: `LinkedBlockingDeque.java`, Line: 467
- Description: The method `takeFirst()` has no Javadoc comment. This method blocks indefinitely until an element becomes available, which is a critical behavioural detail (blocking, interruptible) that should be documented.

#### A33-4: `takeLast()` has no Javadoc [INFO]
- File: `LinkedBlockingDeque.java`, Line: 480
- Description: The method `takeLast()` has no Javadoc comment. Like `takeFirst()`, this method blocks until an element is available and throws `InterruptedException`; neither is documented.

#### A33-5: `pollFirst(long timeout, TimeUnit unit)` has no Javadoc [INFO]
- File: `LinkedBlockingDeque.java`, Line: 493
- Description: The timed `pollFirst` overload has no Javadoc comment. Important details — the timeout semantics, the return of `null` on timeout expiry, and the `InterruptedException` thrown — are entirely undocumented.

#### A33-6: `pollLast(long timeout, TimeUnit unit)` has no Javadoc [INFO]
- File: `LinkedBlockingDeque.java`, Line: 511
- Description: The timed `pollLast` overload has no Javadoc comment. Same omission as A33-5; timeout behaviour and exception contract are not documented.

#### A33-7: `peekFirst()` has no Javadoc [INFO]
- File: `LinkedBlockingDeque.java`, Line: 547
- Description: The method `peekFirst()` has no Javadoc comment. It returns the first element without removing it, or `null` if empty. No documentation is present.

#### A33-8: `peekLast()` has no Javadoc [INFO]
- File: `LinkedBlockingDeque.java`, Line: 557
- Description: The method `peekLast()` has no Javadoc comment. It returns the last element without removing it, or `null` if empty. No documentation is present.

#### A33-9: `removeFirstOccurrence(Object o)` has no Javadoc [INFO]
- File: `LinkedBlockingDeque.java`, Line: 567
- Description: The method `removeFirstOccurrence` has no Javadoc comment. It silently returns `false` for a `null` argument rather than throwing `NullPointerException` (contrary to typical collection contract expectations), which is a subtlety that particularly warrants documentation.

#### A33-10: `removeLastOccurrence(Object o)` has no Javadoc [INFO]
- File: `LinkedBlockingDeque.java`, Line: 584
- Description: The method `removeLastOccurrence` has no Javadoc comment. Same issue as A33-9: the silent `false` return for `null` input and the traversal-from-tail behaviour are undocumented.

#### A33-11: `poll()` has no Javadoc [INFO]
- File: `LinkedBlockingDeque.java`, Line: 657
- Description: The method `poll()` has no Javadoc comment. It retrieves and removes the head of the queue, returning `null` if empty.

#### A33-12: `take()` has no Javadoc [INFO]
- File: `LinkedBlockingDeque.java`, Line: 661
- Description: The method `take()` has no Javadoc comment. This method blocks until an element is available, throwing `InterruptedException` on interrupt — critical behavioural details that are undocumented.

#### A33-13: `poll(long timeout, TimeUnit unit)` has no Javadoc [INFO]
- File: `LinkedBlockingDeque.java`, Line: 665
- Description: The timed `poll` overload has no Javadoc comment. Timeout semantics, null-on-expiry return, and the interruptible nature of the wait are all undocumented.

#### A33-14: `peek()` has no Javadoc [INFO]
- File: `LinkedBlockingDeque.java`, Line: 683
- Description: The method `peek()` has no Javadoc comment. It retrieves but does not remove the head element, returning `null` if the deque is empty.

#### A33-15: `toString()` has no Javadoc [INFO]
- File: `LinkedBlockingDeque.java`, Line: 941
- Description: The `toString()` override has no Javadoc comment. It has a notable implementation detail: if an element is the collection itself, it renders as `"(this Collection)"`. This override is public and the behaviour diverges slightly from the default `AbstractCollection.toString()` in its self-reference handling.

---

## File: LibImageloader/src/main/java/com/nostra13/universalimageloader/core/decode/BaseImageDecoder.java

### Reading Evidence

- **Class:** `BaseImageDecoder` (implements `ImageDecoder`)
- **Public Methods:**
  - `BaseImageDecoder(boolean loggingEnabled)` (line 56) — constructor
  - `decode(ImageDecodingInfo decodingInfo)` (line 70) — `@Override`

- **Protected Methods (part of extension API):**
  - `getImageStream(ImageDecodingInfo decodingInfo)` (line 97)
  - `defineImageSizeAndRotation(InputStream imageStream, ImageDecodingInfo decodingInfo)` (line 101)
  - `defineExifOrientation(String imageUri)` (line 121)
  - `prepareDecodingOptions(ImageSize imageSize, ImageDecodingInfo decodingInfo)` (line 155)
  - `resetStream(InputStream imageStream, ImageDecodingInfo decodingInfo)` (line 176)
  - `considerExactScaleAndOrientatiton(Bitmap subsampledBitmap, ImageDecodingInfo decodingInfo, int rotation, boolean flipHorizontal)` (line 188)

- **Constants:**
  - `LOG_SUBSAMPLE_IMAGE` — protected static final String (line 42)
  - `LOG_SCALE_IMAGE` — protected static final String (line 43)
  - `LOG_ROTATE_IMAGE` — protected static final String (line 44)
  - `LOG_FLIP_IMAGE` — protected static final String (line 45)
  - `ERROR_NO_IMAGE_STREAM` — protected static final String (line 46)
  - `ERROR_CANT_DECODE_IMAGE` — protected static final String (line 47)

- **Protected Inner Classes:**
  - `ExifInfo` (line 226) — holds `rotation` (int) and `flipHorizontal` (boolean)
  - `ImageFileInfo` (line 242) — holds `imageSize` (ImageSize) and `exif` (ExifInfo)

### Findings

#### A33-16: `getImageStream()` has no Javadoc [INFO]
- File: `BaseImageDecoder.java`, Line: 97
- Description: The protected method `getImageStream` has no Javadoc comment. This method is part of the protected extension API intended for subclassing, making its documentation particularly important. It delegates to the downloader to obtain the raw image `InputStream` from the URI in `decodingInfo`; it can throw `IOException` and its contract relative to returning `null` is not documented.

#### A33-17: `defineImageSizeAndRotation()` has no Javadoc [INFO]
- File: `BaseImageDecoder.java`, Line: 101
- Description: The protected method `defineImageSizeAndRotation` has no Javadoc comment. This is an extension-point method that reads image dimensions via `BitmapFactory` (with `inJustDecodeBounds`) and optionally reads EXIF orientation data. None of its behaviour, parameters, return type, or `IOException` is documented.

#### A33-18: `defineExifOrientation()` has no Javadoc [INFO]
- File: `BaseImageDecoder.java`, Line: 121
- Description: The protected method `defineExifOrientation` has no Javadoc comment. It reads EXIF orientation tags and maps them to a rotation angle and a flip flag, returning an `ExifInfo` object. The method silently swallows `IOException` (logging a warning) and returns defaults in that case — significant behaviour that is undocumented.

#### A33-19: `prepareDecodingOptions()` has no Javadoc [INFO]
- File: `BaseImageDecoder.java`, Line: 155
- Description: The protected method `prepareDecodingOptions` has no Javadoc comment. It calculates the `inSampleSize` for the `BitmapFactory.Options` and returns the options object ready for use in decoding. It is an extension-point method with no documentation.

#### A33-20: `resetStream()` has no Javadoc [INFO]
- File: `BaseImageDecoder.java`, Line: 176
- Description: The protected method `resetStream` has no Javadoc comment. Its behaviour is non-trivial: it attempts `mark`/`reset` on the stream first; if that fails or is unsupported, it closes the stream and re-opens it via `getImageStream`. This fallback re-open strategy and the possible `IOException` are undocumented.

#### A33-21: `considerExactScaleAndOrientatiton()` — method name contains typo, undocumented [LOW]
- File: `BaseImageDecoder.java`, Line: 188
- Description: The protected method is named `considerExactScaleAndOrientatiton` (note: "Orientatiton" instead of "Orientation"). Beyond being undocumented (no Javadoc), the misspelling in the method name is part of the public/protected API surface and cannot be corrected without a breaking change. Any subclass overriding this method is exposed to the confusing name. A Javadoc comment at minimum should clarify the intended purpose and note the known typo for subclass authors. Severity is LOW because it is a naming defect rather than a documentation inaccuracy that risks runtime misuse, but it does affect the quality of the extension API.

#### A33-22: `ExifInfo` inner class and its constructors have no Javadoc [INFO]
- File: `BaseImageDecoder.java`, Line: 226
- Description: The protected static class `ExifInfo` and its two constructors (`ExifInfo()` at line 231, `ExifInfo(int rotation, boolean flipHorizontal)` at line 236) have no Javadoc. The class is part of the protected extension API. The public fields `rotation` and `flipHorizontal` are also undocumented.

#### A33-23: `ImageFileInfo` inner class and its constructor have no Javadoc [INFO]
- File: `BaseImageDecoder.java`, Line: 242
- Description: The protected static class `ImageFileInfo` and its constructor (`ImageFileInfo(ImageSize imageSize, ExifInfo exif)` at line 247) have no Javadoc. The class is part of the protected extension API; its purpose and field meanings are not described.

---

## File: LibImageloader/src/main/java/com/nostra13/universalimageloader/core/decode/ImageDecoder.java

### Reading Evidence

- **Class:** `ImageDecoder` (interface)
- **Public Methods:**
  - `decode(ImageDecodingInfo imageDecodingInfo)` (line 38)
- **Constants/Types:** None

### Findings

#### A33-24: `decode()` Javadoc has empty `@param`, `@return`, and `@throws` tags [LOW]
- File: `ImageDecoder.java`, Lines: 31–38
- Description: The Javadoc for the interface method `decode` (lines 31–37) has three tag declarations that are entirely empty:
  - `@param imageDecodingInfo` — no description provided
  - `@return` — no description provided
  - `@throws IOException` — no description provided

  The summary sentence ("Decodes image to {@link Bitmap} according target size and other parameters.") is adequate at the high level, but the empty tags actively mislead readers by implying documentation is present when there is none. A developer reading the generated Javadoc will see blank lines for those entries. This is a low-severity inaccuracy because the tags exist but carry no informational content, degrading the quality of the interface contract documentation.
