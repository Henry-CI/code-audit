# Pass 3 Findings: A93

---

## File: DriverStatsFragment2.java

**Full path:** `app/src/main/java/au/com/collectiveintelligence/fleetiq360/ui/fragment/DriverStatsFragment2.java`

### Reading Evidence

- **Class:** `DriverStatsFragment2` extends `FleetFragment`
- **Public Methods:**
  - `onCreateView` (line 36) — override; inflates `fragment_service_stats` layout and returns the root view
  - `initViews` (line 41) — initialises the bottom bar, user photo, user name, service record ListView with adapter, equipment views, loads data, and refreshes user detail
  - `onRightButton` (line 243) — override; navigates to `ServiceRecordFragment` when `fromProfile` is `false`, or calls `onBackPressed` when `fromProfile` is `true`
- **Package-visible fields:**
  - `fromProfile` (line 31, `boolean`, default `true`)
- **Private instance final fields (string labels):**
  - `LABEL_FAILED = "FAILED"` (line 176)
  - `LABEL_INCOMPLETE = "INCOMPLETE"` (line 177)
  - `LABEL_COMPLETED = "COMPLETED"` (line 178)
- **Private methods (not audited for Javadoc but noted for context):**
  - `setUserData` (line 66), `getUserDetail` (line 70), `loadData` (line 75), `initEquipmentViews` (line 99), `setUserEquipments` (line 109), `onData` (line 126), `initServiceChart` (line 162), `getColorForPieEntry` (line 180), `getServicePieData` (line 198), `setData` (line 218)

### Findings

#### A93-1: `onCreateView` has no Javadoc [INFO]
- **File:** DriverStatsFragment2.java, Line: 36
- **Description:** The overridden `onCreateView` method has no Javadoc comment. There is no description of what layout is inflated or what the return value represents.

#### A93-2: `initViews` has no Javadoc [INFO]
- **File:** DriverStatsFragment2.java, Line: 41
- **Description:** `initViews` is a public method with no Javadoc. It performs a significant number of distinct operations: sets user photo, initialises the bottom navigation bar (with branch logic controlled by `fromProfile`), sets up the service record `ListView` and its adapter, populates equipment views, triggers an async data load, and calls `getUserDetail`. None of this is documented.

#### A93-3: `onRightButton` has no Javadoc [INFO]
- **File:** DriverStatsFragment2.java, Line: 243
- **Description:** The overridden `onRightButton` method has no Javadoc. Its dual behaviour — navigating forward to `ServiceRecordFragment` when `fromProfile == false`, and pressing back when `fromProfile == true` — is non-obvious and particularly warrants documentation.

---

## File: DriverStatsFragment3.java

**Full path:** `app/src/main/java/au/com/collectiveintelligence/fleetiq360/ui/fragment/DriverStatsFragment3.java`

### Reading Evidence

- **Class:** `DriverStatsFragment3` extends `FleetFragment`
- **Public Methods:**
  - `onCreateView` (line 45) — override; inflates `fragment_driver_stats_3` layout and returns the root view
  - `initViews` (line 52) — initialises user photo, bottom bar, chart, user name, time-range radio buttons (week/month/year), triggers initial data load, and refreshes user detail
- **Public fields:**
  - `arrayList` (line 41, `ArrayList<EquipmentStatsItem>`) — holds the current equipment stats items; exposed with no access modifier documentation
- **Public inner classes:**
  - `MyValueFormatter` (line 316) — implements `IValueFormatter`; formats float values to one decimal place for chart value labels
  - `MyAxisValueFormatter` (line 324, `static`) — implements `IAxisValueFormatter`; maps integer x-axis index values to string labels drawn from `labelList`
- **Public methods on inner classes:**
  - `MyValueFormatter.getFormattedValue` (line 319)
  - `MyAxisValueFormatter.getFormattedValue` (line 328)
- **Private static constant array:**
  - `mColors` (line 233) — 15-element `int[]` of hardcoded RGB colours used for chart line and info-item colouring
- **Private field:**
  - `selectedType` (line 50) — `int`; 0 = weekly, 1 = monthly, 2 = yearly (comment present inline)

### Findings

#### A93-4: `onCreateView` has no Javadoc [INFO]
- **File:** DriverStatsFragment3.java, Line: 45
- **Description:** The overridden `onCreateView` method has no Javadoc comment describing the layout inflated or the return value.

#### A93-5: `initViews` has no Javadoc [INFO]
- **File:** DriverStatsFragment3.java, Line: 52
- **Description:** `initViews` is a public method with no Javadoc. It wires up radio buttons with listeners that reset `driverStatsResultArray` to `null` and reload data for the chosen time range, initialises the line chart, and triggers the initial async data load. This orchestration is not documented.

#### A93-6: Public field `arrayList` has no Javadoc [INFO]
- **File:** DriverStatsFragment3.java, Line: 41
- **Description:** The public field `arrayList` is exposed with no documentation describing its purpose, expected lifecycle (populated by `onData` after a successful API response), or the conditions under which it may be empty.

#### A93-7: Inner class `MyValueFormatter` has no Javadoc [INFO]
- **File:** DriverStatsFragment3.java, Line: 316
- **Description:** The public inner class `MyValueFormatter` and its `getFormattedValue` method (line 319) have no Javadoc explaining that they format chart data-point values to one decimal place (e.g. `"1.5"`).

#### A93-8: Inner class `MyAxisValueFormatter` has no Javadoc [INFO]
- **File:** DriverStatsFragment3.java, Line: 324
- **Description:** The public static inner class `MyAxisValueFormatter` and its `getFormattedValue` method (line 328) have no Javadoc. The method converts a float x-axis index to a string label from `labelList`, returning `"-"` when the rounded index is out of bounds. This out-of-bounds guard and the rounding behaviour (`Math.round`) are undocumented.

#### A93-9: `MyAxisValueFormatter.labelList` field has no Javadoc [INFO]
- **File:** DriverStatsFragment3.java, Line: 325
- **Description:** The package-visible field `labelList` on the public static inner class `MyAxisValueFormatter` is set externally by `getXAixsFormatter` (line 312) and used directly by `getFormattedValue`. There is no documentation describing that callers are responsible for populating this list before the formatter is attached to the chart axis.

---

## File: DriverStatsListAdapter.java

**Full path:** `app/src/main/java/au/com/collectiveintelligence/fleetiq360/ui/fragment/DriverStatsListAdapter.java`

### Reading Evidence

- **Class:** `DriverStatsListAdapter` extends `ArrayAdapter<DriverStatsItem>`
- **Constructor:**
  - `DriverStatsListAdapter(Context context, ArrayList<DriverStatsItem> data)` (line 23) — package-private; calls `super` with `R.layout.list_item_driver_stats`, stores references, calls `initData`
- **Public Methods (overrides):**
  - `getView` (line 77) — inflates or recycles `list_item_driver_stats` rows; populates name, hours text, and a proportional colour bar whose width is determined by each item's ratio to the max value
  - `getCount` (line 124) — returns `mData.size()`
  - `getItem(int i)` (line 129) — returns `mData.get(i)`
- **Private static constant:**
  - `JOYFUL_COLORS` (line 30) — `int[]` of 6 hardcoded RGB colours used as fallback palette after the first two theme colours
- **Static inner class:**
  - `ListHolder` (line 133) — view-holder pattern; holds references to `name`, `status_bar`, `status_bar_layout`, `stub`, `status_text`
- **Private fields:**
  - `colors` (line 39) — `ArrayList<Integer>`; populated by `initColors` with two theme colours followed by `JOYFUL_COLORS`
  - `maxValue` (line 48) — `float`; maximum numeric value across all items, used to compute bar-width ratios

### Findings

#### A93-10: `getView` has no Javadoc [INFO]
- **File:** DriverStatsListAdapter.java, Line: 77
- **Description:** The overridden `getView` method has no Javadoc. It applies a non-trivial proportional bar layout: each item's `status_bar` and `stub` views receive `LinearLayout` weight values computed from the item's value divided by `maxValue`, with a minimum ratio of `0.01f` to prevent a zero-width bar. This logic is entirely undocumented.

#### A93-11: `getCount` has no Javadoc [INFO]
- **File:** DriverStatsListAdapter.java, Line: 124
- **Description:** The overridden `getCount` method has no Javadoc.

#### A93-12: `getItem` has no Javadoc [INFO]
- **File:** DriverStatsListAdapter.java, Line: 129
- **Description:** The overridden `getItem(int i)` method has no Javadoc.

#### A93-13: `getView` calls `initData()` on every invocation [LOW]
- **File:** DriverStatsListAdapter.java, Line: 78
- **Description:** `getView` calls `initData()` at the start of every row-binding call (line 78). `initData` iterates the full dataset to recompute `maxValue` and re-initialises the colour list. This is a performance issue for the caller but is also a documentation gap: there is no comment or Javadoc explaining why `initData` is re-invoked on each `getView` call rather than once on construction or on dataset change. The absence of any comment makes the intent ambiguous — it is unclear whether this is intentional defensive recalculation or an oversight. Classified LOW because it may cause visible jank on lists with more than a few items, and the lack of any explanation makes future maintenance error-prone.

---

*End of A93 report. All findings are documentation absences or ambiguities; no correct behaviour is reported as a defect.*
