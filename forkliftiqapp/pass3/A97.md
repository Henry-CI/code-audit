# Pass 3 Findings: A97

## File: SavedReportListAdapter.java
### Reading Evidence
- Class: `SavedReportListAdapter` (extends `ArrayAdapter<ReportItem>`)
- Public Methods:
  - `getView(int position, View convertView, ViewGroup parent)` (line 30) — override, no Javadoc
  - `getCount()` (line 61) — override, no Javadoc
  - `getItem(int i)` (line 66) — override, no Javadoc
- Package-private Methods:
  - `SavedReportListAdapter(Context context, ArrayList<ReportItem> data)` (line 22) — constructor, package-private, no Javadoc
- Constants/Types:
  - Inner static class `ListHolder` (line 70) — holds `TextView name` and `View resend_report_view`
- Fields (package-private/instance):
  - `SavedReportFragment savedReportFragment` (line 20) — public-facing field, no Javadoc

### Findings

#### A97-1: No Javadoc on `getView` override [INFO]
- File: SavedReportListAdapter.java, Line: 30
- Description: The `getView` method is overridden from `ArrayAdapter` but carries no Javadoc comment. It contains non-trivial behaviour: it inflates `R.layout.list_item_report`, wires a resend-click listener that delegates to `SavedReportFragment.onResend(recordItem)`, and uses a `ListHolder` view-holder pattern. None of this supplementary logic is documented.

#### A97-2: No Javadoc on `getCount` override [INFO]
- File: SavedReportListAdapter.java, Line: 61
- Description: `getCount` is overridden to return `mData.size()` rather than relying on the superclass. No Javadoc explains why the override is necessary.

#### A97-3: No Javadoc on `getItem` override [INFO]
- File: SavedReportListAdapter.java, Line: 66
- Description: `getItem` is overridden to index directly into `mData`. No Javadoc is present.

#### A97-4: No Javadoc on package-private constructor [INFO]
- File: SavedReportListAdapter.java, Line: 22
- Description: The constructor accepts a `Context` and an `ArrayList<ReportItem>` and delegates to the `ArrayAdapter` superclass with `R.layout.list_item_report`. No Javadoc documents the parameters or the layout resource being bound.

#### A97-5: No class-level Javadoc [INFO]
- File: SavedReportListAdapter.java, Line: 17
- Description: The class `SavedReportListAdapter` has no class-level Javadoc explaining its purpose, the data type it adapts, or its relationship to `SavedReportFragment`.

---

## File: ServiceEditFragment.java
### Reading Evidence
- Class: `ServiceEditFragment` (extends `FleetFragment`)
- Public Methods:
  - `createInstance(ArrayList<ServiceRecordItem> recordItems, int currentIndex)` (line 58) — static factory, no Javadoc
  - `onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState)` (line 67) — override, no Javadoc
  - `initViews()` (line 73) — no Javadoc
  - `onMiddleButton(View view)` (line 241) — override, no Javadoc
  - `onRightButton(View view)` (line 248) — override, no Javadoc
- Package-private / non-public methods:
  - `setData()` (line 137)
  - `initNaviButton()` (line 177)
  - `onNext()` (line 197)
  - `onPrevious()` (line 208)
  - `updateServiceTitle()` (line 218)
  - `getCurrentRecordItem()` (line 231)
  - `onServiceEdited()` (line 345)
- Constants/Types:
  - `private static String TAG` (line 39) — class simple name, not a constant (`static final` missing)
- Public Fields:
  - `public boolean fromProfile` (line 56) — no Javadoc
- Class-level Javadoc (line 34-36):
  - Present but is the boilerplate `"A simple {@link Fragment} subclass."` — carries no meaningful information about the fragment's actual purpose.

### Findings

#### A97-6: Class-level Javadoc is boilerplate and inaccurate [LOW]
- File: ServiceEditFragment.java, Lines: 34-36
- Description: The class-level comment reads `"A simple {@link Fragment} subclass."` — this is the default Android Studio fragment template text. `ServiceEditFragment` is not simple: it manages multi-record navigation (previous/next), two mutually exclusive service-scheduling modes (by accumulated hours vs. by interval), async web-service save calls, progress dialogs, and local model mutation on success. The comment gives readers no useful information about the fragment's responsibilities and may be misleading to maintainers unfamiliar with the codebase.

#### A97-7: No Javadoc on `createInstance` static factory [INFO]
- File: ServiceEditFragment.java, Line: 58
- Description: The static factory method `createInstance` creates a `ServiceEditFragment`, assigns `mRecordItems` and `mCurrentIndex` directly on the instance (bypassing the `Bundle` argument mechanism), and returns it. No Javadoc documents the parameters, the return value, or the reason state is set as instance fields rather than through `setArguments`.

#### A97-8: No Javadoc on `initViews` [INFO]
- File: ServiceEditFragment.java, Line: 73
- Description: `initViews` performs substantial setup: it conditionally configures the bottom bar based on `fromProfile`, binds previous/next navigation click handlers, initialises all UI widget references, wires toggle listeners that maintain mutual exclusivity between `toggle_by_hours` and `toggle_by_interval`, and calls `setData` and `initNaviButton`. None of this is documented.

#### A97-9: No Javadoc on `onMiddleButton` override [INFO]
- File: ServiceEditFragment.java, Line: 241
- Description: `onMiddleButton` navigates to `DriverStatsFragment2` via `showFragmentWithStack`. The method name suggests it is a callback for a bottom-bar middle button press, but no Javadoc explains the routing decision or why `DriverStatsFragment2` is the target from a service-edit context.

#### A97-10: No Javadoc on `onRightButton` override [INFO]
- File: ServiceEditFragment.java, Line: 248
- Description: `onRightButton` implements the save flow: it reads and validates both `service_at` and `service_interval` fields, validates that `lastService` does not exceed `acc_hours`, builds either a `SaveServiceHoursParameter` or `SaveServiceDurationParameter` packet depending on toggle state, performs an async `WebApi.saveService` call, and on success mutates the in-memory `ServiceRecordItem` and refreshes the view. This is the most complex method in the file and has no documentation whatsoever.

#### A97-11: `TAG` field declared without `final` modifier [INFO]
- File: ServiceEditFragment.java, Line: 39
- Description: `private static String TAG` is missing the `final` modifier. By convention and Android best-practice, log tags are `private static final String TAG`. While this is a code-quality issue rather than strictly a documentation finding, it may indicate the field was autogenerated and then neglected; there is no comment explaining its use or absence of `final`.

#### A97-12: No Javadoc on public field `fromProfile` [INFO]
- File: ServiceEditFragment.java, Line: 56
- Description: `public boolean fromProfile` is read in `initViews` to decide which bottom-bar configuration to render and is also copied into `ServiceEditFragment` instances created via `createInstance`. There is no Javadoc or inline comment explaining valid states, who is responsible for setting it, or the consequence of leaving it at its default value (`false`).

---

## File: ServiceRecordFragment.java
### Reading Evidence
- Class: `ServiceRecordFragment` (extends `FleetFragment`)
- Public / Package-private Methods:
  - `getStatus(ServiceRecordItem recordItem)` (line 48) — static, package-private, no Javadoc
  - `getColorForStatus(int status)` (line 76) — static, package-private, no Javadoc
  - `getTextForStatus(Context context, int status)` (line 95) — static, package-private, no Javadoc
  - `onCreateView(LayoutInflater, ViewGroup, Bundle)` (line 137) — override, no Javadoc
  - `initViews()` (line 142) — public, no Javadoc
  - `onMiddleButton(View view)` (line 199) — override, no Javadoc
- Private Methods (not subject to public-method audit):
  - `showServiceDetail(int position)` (line 170)
  - `loadData()` (line 176)
  - `onData(ServiceRecordResultArray result)` (line 205)
  - `initServiceChart()` (line 225)
  - `getColorForPieEntry(ArrayList<PieEntry>)` (line 231)
  - `getServicePieData()` (line 247)
  - `setData()` (line 304)
  - `getLabelForStatus(int status)` (line 115) — private static
- Constants/Types:
  - `final static String TYPE_SET_HOURS = "setHrs"` (line 35) — package-private
  - `final static String TYPE_SET_INTERVAL = "setDur"` (line 36) — package-private
  - `private static final int STATUS_NORMAL = 0` (line 39)
  - `private static final int STATUS_DUE = 1` (line 40)
  - `private static final int STATUS_OVERDUE = 2` (line 41)
  - `private static final int STATUS_NOT_SET = 3` (line 42)
  - `private static final int SERVICE_DUE_HOURS = 25` (line 43)
- Package-private Fields:
  - `boolean fromProfile = true` (line 45)

### Findings

#### A97-13: No class-level Javadoc [INFO]
- File: ServiceRecordFragment.java, Line: 31
- Description: `ServiceRecordFragment` has no class-level Javadoc. The class is responsible for displaying a list of service records, rendering a pie chart of service status distribution, and navigating to `ServiceEditFragment` on item selection. None of this is documented at the class level.

#### A97-14: No Javadoc on `getStatus` [INFO]
- File: ServiceRecordFragment.java, Line: 48
- Description: The static package-private method `getStatus` classifies a `ServiceRecordItem` into one of four status integers. The classification logic involves three specific conditions (null `service_type`, both `service_due` and `acc_hours` zero, `service_due` relative to `SERVICE_DUE_HOURS`), none of which are explained in any comment. The method is called from both `ServiceEditFragment` and internally, making its undocumented contract a risk for future maintainers.

#### A97-15: No Javadoc on `getColorForStatus` [INFO]
- File: ServiceRecordFragment.java, Line: 76
- Description: `getColorForStatus` maps an integer status code to an Android color resource ID. The integer status values are private constants defined in `ServiceRecordFragment`; however, the method is package-private and called from `ServiceEditFragment`, which cannot see those constants directly. No Javadoc documents the expected input range or the returned resource type.

#### A97-16: No Javadoc on `getTextForStatus` [INFO]
- File: ServiceRecordFragment.java, Line: 95
- Description: `getTextForStatus` maps a status integer to a localised string via the `Context`. Like `getColorForStatus`, it is package-private and consumed externally by `ServiceEditFragment`. No Javadoc documents the parameters, the return value, or the string resource keys used.

#### A97-17: No Javadoc on `initViews` [INFO]
- File: ServiceRecordFragment.java, Line: 142
- Description: `initViews` conditionally configures the bottom bar based on `fromProfile`, sets up the `PieChart`, creates and attaches a `ServiceRecordListAdapter` to the `ListView`, wires the item-click listener that calls `showServiceDetail`, and triggers `loadData`. The method has significant side effects and no documentation.

#### A97-18: No Javadoc on `onMiddleButton` override [INFO]
- File: ServiceRecordFragment.java, Line: 199
- Description: `onMiddleButton` navigates to `DriverStatsFragment2` from a service-record list context. No Javadoc explains why this navigation target is appropriate or what lifecycle constraints apply.

#### A97-19: `TYPE_SET_HOURS` and `TYPE_SET_INTERVAL` constants undocumented [INFO]
- File: ServiceRecordFragment.java, Lines: 35-36
- Description: The package-private constants `TYPE_SET_HOURS = "setHrs"` and `TYPE_SET_INTERVAL = "setDur"` are used across multiple files (`ServiceEditFragment`, `ServiceRecordFragment`). They represent string values sent to and received from the web service as the `service_type` field of a `ServiceRecordItem`. No Javadoc or inline comment documents their domain meaning, their correspondence to server-side values, or the consequence of encountering an unrecognised value.

#### A97-20: `SERVICE_DUE_HOURS` threshold undocumented [INFO]
- File: ServiceRecordFragment.java, Line: 43
- Description: `private static final int SERVICE_DUE_HOURS = 25` defines the boundary (25 hours) between STATUS_NORMAL and STATUS_DUE. The value has no comment explaining its origin (business rule, configuration, or arbitrary choice), making future changes to the threshold risky without understanding the rationale.
