# Pass 3 Findings: A99

---

## File: SetupEmailFragment.java

**Full path:** `app/src/main/java/au/com/collectiveintelligence/fleetiq360/ui/fragment/SetupEmailFragment.java`

### Reading Evidence

- **Class:** `SetupEmailFragment extends FleetFragment implements View.OnClickListener`
- **Public Methods:**
  - `createInstance(boolean fromDashboard)` (line 35) — static factory method
  - `onCreateView(LayoutInflater, ViewGroup, Bundle)` (line 42) — lifecycle override
  - `onActivityCreated(Bundle)` (line 49) — lifecycle override
  - `initViews()` (line 57)
  - `onResume()` (line 207) — lifecycle override
  - `onStop()` (line 212) — lifecycle override
  - `onDestroy()` (line 217) — lifecycle override
  - `onClick(View)` (line 222) — interface implementation
- **Constants/Types:** None defined (no `static final` constants, no enums, no inner types)
- **Fields (package-private/private):**
  - `SignupActivity activity` (line 32, package-private)
  - `boolean mFromDashboard` (line 33, private)
  - `GetEmailResult getEmailResult` (line 91, private)

### Findings

#### A99-1: `createInstance` has no Javadoc [INFO]
- **File:** `SetupEmailFragment.java`, Line: 35
- **Description:** The static factory method `createInstance(boolean fromDashboard)` has no Javadoc comment. There is no description of the method's purpose, the semantics of the `fromDashboard` parameter (which controls button label, help-text visibility, and whether existing emails are pre-loaded from the server), or what is returned. A caller cannot determine the behavioural difference between `createInstance(true)` and `createInstance(false)` without reading the body.

#### A99-2: `initViews` has no Javadoc [INFO]
- **File:** `SetupEmailFragment.java`, Line: 57
- **Description:** `initViews()` has no Javadoc. The method is public and performs non-trivial initialisation: it conditionally sets the next/save button label, conditionally hides the help-text view, attaches the save click listener, and either triggers a network load (when `mFromDashboard` is true) or resets a local `GetEmailResult` to nulls (when false). None of this behaviour is described.

#### A99-3: `onActivityCreated` has no Javadoc [INFO]
- **File:** `SetupEmailFragment.java`, Line: 49
- **Description:** The overridden lifecycle method `onActivityCreated` has no Javadoc explaining its responsibility (resolving the hosting `SignupActivity` reference). While lifecycle overrides are often considered self-documenting by convention, the cast and conditional assignment here are non-obvious behaviour worth documenting.

#### A99-4: `onClick` is empty with no explanation [INFO]
- **File:** `SetupEmailFragment.java`, Line: 222
- **Description:** The `onClick(View)` method required by `View.OnClickListener` is empty with no Javadoc or inline comment. This is a required interface method that is intentionally unimplemented (click handling is done through anonymous inner listeners). The absence of any comment creates ambiguity about whether the empty body is intentional or an oversight.

---

## File: SignupFragment.java

**Full path:** `app/src/main/java/au/com/collectiveintelligence/fleetiq360/ui/fragment/SignupFragment.java`

### Reading Evidence

- **Class:** `SignupFragment extends FleetFragment implements View.OnClickListener`
- **Public Methods:**
  - `onCreateView(LayoutInflater, ViewGroup, Bundle)` (line 36) — lifecycle override
  - `onActivityCreated(Bundle)` (line 43) — lifecycle override
  - `initViews()` (line 50)
  - `onClick(View)` (line 204) — interface implementation
- **Constants/Types:**
  - `private static final String TYPE_DRIVER = "DRIVER"` (line 86)
  - `private static final String TYPE_COMPANY = "COMPANY"` (line 87)
- **Fields:**
  - `SignupActivity activity` (line 31, package-private)
  - `EditText firstNameET, lastNameET, emailAddressET, mobileNumET, passwordET, confirmPWET` (line 32, private)
  - `TextView sign_up_group_choice_id` (line 33, private)

### Findings

#### A99-5: `initViews` has no Javadoc [INFO]
- **File:** `SignupFragment.java`, Line: 50
- **Description:** `initViews()` is public and has no Javadoc. The method binds all form field views, attaches an `OnEditorActionListener` to the confirm-password field (to trigger registration on IME_ACTION_DONE), attaches a click listener on the join button, and attaches a click listener to open the user-type selection dialog. None of this behaviour is documented.

#### A99-6: `onActivityCreated` has no Javadoc [INFO]
- **File:** `SignupFragment.java`, Line: 43
- **Description:** The overridden lifecycle method `onActivityCreated` has no Javadoc. It resolves and stores a reference to the hosting `SignupActivity`. Same category of gap as A99-3.

#### A99-7: `onClick` is empty with no explanation [INFO]
- **File:** `SignupFragment.java`, Line: 204
- **Description:** The `onClick(View)` method required by `View.OnClickListener` is empty with no Javadoc or inline comment. As with `SetupEmailFragment`, all click handling is delegated to anonymous listeners, making this method a required stub. No comment explains this intent.

#### A99-8: Private constants `TYPE_DRIVER` and `TYPE_COMPANY` are undocumented [INFO]
- **File:** `SignupFragment.java`, Lines: 86-87
- **Description:** The string constants `TYPE_DRIVER = "DRIVER"` and `TYPE_COMPANY = "COMPANY"` have no comments. Their values are server-side literals that must match the registration API's accepted user-type strings. The fact that they are protocol-significant (sent as `contactperson` boolean mapping) is not captured anywhere. Specifically, `TYPE_COMPANY` maps to `contactperson = true` in `UserRegisterParameter` (line 199), a non-obvious transformation with no documentation.

---

## File: SignupLoadingFragment.java

**Full path:** `app/src/main/java/au/com/collectiveintelligence/fleetiq360/ui/fragment/SignupLoadingFragment.java`

### Reading Evidence

- **Class:** `SignupLoadingFragment extends FleetFragment implements View.OnClickListener`
- **Public Methods:**
  - `onCreateView(LayoutInflater, ViewGroup, Bundle)` (line 28) — lifecycle override
  - `onActivityCreated(Bundle)` (line 35) — lifecycle override
  - `initViews()` (line 41)
  - `onResume()` (line 122) — lifecycle override
  - `onStop()` (line 129) — lifecycle override
  - `onDestroy()` (line 133) — lifecycle override
  - `onClick(View)` (line 139) — interface implementation
- **Constants/Types:** None
- **Fields:**
  - `LoginActivity activity` (line 24, package-private)
  - `ImageView loadingIV` (line 25, private)
  - `int[] loadingResIds` (line 47, private) — array of 15 drawable frame resource IDs
  - `static boolean loginFinished` (line 51, private static)
  - `static int runTime` (line 52, private static)

### Findings

#### A99-9: `initViews` has no Javadoc [INFO]
- **File:** `SignupLoadingFragment.java`, Line: 41
- **Description:** `initViews()` is public and has no Javadoc. It binds the loading animation `ImageView` and populates a version-name `AMTextView` from `BuildConfig.VERSION_NAME`. No documentation describes what it initialises or when it must be called relative to other setup methods.

#### A99-10: `onActivityCreated` has no Javadoc [INFO]
- **File:** `SignupLoadingFragment.java`, Line: 35
- **Description:** The overridden lifecycle method `onActivityCreated` has no Javadoc. It conditionally captures a reference to the hosting `LoginActivity`. Same category of gap as A99-3 and A99-6.

#### A99-11: `onClick` is empty with no explanation [INFO]
- **File:** `SignupLoadingFragment.java`, Line: 139
- **Description:** The `onClick(View)` method required by `View.OnClickListener` is empty with no Javadoc or inline comment. No comment indicates the intentionally empty body.

#### A99-12: Static mutable fields `loginFinished` and `runTime` are undocumented [INFO]
- **File:** `SignupLoadingFragment.java`, Lines: 51-52
- **Description:** The fields `private static boolean loginFinished` and `private static int runTime` are used to control a background animation thread started in `onResume`. Their static scope means they are shared across all instances of the fragment (e.g. if the user navigates back and the fragment is re-created). There is no Javadoc or comment explaining the lifecycle contract, the threading assumptions, or why these are `static` rather than instance fields. This is a behavioural risk that warrants documentation — if a second instance is created before the first's thread exits, both instances share the same flags.

#### A99-13: `onResume` triggers background thread without documentation [INFO]
- **File:** `SignupLoadingFragment.java`, Line: 122
- **Description:** The overridden `onResume()` calls both `loadingLoginHandle()` (initiates authentication via `CurrentUser.login`) and `timerHandle()` (starts a raw `Thread` running an infinite loop cycling animation frames). There is no Javadoc on `onResume` explaining that it begins a background thread or that the thread must be terminated externally via `loginFinished = true`. The absence of documentation for this threading contract increases maintenance risk.

---

## Summary

| Finding | File | Line | Severity |
|---------|------|------|----------|
| A99-1: `createInstance` undocumented | SetupEmailFragment.java | 35 | INFO |
| A99-2: `initViews` undocumented | SetupEmailFragment.java | 57 | INFO |
| A99-3: `onActivityCreated` undocumented | SetupEmailFragment.java | 49 | INFO |
| A99-4: `onClick` empty, no explanation | SetupEmailFragment.java | 222 | INFO |
| A99-5: `initViews` undocumented | SignupFragment.java | 50 | INFO |
| A99-6: `onActivityCreated` undocumented | SignupFragment.java | 43 | INFO |
| A99-7: `onClick` empty, no explanation | SignupFragment.java | 204 | INFO |
| A99-8: `TYPE_DRIVER`/`TYPE_COMPANY` undocumented | SignupFragment.java | 86-87 | INFO |
| A99-9: `initViews` undocumented | SignupLoadingFragment.java | 41 | INFO |
| A99-10: `onActivityCreated` undocumented | SignupLoadingFragment.java | 35 | INFO |
| A99-11: `onClick` empty, no explanation | SignupLoadingFragment.java | 139 | INFO |
| A99-12: Static mutable fields undocumented | SignupLoadingFragment.java | 51-52 | INFO |
| A99-13: `onResume` background thread undocumented | SignupLoadingFragment.java | 122 | INFO |
