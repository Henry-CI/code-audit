# Pass 3 Findings: A06

---

## File: LibCommon/src/main/java/com/yy/libcommon/Font/AMTextView.java

### Reading Evidence

- **Class:** `AMTextView` (extends `TextView`)
- **Public Methods:**
  - `AMTextView(Context context)` — line 17
  - `AMTextView(Context context, AttributeSet attrs)` — line 23
  - `AMTextView(Context context, AttributeSet attrs, int defStyle)` — line 29
- **Private Methods (not subject to public-API doc requirement):**
  - `applyCustomFont(Context context, AttributeSet attrs)` — line 36
- **Constants/Types:** None defined in this file
- **Class-level Javadoc:** Only a creation comment (`Created by steve.yang on 16/11/16.`) — not a Javadoc comment for the class purpose

### Findings

#### A06-1: No class-level Javadoc on `AMTextView` [INFO]
- **File:** `LibCommon/src/main/java/com/yy/libcommon/Font/AMTextView.java`, Line: 12
- **Description:** The only comment present is `Created by steve.yang on 16/11/16.` inside a `/** */` block. This is not a meaningful Javadoc description. The class purpose (a custom `TextView` that applies a Helvetica Neue typeface from assets, driven by an optional XML attribute `ttf_type`) is entirely undocumented.

#### A06-2: No Javadoc on constructor `AMTextView(Context)` [INFO]
- **File:** `LibCommon/src/main/java/com/yy/libcommon/Font/AMTextView.java`, Line: 17
- **Description:** The single-argument constructor is public and undocumented. Its behaviour — calling `applyCustomFont` with a null `AttributeSet`, which causes the fallback font `"medium"` (HelveticaNeue_Medium.ttf) to be applied — is not described anywhere.

#### A06-3: No Javadoc on constructor `AMTextView(Context, AttributeSet)` [INFO]
- **File:** `LibCommon/src/main/java/com/yy/libcommon/Font/AMTextView.java`, Line: 23
- **Description:** The two-argument constructor is public and undocumented. It reads the `ttf_type` styled attribute to select a typeface, falling back to `"medium"` if the attribute resolves to null.

#### A06-4: No Javadoc on constructor `AMTextView(Context, AttributeSet, int)` [INFO]
- **File:** `LibCommon/src/main/java/com/yy/libcommon/Font/AMTextView.java`, Line: 29
- **Description:** The three-argument constructor is public and undocumented. Same attribute-driven typeface logic as above applies.

---

## File: LibCommon/src/main/java/com/yy/libcommon/Font/FontCache.java

### Reading Evidence

- **Class:** `FontCache`
- **Public Methods:**
  - `getTypeface(String fontname, Context context)` — line 16 (static)
  - `getTypeFace(Context context, String ttf)` — line 32 (static)
- **Fields:**
  - `fontCache` — `private static HashMap<String, Typeface>` — line 14
- **Constants/Types:** None defined
- **Class-level Javadoc:** Only a creation comment (`Created by steve.yang on 16/11/16.`) — not a meaningful Javadoc

### Findings

#### A06-5: No class-level Javadoc on `FontCache` [INFO]
- **File:** `LibCommon/src/main/java/com/yy/libcommon/Font/FontCache.java`, Line: 8
- **Description:** The class-level comment is only an IDE-generated creation stamp. The class purpose — an in-memory, process-lifetime `HashMap` cache for `Typeface` objects loaded from the app's assets — is not documented.

#### A06-6: No Javadoc on `getTypeface(String, Context)` [INFO]
- **File:** `LibCommon/src/main/java/com/yy/libcommon/Font/FontCache.java`, Line: 16
- **Description:** This public static method is entirely undocumented. Important behaviour that should be documented includes: (1) the font is looked up by `fontname` in the in-memory cache first; (2) on a cache miss it attempts `Typeface.createFromAsset()` using the path `"fonts/" + fontname`; (3) on any exception it returns `null` silently rather than propagating; (4) a successfully loaded typeface is stored in the cache for future calls. The silent `null` return on failure is particularly noteworthy for callers.

#### A06-7: No Javadoc on `getTypeFace(Context, String)` [INFO]
- **File:** `LibCommon/src/main/java/com/yy/libcommon/Font/FontCache.java`, Line: 32
- **Description:** This public static method is entirely undocumented. It translates a string token (`null`/empty, `"bold"`, `"light"`, `"medium"`, `"thin"`, `"untrathin"`) into a Helvetica Neue variant filename and delegates to `getTypeface`. None of the accepted token values, the default fallback (HelveticaNeueLt.ttf for null/empty or unrecognised tokens), or the possible `null` return are described.

#### A06-8: API inconsistency — parameter order differs between the two public methods [LOW]
- **File:** `LibCommon/src/main/java/com/yy/libcommon/Font/FontCache.java`, Lines: 16 and 32
- **Description:** `getTypeface` takes `(String fontname, Context context)` while `getTypeFace` takes `(Context context, String ttf)`. The reversed parameter order is a usability hazard for callers and is not noted anywhere in documentation. Although this is primarily a design issue, the absence of any Javadoc means the inconsistency is invisible to API consumers relying on documentation alone. Risk is LOW because the class is internal to the library, but the inconsistency increases the chance of argument-order mistakes.

#### A06-9: Typo in accepted token value `"untrathin"` is undocumented [LOW]
- **File:** `LibCommon/src/main/java/com/yy/libcommon/Font/FontCache.java`, Line: 55
- **Description:** The token string `"untrathin"` is almost certainly a misspelling of `"ultrathin"`. Because there is no Javadoc enumerating the accepted values, callers passing `"ultrathin"` (the natural spelling) will silently receive the default Light typeface instead of the Ultra-Thin variant, with no error or warning. The absence of documentation makes this silent mismatch entirely non-obvious. Severity is LOW (library-internal, not a security issue) but the combination of the typo and the lack of documentation makes it a latent correctness bug.

---

## File: LibCommon/src/main/java/com/yy/libcommon/FragmentInterface.java

### Reading Evidence

- **Class:** `FragmentInterface` (outer, concrete class)
- **Nested Type:** `FragmentHandle` — `public interface` — line 10
- **Interface Methods (all abstract/public by definition):**
  - `addFragment(@IdRes int containerViewId, Fragment fragment, String tag)` — line 11
  - `hideFragment(String tag)` — line 12
  - `removeFragment(String tag)` — line 13
  - `findFramentByTag(String tag)` — line 14
  - `showFragment(@IdRes int containerViewId, String tag, String className)` — line 15
- **Constants/Types:** None
- **Class/interface-level Javadoc:** Only a creation comment (`Created by Administrator on 2017/5/6.`) — not a meaningful Javadoc

### Findings

#### A06-10: No class-level Javadoc on outer class `FragmentInterface` [INFO]
- **File:** `LibCommon/src/main/java/com/yy/libcommon/FragmentInterface.java`, Line: 7
- **Description:** The outer class has only an IDE-generated creation stamp. Its role as a container for the `FragmentHandle` interface contract is not described.

#### A06-11: No Javadoc on interface `FragmentHandle` [INFO]
- **File:** `LibCommon/src/main/java/com/yy/libcommon/FragmentInterface.java`, Line: 10
- **Description:** The interface itself has no documentation. Its purpose — defining the contract for an object that manages Fragment lifecycle operations (add, hide, remove, find, show) within a given container — is not described.

#### A06-12: No Javadoc on `addFragment` [INFO]
- **File:** `LibCommon/src/main/java/com/yy/libcommon/FragmentInterface.java`, Line: 11
- **Description:** Undocumented. Expected documentation would clarify: what `containerViewId` must refer to, whether adding a duplicate tag is permitted, and the role of `tag` in subsequent lookups.

#### A06-13: No Javadoc on `hideFragment` [INFO]
- **File:** `LibCommon/src/main/java/com/yy/libcommon/FragmentInterface.java`, Line: 12
- **Description:** Undocumented. Expected documentation would clarify: behaviour when the tag is not found, and whether the fragment is detached or merely hidden from view.

#### A06-14: No Javadoc on `removeFragment` [INFO]
- **File:** `LibCommon/src/main/java/com/yy/libcommon/FragmentInterface.java`, Line: 13
- **Description:** Undocumented. Expected documentation would clarify: behaviour when the tag is not found, and whether this is a back-stack-aware removal.

#### A06-15: No Javadoc on `findFramentByTag` [INFO]
- **File:** `LibCommon/src/main/java/com/yy/libcommon/FragmentInterface.java`, Line: 14
- **Description:** Undocumented. Expected documentation would clarify: return value when the tag is not found (null vs. exception), and whether only currently-added fragments are searched.

#### A06-16: Typo in method name `findFramentByTag` (missing 'g') [LOW]
- **File:** `LibCommon/src/main/java/com/yy/libcommon/FragmentInterface.java`, Line: 14
- **Description:** The method is named `findFramentByTag` instead of `findFragmentByTag`. The missing letter 'g' in "Fragment" makes the API name inconsistent with Android's own `FragmentManager.findFragmentByTag()`. Because this is an interface method, fixing the name would be a breaking change for all implementors and callers. The absence of any documentation means this non-obvious name is not flagged or explained. Severity is LOW (library-internal typo in a stable interface), but it is a source of confusion and refactoring cost.

#### A06-17: No Javadoc on `showFragment` [INFO]
- **File:** `LibCommon/src/main/java/com/yy/libcommon/FragmentInterface.java`, Line: 15
- **Description:** Undocumented. Expected documentation would clarify: the role of `className` (appears to be a fully-qualified class name used to instantiate the fragment if it does not yet exist), the interaction with `containerViewId` and `tag`, and the return value (the shown or newly-created fragment, or null on failure).
