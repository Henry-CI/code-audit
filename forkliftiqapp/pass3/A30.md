# Pass 3 Findings: A30

---

## File: FlushedInputStream.java

**Full path:** `LibImageloader/src/main/java/com/nostra13/universalimageloader/core/assist/FlushedInputStream.java`

### Reading Evidence

- **Class:** `FlushedInputStream` (extends `FilterInputStream`)
- **Public Methods:**
  - `FlushedInputStream(InputStream inputStream)` — constructor (line 13)
  - `skip(long n)` — override (line 18)
- **Constants/Types:** None defined in this class.

### Findings

#### A30-1: Class-level Javadoc is too vague to be useful [INFO]

- **File:** `FlushedInputStream.java`, Line: 7–10
- **Description:** The class-level Javadoc reads only: "Many streams obtained over slow connection show [this problem]." It provides no explanation of what the class does to address the problem, nor describes the fix (i.e., that `skip()` is overridden to guarantee all requested bytes are actually skipped by falling back to `read()` when `skip()` returns zero). A developer reading this class in isolation cannot understand its purpose without following the external link, which may not remain valid.

#### A30-2: Constructor `FlushedInputStream(InputStream)` has no Javadoc [INFO]

- **File:** `FlushedInputStream.java`, Line: 13
- **Description:** The public constructor has no Javadoc comment. There is no description of the `inputStream` parameter nor of the intent of wrapping it.

#### A30-3: Override `skip(long n)` has no Javadoc [INFO]

- **File:** `FlushedInputStream.java`, Line: 18
- **Description:** The `skip()` override implements a materially different contract from `FilterInputStream.skip()`: it guarantees that all `n` bytes are skipped (or EOF is reached), by falling back to `read()` when the underlying `skip()` returns 0. This is the core behavioral fix for the Android bug referenced in the class Javadoc. The absence of any method-level Javadoc means the important behavioral difference from the parent class is undocumented, making this harder to maintain correctly.

---

## File: ImageScaleType.java

**Full path:** `LibImageloader/src/main/java/com/nostra13/universalimageloader/core/assist/ImageScaleType.java`

### Reading Evidence

- **Class:** `ImageScaleType` (public enum)
- **Public Methods:** None (enum; no explicit methods declared).
- **Constants/Types (enum constants):**
  - `NONE` (line 26)
  - `NONE_SAFE` (line 35)
  - `IN_SAMPLE_POWER_OF_2` (line 43)
  - `IN_SAMPLE_INT` (line 50)
  - `EXACTLY` (line 63)
  - `EXACTLY_STRETCHED` (line 77)

### Findings

#### A30-4: `IN_SAMPLE_POWER_OF_2` Javadoc contains grammatical errors that obscure meaning [INFO]

- **File:** `ImageScaleType.java`, Line: 37–42
- **Description:** The Javadoc comment reads "Image will be reduces 2-fold until next reduce step make image smaller target size." Two grammatical problems are present: (1) "reduces" should be "reduced"; (2) "make image smaller target size" is an incomplete phrase — the intended meaning ("make the image smaller than the target size") is not clearly expressed. While a reader can infer the intent, the text is ambiguous enough to introduce misunderstanding.

#### A30-5: `EXACTLY` Javadoc contains a grammatical error [INFO]

- **File:** `ImageScaleType.java`, Line: 52
- **Description:** The Javadoc reads "Image will scaled-down exactly to target size." The word "be" is missing; it should read "Image will be scaled down exactly to target size." While the meaning remains recoverable, the missing word degrades documentation quality.

#### A30-6: `EXACTLY_STRETCHED` Javadoc contains a grammatical error [INFO]

- **File:** `ImageScaleType.java`, Line: 65
- **Description:** The Javadoc reads "Image will scaled exactly to target size." The words "be" is missing; it should read "Image will be scaled exactly to target size." Same class of defect as A30-5.

#### A30-7: `EXACTLY` and `EXACTLY_STRETCHED` Javadocs have Cons/Pros labels swapped [LOW]

- **File:** `ImageScaleType.java`, Lines: 60–61 and 73–75
- **Description:** Both `EXACTLY` and `EXACTLY_STRETCHED` contain identical Cons/Pros text:
  - "**Cons:** Saves memory by keeping smaller Bitmap in memory cache"
  - "**Pros:** Requires more memory in one time for creation of result Bitmap"
  The labels are inverted: saving memory is a benefit (Pro) and requiring more memory is a drawback (Con). A developer reading these docs to choose between scale types will receive misleading guidance about the trade-offs of `EXACTLY` and `EXACTLY_STRETCHED` versus `IN_SAMPLE_*` types. This inversion affects both constants identically.

---

## File: ImageSize.java

**Full path:** `LibImageloader/src/main/java/com/nostra13/universalimageloader/core/assist/ImageSize.java`

### Reading Evidence

- **Class:** `ImageSize`
- **Public Methods:**
  - `ImageSize(int width, int height)` — constructor (line 32)
  - `ImageSize(int width, int height, int rotation)` — constructor (line 37)
  - `getWidth()` (line 47)
  - `getHeight()` (line 51)
  - `scaleDown(int sampleSize)` (line 56)
  - `scale(float scale)` (line 61)
  - `toString()` (line 66)
- **Constants/Types:**
  - `TO_STRING_MAX_LENGHT` — private static final int (line 26) [note: name contains typo "LENGHT"]
  - `SEPARATOR` — private static final String (line 27)
  - Fields: `width` (int, private final), `height` (int, private final)

### Findings

#### A30-8: Class-level Javadoc uses grammatically incorrect phrasing [INFO]

- **File:** `ImageSize.java`, Line: 19
- **Description:** The class Javadoc reads "Present width and height values." The word "Present" is incorrect; it should read "Represents width and height values." While the meaning is clear in context, the incorrect verb reduces documentation quality.

#### A30-9: Two-argument constructor `ImageSize(int, int)` has no Javadoc [INFO]

- **File:** `ImageSize.java`, Line: 32
- **Description:** The public constructor that accepts `width` and `height` has no Javadoc. There is no description of the parameters or any mention that the values are stored as-is without rotation adjustment.

#### A30-10: Three-argument constructor `ImageSize(int, int, int)` has no Javadoc [LOW]

- **File:** `ImageSize.java`, Line: 37
- **Description:** The public constructor that accepts `width`, `height`, and `rotation` has no Javadoc. This constructor applies non-trivial logic: if `rotation % 180 != 0` (i.e., a 90-degree or 270-degree rotation), the width and height values are swapped before being stored. This behavior — that the stored `width` and `height` represent the rotated dimensions — is entirely undocumented. A caller who passes in a rotated image's raw dimensions without understanding this swap may be confused by the resulting `getWidth()`/`getHeight()` values. The missing documentation is a higher concern than the two-argument constructor because the logic is non-obvious.

#### A30-11: `getWidth()` and `getHeight()` have no Javadoc [INFO]

- **File:** `ImageSize.java`, Lines: 47 and 51
- **Description:** Both public accessor methods have no Javadoc. While their names are self-explanatory, a brief note that the returned values reflect any rotation adjustment applied at construction time would improve clarity, especially given the behavior described in A30-10.

#### A30-12: Constant name `TO_STRING_MAX_LENGHT` contains a spelling typo [INFO]

- **File:** `ImageSize.java`, Line: 26
- **Description:** The private constant is named `TO_STRING_MAX_LENGHT` — "LENGHT" is a misspelling of "LENGTH". Although this is a private constant and does not affect external API documentation, it reflects the overall documentation quality standard of the file and the comment beside it ("9999x9999".length()) is accurate.

---

*End of A30 audit report. Total findings: 12 (10 INFO, 2 LOW, 0 MEDIUM, 0 HIGH).*
