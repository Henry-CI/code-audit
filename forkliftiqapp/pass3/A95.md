# Pass 3 Findings: A95

## File: IncidentFragment.java
**Full path:** `app/src/main/java/au/com/collectiveintelligence/fleetiq360/ui/fragment/IncidentFragment.java`

### Reading Evidence
- Class: `IncidentFragment` extends `FleetFragment`
- Public Methods:
  - `onCreateView` (line 128)
  - `initViews` (line 134)
  - `onRightButton` (line 255)
- Constants/Types: None defined

### Findings

#### A95-1: `onCreateView` has no Javadoc [INFO]
- File: IncidentFragment.java, Line: 128
- Description: The overridden lifecycle method `onCreateView` has no Javadoc comment. While Android framework overrides are often self-documenting by convention, the method performs the specific step of inflating `R.layout.fragment_incident`. A brief note on what layout is inflated would aid maintainability.

#### A95-2: `initViews` has no Javadoc [INFO]
- File: IncidentFragment.java, Line: 134
- Description: `initViews` is a public method with substantial responsibility: it casts the hosting activity to `IncidentActivity`, initialises the bottom navigation bar, sets up `CompanyDateFormatter` and `ServerDateFormatter`, populates the `incidentCal` Calendar from any pre-existing `event_time` value, wires click listeners for equipment name, date, time, and description fields, and finally calls `initValue()`. None of this behaviour is documented. Callers relying on the side-effect of `incidentCal` being conditionally populated (setting `dateSet`/`timeSet`) would have no written contract to reference.

#### A95-3: `onRightButton` has no Javadoc [INFO]
- File: IncidentFragment.java, Line: 255
- Description: The public override `onRightButton` encodes the validation rules and navigation logic for the "NEXT" action: it enforces that equipment, date, and time must all be selected before advancing, then transfers collected state into `incidentActivity.impactParameter` and navigates to `IncidentPart2Fragment`. These validation requirements and the navigation side-effect are not documented.

---

## File: IncidentPart2Fragment.java
**Full path:** `app/src/main/java/au/com/collectiveintelligence/fleetiq360/ui/fragment/IncidentPart2Fragment.java`

### Reading Evidence
- Class: `IncidentPart2Fragment` extends `FleetFragment`
- Public Methods:
  - `onCreateView` (line 38)
  - `initViews` (line 43)
  - `onRightButton` (line 147)
  - `onMiddleButton` (line 260)
- Constants/Types: None defined

### Findings

#### A95-4: `onCreateView` has no Javadoc [INFO]
- File: IncidentPart2Fragment.java, Line: 38
- Description: The overridden lifecycle method `onCreateView` has no Javadoc. It inflates `R.layout.fragment_incident_2`; no documentation describes this association.

#### A95-5: `initViews` has no Javadoc [INFO]
- File: IncidentPart2Fragment.java, Line: 43
- Description: `initViews` is a public method that casts the hosting activity, initialises the bottom bar with DASHBOARD / BACK / SAVE actions, binds all UI references (location, injury toggle, injury type picker, witness field, photo button, photo image, signature button, signature image), wires all click listeners, and calls `initValues()`. There is no documentation describing these responsibilities, the expected hosting activity type (`IncidentActivity`), or the preconditions (e.g., the activity must already hold the `impactParameter` state).

#### A95-6: `onRightButton` has no Javadoc [INFO]
- File: IncidentPart2Fragment.java, Line: 147
- Description: `onRightButton` (the "SAVE" button handler) performs a multi-step operation with significant side-effects: it validates location, photo, and signature presence; conditionally skips saving and goes directly to image upload if `impactResult` already exists (retry path); otherwise calls `WebApi.async().saveImpact(...)`, then chains `uploadImages` and `uploadSignature`; on complete success it closes the activity. This branching retry logic and the network operations are completely undocumented.

#### A95-7: `onMiddleButton` has no Javadoc [INFO]
- File: IncidentPart2Fragment.java, Line: 260
- Description: `onMiddleButton` (the "BACK" button handler) has non-trivial branching behaviour: it always calls `setParameter()` to persist current UI state into `impactParameter`, then either finishes the activity outright (if `impactResult` is non-null, meaning the incident was already saved) or calls `onBackPressed()` to return to the previous fragment. This divergence in back-navigation behaviour depending on save state is not documented.

---

## File: JobsFragment.java
**Full path:** `app/src/main/java/au/com/collectiveintelligence/fleetiq360/ui/fragment/JobsFragment.java`

### Reading Evidence
- Class: `JobsFragment` extends `FleetFragment`, implements `AbsRecyclerAdapter.OnItemClickListener`, `View.OnClickListener`
- Public Fields: `timerText` (line 45), `textViewSecondText` (line 45), `presenter` (line 47)
- Public Methods:
  - `onCreateView` (line 53)
  - `onActivityCreated` (line 59)
  - `logout` (line 78)
  - `initViews` (line 113)
  - `onSessionSaved` (line 150)
  - `onItemClick` (line 155)
  - `onClick` (line 159)
  - `onSessionEnded` (line 172)
- Constants/Types: None defined

### Findings

#### A95-8: `onCreateView` has no Javadoc [INFO]
- File: JobsFragment.java, Line: 53
- Description: The overridden lifecycle method `onCreateView` has no Javadoc. It inflates `R.layout.fragment_jobs`; the layout association is not documented.

#### A95-9: `onActivityCreated` has no Javadoc [INFO]
- File: JobsFragment.java, Line: 59
- Description: `onActivityCreated` has no Javadoc. It performs an instanceof check to obtain a typed reference to the hosting `JobsActivity` and stores it in the package-private field `activity`. The guard condition and the expectation that the host activity is a `JobsActivity` are not documented.

#### A95-10: `logout` has no Javadoc [INFO]
- File: JobsFragment.java, Line: 78
- Description: `logout` is a public method with complex behaviour: it retrieves the current `SessionResult`, constructs a `SessionEndParameter` with the current server-formatted timestamp, calls `WebApi.async().saveSessionEnd(...)`, and on success calls `WebData.logout()` then launches `LoginActivity`. On network failure it checks for offline data via `SessionDb.hasOfflineData(...)`, and if present, persists the session end locally and proceeds with logout anyway. If there is no session result at all it performs a direct logout. None of this logic, including the offline fallback path, is documented.

#### A95-11: `initViews` has no Javadoc [INFO]
- File: JobsFragment.java, Line: 113
- Description: `initViews` is a public method that configures the driver info header (including timezone-conditional training visibility), initialises date formatters, validates that a session result exists (finishing the activity and showing a toast if not), binds the timer text views and finish button, calls `setInfo()` to populate equipment and session time fields, and instantiates `JobsPresenter`. None of these responsibilities, the early-exit guard, or the timezone-specific behaviour are documented.

#### A95-12: `onSessionSaved` has no Javadoc [INFO]
- File: JobsFragment.java, Line: 150
- Description: The public method `onSessionSaved` has no Javadoc. Its effect — finishing the base activity — is a significant UI lifecycle transition. The method name does not make clear that calling it will close the activity, nor that it is intended as a callback from the presenter layer.

#### A95-13: `onItemClick` has no Javadoc [INFO]
- File: JobsFragment.java, Line: 155
- Description: `onItemClick` is a public interface implementation that is intentionally empty (no-op). There is no Javadoc or inline comment indicating whether the empty body is deliberate (items in this view have no tap action) or an unfinished implementation. The absence of any comment creates ambiguity for future maintainers.

#### A95-14: `onClick` has no Javadoc [INFO]
- File: JobsFragment.java, Line: 159
- Description: The `View.OnClickListener.onClick` override has no Javadoc. It handles the `R.id.jobs_done_btn_id` click by cancelling the `SessionTimeouter`, stopping the timer via the presenter, and triggering `saveSessionEnd()`. The session-ending sequence and the null guard on `presenter` are not documented.

#### A95-15: `onSessionEnded` has no Javadoc [INFO]
- File: JobsFragment.java, Line: 172
- Description: `onSessionEnded` is a public method (likely a callback contract from the presenter or a base class) with no Javadoc. It delegates to `onSessionSaved()` and then calls `presenter.stopTimer()`. The order of these calls (finish activity before stopping timer) and the intended caller are not documented.

#### A95-16: Public fields `timerText`, `textViewSecondText`, and `presenter` lack documentation [INFO]
- File: JobsFragment.java, Lines: 45, 47
- Description: Three fields with package-private or public visibility (`timerText`, `textViewSecondText`, and `presenter`) have no Javadoc. These fields are accessed directly by external collaborators (the presenter accesses the text views, and the activity likely accesses `presenter`). Without documentation, the intended ownership and lifecycle of these shared references are not stated.
