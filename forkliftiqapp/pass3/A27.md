# Pass 3 Findings: A27

## File: DisplayImageOptions.java
**Path:** `LibImageloader/src/main/java/com/nostra13/universalimageloader/core/DisplayImageOptions.java`

### Reading Evidence
- **Class:** `DisplayImageOptions` (public final), with inner public static class `Builder`

- **Public Methods on `DisplayImageOptions`:**
  - `shouldShowImageOnLoading()` (line 109)
  - `shouldShowImageForEmptyUri()` (line 113)
  - `shouldShowImageOnFail()` (line 117)
  - `shouldPreProcess()` (line 121)
  - `shouldPostProcess()` (line 125)
  - `shouldDelayBeforeLoading()` (line 129)
  - `getImageOnLoading(Resources)` (line 133)
  - `getImageForEmptyUri(Resources)` (line 137)
  - `getImageOnFail(Resources)` (line 141)
  - `isResetViewBeforeLoading()` (line 145)
  - `isCacheInMemory()` (line 149)
  - `isCacheOnDisk()` (line 153)
  - `getImageScaleType()` (line 157)
  - `getDecodingOptions()` (line 161)
  - `getDelayBeforeLoading()` (line 165)
  - `isConsiderExifParams()` (line 169)
  - `getExtraForDownloader()` (line 173)
  - `getPreProcessor()` (line 177)
  - `getPostProcessor()` (line 181)
  - `getDisplayer()` (line 185)
  - `getHandler()` (line 189)
  - `createSimple()` (line 501) [static]

- **Public Methods on `DisplayImageOptions.Builder`:**
  - `showStubImage(int)` (line 231) [@Deprecated]
  - `showImageOnLoading(int)` (line 242)
  - `showImageOnLoading(Drawable)` (line 252)
  - `showImageForEmptyUri(int)` (line 264)
  - `showImageForEmptyUri(Drawable)` (line 275)
  - `showImageOnFail(int)` (line 287)
  - `showImageOnFail(Drawable)` (line 298)
  - `resetViewBeforeLoading()` (line 309) [@Deprecated]
  - `resetViewBeforeLoading(boolean)` (line 318)
  - `cacheInMemory()` (line 329) [@Deprecated]
  - `cacheInMemory(boolean)` (line 335)
  - `cacheOnDisc()` (line 346) [@Deprecated]
  - `cacheOnDisc(boolean)` (line 356) [@Deprecated]
  - `cacheOnDisk(boolean)` (line 361)
  - `imageScaleType(ImageScaleType)` (line 370)
  - `bitmapConfig(Bitmap.Config)` (line 376)
  - `decodingOptions(Options)` (line 390)
  - `delayBeforeLoading(int)` (line 397)
  - `extraForDownloader(Object)` (line 403)
  - `considerExifParams(boolean)` (line 409)
  - `preProcessor(BitmapProcessor)` (line 419)
  - `postProcessor(BitmapProcessor)` (line 429)
  - `displayer(BitmapDisplayer)` (line 438)
  - `handler(Handler)` (line 453)
  - `cloneFrom(DisplayImageOptions)` (line 459)
  - `build()` (line 483)

- **Constants/Types:** None (all fields are private instance fields with no public constants)

### Findings

#### A27-1: All public accessor/predicate methods on DisplayImageOptions lack Javadoc [INFO]
- **File:** `DisplayImageOptions.java`, Lines 109-189
- **Description:** Twenty-one public methods on the outer `DisplayImageOptions` class have no Javadoc whatsoever: `shouldShowImageOnLoading`, `shouldShowImageForEmptyUri`, `shouldShowImageOnFail`, `shouldPreProcess`, `shouldPostProcess`, `shouldDelayBeforeLoading`, `getImageOnLoading`, `getImageForEmptyUri`, `getImageOnFail`, `isResetViewBeforeLoading`, `isCacheInMemory`, `isCacheOnDisk`, `getImageScaleType`, `getDecodingOptions`, `getDelayBeforeLoading`, `isConsiderExifParams`, `getExtraForDownloader`, `getPreProcessor`, `getPostProcessor`, `getDisplayer`, and `getHandler`. These are the primary read-accessors used by the rest of the library and by callers; none carry any description of what they return or when to expect non-null values.

#### A27-2: `bitmapConfig()` Javadoc claims default is `Bitmap.Config#ARGB_8888` but the actual default is `null` [LOW]
- **File:** `DisplayImageOptions.java`, Line 375
- **Description:** The Javadoc reads: "Sets `Bitmap.Config` bitmap config for image decoding. Default value - `Bitmap.Config#ARGB_8888`". The Builder field is initialised as `private Options decodingOptions = new Options()` (line 213). `BitmapFactory.Options.inPreferredConfig` is `null` by default in the Android SDK, not `ARGB_8888`. Callers reading the doc may assume ARGB_8888 is always in effect and skip setting it, which is only true if the Android platform itself falls back to that internally. The documented default does not match the actual field default.

---

## File: ImageLoader.java
**Path:** `LibImageloader/src/main/java/com/nostra13/universalimageloader/core/ImageLoader.java`

### Reading Evidence
- **Class:** `ImageLoader` (public)

- **Public Fields/Constants:**
  - `TAG` (line 51) — `public static final String`

- **Package-level String Constants (static final, non-public):**
  - `LOG_INIT_CONFIG` (line 53), `LOG_DESTROY` (line 54), `LOG_LOAD_IMAGE_FROM_MEMORY_CACHE` (line 55)

- **Private String Constants:**
  - `WARNING_RE_INIT_CONFIG` (line 57), `ERROR_WRONG_ARGUMENTS` (line 58), `ERROR_NOT_INIT` (line 59), `ERROR_INIT_CONFIG_WITH_NULL` (line 60)

- **Public Methods:**
  - `getInstance()` (line 70) [static]
  - `init(ImageLoaderConfiguration)` (line 92)
  - `isInited()` (line 109)
  - `displayImage(String, ImageAware)` (line 125)
  - `displayImage(String, ImageAware, ImageLoadingListener)` (line 143)
  - `displayImage(String, ImageAware, DisplayImageOptions)` (line 161)
  - `displayImage(String, ImageAware, DisplayImageOptions, ImageLoadingListener)` (line 181)
  - `displayImage(String, ImageAware, DisplayImageOptions, ImageLoadingListener, ImageLoadingProgressListener)` (line 207)
  - `displayImage(String, ImageAware, DisplayImageOptions, ImageSize, ImageLoadingListener, ImageLoadingProgressListener)` (line 234)
  - `displayImage(String, ImageView)` (line 315)
  - `displayImage(String, ImageView, ImageSize)` (line 330)
  - `displayImage(String, ImageView, DisplayImageOptions)` (line 347)
  - `displayImage(String, ImageView, ImageLoadingListener)` (line 364)
  - `displayImage(String, ImageView, DisplayImageOptions, ImageLoadingListener)` (line 383)
  - `displayImage(String, ImageView, DisplayImageOptions, ImageLoadingListener, ImageLoadingProgressListener)` (line 408)
  - `loadImage(String, ImageLoadingListener)` (line 424)
  - `loadImage(String, ImageSize, ImageLoadingListener)` (line 444)
  - `loadImage(String, DisplayImageOptions, ImageLoadingListener)` (line 463)
  - `loadImage(String, ImageSize, DisplayImageOptions, ImageLoadingListener)` (line 487)
  - `loadImage(String, ImageSize, DisplayImageOptions, ImageLoadingListener, ImageLoadingProgressListener)` (line 517)
  - `loadImageSync(String)` (line 542)
  - `loadImageSync(String, DisplayImageOptions)` (line 558)
  - `loadImageSync(String, ImageSize)` (line 576)
  - `loadImageSync(String, ImageSize, DisplayImageOptions)` (line 595)
  - `setDefaultLoadingListener(ImageLoadingListener)` (line 618)
  - `getMemoryCache()` (line 627)
  - `clearMemoryCache()` (line 637)
  - `getDiscCache()` (line 649) [@Deprecated]
  - `getDiskCache()` (line 658)
  - `clearDiscCache()` (line 670) [@Deprecated]
  - `clearDiskCache()` (line 679)
  - `getLoadingUriForView(ImageAware)` (line 688)
  - `getLoadingUriForView(ImageView)` (line 696)
  - `cancelDisplayTask(ImageAware)` (line 707)
  - `cancelDisplayTask(ImageView)` (line 717)
  - `denyNetworkDownloads(boolean)` (line 731)
  - `handleSlowNetwork(boolean)` (line 742)
  - `pause()` (line 751)
  - `resume()` (line 756)
  - `stop()` (line 767)
  - `destroy()` (line 776)

### Findings

#### A27-3: Class-level Javadoc misspells "Singleton" as "Singletone" [INFO]
- **File:** `ImageLoader.java`, Line 43
- **Description:** The class Javadoc reads "Singletone for image loading and displaying at `ImageView`s". The correct word is "Singleton". While purely a typo, it degrades the professionalism of the public API documentation.

#### A27-4: `displayImage(String, ImageView, ImageSize)` Javadoc does not document the `targetImageSize` parameter [LOW]
- **File:** `ImageLoader.java`, Lines 319-332
- **Description:** This three-argument overload adds a `targetImageSize` parameter compared to the two-argument `displayImage(String, ImageView)` variant. However the Javadoc block (lines 319-332) is a verbatim copy of the two-argument overload's Javadoc and omits any `@param` tag for `targetImageSize`. Callers reading the Javadoc have no documented guidance on the meaning, acceptable values, or null-handling of this parameter.

#### A27-5: `destroy()` can throw `NullPointerException` when called on an uninitialised instance, but this is not documented [LOW]
- **File:** `ImageLoader.java`, Lines 771-782
- **Description:** The Javadoc for `destroy()` states it "stops ImageLoader and clears current configuration". The implementation calls `configuration.diskCache.close()` (line 779) unconditionally before nulling out `configuration`. If `destroy()` is called on an `ImageLoader` that was never initialised (i.e. `configuration` is `null`), this will throw a `NullPointerException`. By contrast, `stop()` (called on line 778) delegates to `engine.stop()`, which likewise will NPE if `engine` is null. The documented contract mentions no precondition and documents no exception, leaving callers unaware of this failure mode. The companion method `init()` documents `@throws IllegalArgumentException`; the same rigour is absent here.

#### A27-6: `setDefaultLoadingListener` is undocumented beyond a single-line comment that omits null-handling behaviour [INFO]
- **File:** `ImageLoader.java`, Line 617-620
- **Description:** The method has a minimal one-line Javadoc: "Sets a default loading listener for all display and loading tasks." The implementation silently substitutes a `SimpleImageLoadingListener` when `null` is passed (line 619). This null-substitution behaviour is not documented. A caller could reasonably expect that passing `null` removes the default listener entirely, but instead a no-op default is installed.

---

## File: ImageLoaderConfiguration.java
**Path:** `LibImageloader/src/main/java/com/nostra13/universalimageloader/core/ImageLoaderConfiguration.java`

### Reading Evidence
- **Class:** `ImageLoaderConfiguration` (public final), with inner public static class `Builder` and two private static inner classes (`NetworkDeniedImageDownloader`, `SlowNetworkImageDownloader`)

- **Public Methods on `ImageLoaderConfiguration`:**
  - `createDefault(Context)` (line 126) [static]

- **Public Methods on `ImageLoaderConfiguration.Builder`:**
  - `Builder(Context)` (line 195) [constructor]
  - `memoryCacheExtraOptions(int, int)` (line 207)
  - `discCacheExtraOptions(int, int, BitmapProcessor)` (line 219) [@Deprecated]
  - `diskCacheExtraOptions(int, int, BitmapProcessor)` (line 232)
  - `taskExecutor(Executor)` (line 253)
  - `taskExecutorForCachedImages(Executor)` (line 280)
  - `threadPoolSize(int)` (line 293)
  - `threadPriority(int)` (line 307)
  - `denyCacheImageMultipleSizesInMemory()` (line 332)
  - `tasksProcessingOrder(QueueProcessingType)` (line 341)
  - `memoryCacheSize(int)` (line 358)
  - `memoryCacheSizePercentage(int)` (line 378)
  - `memoryCache(MemoryCache)` (line 402)
  - `discCacheSize(int)` (line 413) [@Deprecated]
  - `diskCacheSize(int)` (line 425)
  - `discCacheFileCount(int)` (line 438) [@Deprecated]
  - `diskCacheFileCount(int)` (line 450)
  - `discCacheFileNameGenerator(FileNameGenerator)` (line 463) [@Deprecated]
  - `diskCacheFileNameGenerator(FileNameGenerator)` (line 473)
  - `discCache(DiskCache)` (line 484) [@Deprecated]
  - `diskCache(DiskCache)` (line 502)
  - `imageDownloader(ImageDownloader)` (line 520)
  - `imageDecoder(ImageDecoder)` (line 531)
  - `defaultDisplayImageOptions(DisplayImageOptions)` (line 542)
  - `writeDebugLogs()` (line 552)
  - `build()` (line 558)

- **Constants defined in `Builder`:**
  - `DEFAULT_THREAD_POOL_SIZE` (line 158) — `public static final int`, value `3`
  - `DEFAULT_THREAD_PRIORITY` (line 160) — `public static final int`, value `Thread.NORM_PRIORITY - 2`
  - `DEFAULT_TASK_PROCESSING_TYPE` (line 162) — `public static final QueueProcessingType`, value `QueueProcessingType.FIFO`

### Findings

#### A27-7: `createDefault()` Javadoc contains a typo in a listed default value name [INFO]
- **File:** `ImageLoaderConfiguration.java`, Line 112
- **Description:** The Javadoc bullet reads "maxImageWidthForDikcCache = unlimited". The correct field name is `maxImageWidthForDiskCache`. The transposition "Dikc" is clearly a typo. While the described behaviour (unlimited) is accurate, the misspelled field name makes the documentation harder to cross-reference with the actual fields.

#### A27-8: `threadPriority()` Javadoc implies invalid values are rejected but the implementation silently clamps them [LOW]
- **File:** `ImageLoaderConfiguration.java`, Lines 302-322
- **Description:** The Javadoc states: "Sets the priority for image loading threads. Should be NOT greater than `Thread#MAX_PRIORITY` or less than `Thread#MIN_PRIORITY`". The phrasing "Should be NOT greater/less than" is a soft contract suggesting callers are responsible for staying within bounds. However, the implementation (lines 312-321) silently clamps any out-of-range value to `Thread.MIN_PRIORITY` or `Thread.MAX_PRIORITY` without throwing or warning. A caller reading the doc may not realise that a value of 11 (above `MAX_PRIORITY = 10`) is silently truncated to 10 rather than being rejected. The documented contract and the actual behaviour diverge: the doc implies caller responsibility for range, but the implementation absorbs any value silently.

#### A27-9: `Builder` constructor is undocumented [INFO]
- **File:** `ImageLoaderConfiguration.java`, Line 195
- **Description:** The public `Builder(Context)` constructor has no Javadoc. The implementation stores `context.getApplicationContext()` rather than the passed context directly. This is a meaningful behaviour detail (it strips Activity context to prevent leaks) that is not communicated to callers through any documentation on the constructor.
