# Pass 3 Findings: A43

## File: LibPercentProgress/src/main/java/com/natasa/progresspercent/BaseProgressView.java

### Reading Evidence

- Class: `BaseProgressView` (package-private abstract class extending `View`)
- Public Methods:
  - `setOnProgressTrackListener(OnProgressTrackListener listener)` (line 53)
  - `BaseProgressView(Context context)` constructor (line 59)
  - `BaseProgressView(Context context, AttributeSet attrs)` constructor (line 65)
  - `BaseProgressView(Context context, AttributeSet attrs, int defStyleAttr)` constructor (line 73)
  - `getProgress()` (line 149)
  - `setProgress(int progress)` (line 154)
  - `resetProgress()` (line 174)
  - `setTextSize(int textSize)` (line 179)
  - `setTypeface(String typefacePath)` (line 184)
  - `getProgressColor()` (line 190)
  - `setProgressColor(int color)` (line 194)
  - `getBackgroundColor()` (line 200)
  - `setBackgroundColor(int backgroundColor)` (line 204)
  - `getTextColor()` (line 210)
  - `setTextColor(int textColor)` (line 214)
  - `setProgressStrokeWidth(int strokeWidth)` (line 220)
  - `setBackgroundStrokeWidth(int strokeWidth)` (line 225)
  - `setRoundEdge(boolean isRoundEdge)` (line 230)
  - `setShadow(boolean isShadowed)` (line 235)
- Constants/Types:
  - `protected int maximum_progress = 100` (line 35)
  - `protected float backgroundStrokeWidth = 3f` (line 38)
  - `protected float strokeWidth = 5f` (line 38)
  - `protected int PADDING = 0` (line 39)
  - `protected int textSize = 26` (line 43)
  - `protected String typeface_path = "Roboto-Light.ttf"` (line 45)

### Findings

#### A43-1: No Javadoc on `setOnProgressTrackListener` [INFO]
- File: BaseProgressView.java, Line: 53
- Description: The method registers a listener to receive progress update and completion callbacks. No Javadoc is present. The parameter `listener` and its purpose are undocumented.

#### A43-2: No Javadoc on constructors (three-argument form silently skips `initTypedArray`) [INFO]
- File: BaseProgressView.java, Lines: 59, 65, 73
- Description: None of the three constructors has Javadoc. The two-argument constructor (line 65) calls both `initTypedArray` and `init`, reading XML attributes. The three-argument constructor (line 73) skips `initTypedArray`, so XML attributes are ignored. This divergence in behavior between constructors is not documented anywhere.

#### A43-3: No Javadoc on `getProgress` — return type mismatch with field [INFO]
- File: BaseProgressView.java, Line: 149
- Description: `getProgress()` is declared to return `float` but the field `progress` is of type `int` (line 34). There is no Javadoc. Because the value is widened on return, callers may be misled about the actual storage type. The absence of a doc comment means this implicit widening is invisible to API consumers.

#### A43-4: No Javadoc on `setProgress` — silent clamping behavior undocumented [INFO]
- File: BaseProgressView.java, Line: 154
- Description: `setProgress` silently clamps the input to `maximum_progress` (currently 100) when the supplied value exceeds it (see `setProgressInView`, line 160). It also fires `OnProgressTrackListener.onProgressUpdate` and, at or above maximum, `onProgressFinish`. None of these side effects are documented.

#### A43-5: No Javadoc on `resetProgress` [INFO]
- File: BaseProgressView.java, Line: 174
- Description: `resetProgress` sets progress to 0 and triggers a view redraw. No Javadoc exists. The method also fires the listener callback via the internal `setProgress` path, which is a non-obvious side effect that is undocumented.

#### A43-6: No Javadoc on `setTextSize`, `setTypeface`, `setProgressColor`, `setBackgroundColor`, `setTextColor`, `setProgressStrokeWidth`, `setBackgroundStrokeWidth`, `setRoundEdge`, `setShadow` — all call `init(context)` which has a destructive side effect in subclasses [MEDIUM]
- File: BaseProgressView.java, Lines: 179, 184, 194, 204, 214, 220, 225, 230, 235
- Description: Every one of these property-setter methods calls `init(context)` after updating its field. In `CircularProgress.init()` (CircularProgress.java line 77), `init` unconditionally calls `setProgress(0)`, resetting the current progress value to zero. A caller who invokes, for example, `setProgressColor(...)` after setting a progress value will lose that progress silently. None of these nine setter methods carry any Javadoc, and this critical side effect is completely undocumented at both the setter level and the `init` level. Severity is MEDIUM because it causes silent data loss at runtime that is invisible from the public API surface.

#### A43-7: No Javadoc on `getProgressColor`, `getBackgroundColor`, `getTextColor` [INFO]
- File: BaseProgressView.java, Lines: 190, 200, 210
- Description: The three getter methods have no Javadoc. While their behavior is straightforward (return the stored field value), they are part of the public API and are undocumented.

---

## File: LibPercentProgress/src/main/java/com/natasa/progresspercent/CircularProgress.java

### Reading Evidence

- Class: `CircularProgress` (public, extends `BaseProgressView`)
- Public Methods:
  - `CircularProgress(Context context)` constructor (line 58)
  - `CircularProgress(Context context, AttributeSet attrs)` constructor (line 63)
  - `CircularProgress(Context context, AttributeSet attrs, int defStyle)` constructor (line 68)
- Protected Methods (non-public but audited for completeness):
  - `init(Context ctx)` (line 74, overrides abstract)
  - `initBackgroundColor()` (line 84)
  - `initForegroundColor()` (line 89)
  - `initTextColor()` (line 94)
  - `onDraw(Canvas canvas)` (line 100)
  - `onMeasure(int widthMeasureSpec, int heightMeasureSpec)` (line 141)
  - `setDimensions(int widthMeasureSpec, int heightMeasureSpec)` (line 155)
- Constants/Types:
  - `private static final int ANGLE_360 = 360` (line 38)
  - `private final float ANGLE_180 = 180f` (line 49)
  - `private final int angTxtMargin = 5` (line 50)
  - `private final int startAngle0 = -80` (line 51)
  - `private final int startAngle1 = -92` (line 52)

### Findings

#### A43-8: No Javadoc on any constructor [INFO]
- File: CircularProgress.java, Lines: 58, 63, 68
- Description: None of the three constructors carries Javadoc. They delegate to the superclass constructors, whose behavior differences (XML attribute parsing only in the two-argument form) are likewise undocumented in the base class (see A43-2).

#### A43-9: `init` unconditionally resets progress to 0 — undocumented destructive side effect [MEDIUM]
- File: CircularProgress.java, Line: 77
- Description: `CircularProgress.init()` calls `setProgress(0)` on every invocation. Because all nine property-setter methods inherited from `BaseProgressView` call `init(context)`, any property change after a progress value has been set will silently zero the progress. This is not documented at the `init` level or at any of the calling setter levels. The relationship between a visual-property setter and a data-state reset is non-obvious and constitutes a documentation gap with real runtime consequences. (Related to A43-6.)

#### A43-10: No Javadoc on `setDimensions` [INFO]
- File: CircularProgress.java, Line: 155
- Description: `setDimensions` is `protected` (not public), but it is accessible to subclasses and is part of the extension surface. It computes the smaller of width and height, calls `setMeasuredDimension` to enforce a square constraint, and returns the resulting dimension. No Javadoc exists explaining the square-enforcement contract or what the return value represents.

---

## File: LibPercentProgress/src/main/java/com/natasa/progresspercent/LineProgress.java

### Reading Evidence

- Class: `LineProgress` (public, extends `BaseProgressView`)
- Public Methods:
  - `LineProgress(Context context)` constructor (line 43)
  - `LineProgress(Context context, AttributeSet attrs)` constructor (line 47)
  - `LineProgress(Context context, AttributeSet attrs, int defStyle)` constructor (line 51)
- Protected Methods:
  - `init(Context context)` (line 56, overrides abstract)
  - `initForegroundColor()` (line 68)
  - `initTextColor()` (line 73)
  - `initBackgroundColor()` (line 81)
  - `onDraw(Canvas canvas)` (line 86)
  - `onSizeChanged(int w, int h, int oldw, int oldh)` (line 119)
  - `onMeasure(int widthMeasureSpec, int heightMeasureSpec)` (line 130)
- Constants/Types: None beyond those inherited from `BaseProgressView`.

### Findings

#### A43-11: No Javadoc on any constructor [INFO]
- File: LineProgress.java, Lines: 43, 47, 51
- Description: None of the three constructors carries Javadoc. They delegate to the superclass constructors with no additional documentation.

#### A43-12: `onSizeChanged` calls `setMeasuredDimension` outside of `onMeasure` — undocumented non-standard usage [LOW]
- File: LineProgress.java, Line: 126
- Description: `LineProgress.onSizeChanged` calls `setMeasuredDimension(width, height)` directly (line 126). `setMeasuredDimension` is intended to be called only from within `onMeasure`; calling it from `onSizeChanged` is not a documented Android pattern and may have unintended layout effects during certain measure/layout passes. There is no comment or Javadoc explaining why this call is made here, making it impossible for a maintainer to distinguish intentional design from a bug. Severity is LOW because the practical rendering impact is contained but the pattern is misleading and undocumented.

#### A43-13: Commented-out code in `initTextColor`, `drawRects`, and `onMeasure` — no explanation [INFO]
- File: LineProgress.java, Lines: 75-77, 98-99, 114, 132
- Description: Multiple blocks of code are commented out with no accompanying explanation of why they were disabled or whether they are intended to be re-enabled. Specifically: the typeface override in `initTextColor` (lines 75-77), text-bounds measurement in `drawRects` (lines 98-99), the `canvas.drawText` call that would render the percentage label (line 114), and the `setPadding` call in `onMeasure` (line 132). The absence of any explanatory comment leaves maintainers unable to determine whether the disabled text rendering is intentional product behavior or incomplete work. This is an INFO-level documentation gap rather than a code correctness issue.

#### A43-14: `LineProgress.init` resets `progress` to 0 directly — undocumented side effect consistent with A43-9 [INFO]
- File: LineProgress.java, Line: 58
- Description: `LineProgress.init` sets `progress = 0` directly (line 58). As with `CircularProgress`, all inherited property-setter methods call `init(context)`, meaning any visual property change resets the progress value to zero. This side effect is not documented. (See also A43-6 and A43-9.)
