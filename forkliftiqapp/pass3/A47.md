# Pass 3 Findings: A47

## File: ShockEventsDb.java
**Full path:** `app/src/main/java/au/com/collectiveintelligence/fleetiq360/WebService/BLE/ShockEventsDb.java`

### Reading Evidence
- Class: `ShockEventsDb` (extends `RealmObject`)
- Public Methods: none — all methods (`readData`, `removeData`, `alreadySaved`, `saveData`) are package-private (no access modifier); `getMatchingEvents` is `private static`
- Public Fields: `mac_address` (line 15), `time` (line 16), `magnitude` (line 17)
- Constants/Types: none
- Package-private Methods (included for completeness):
  - `readData(Realm realm)` (line 19)
  - `removeData(Realm realm, SaveShockEventParameter parameter)` (line 23)
  - `alreadySaved(ShockEventsItem result)` (line 36)
  - `saveData(ShockEventsItem result)` (line 46)
- Private Methods:
  - `getMatchingEvents(Realm realm, Date time, String macAddress)` (line 68)

### Findings

#### A47-1: No Javadoc on any method in ShockEventsDb [INFO]
- File: `ShockEventsDb.java`, Lines: 19, 23, 36, 46, 68
- Description: None of the methods in `ShockEventsDb` have any Javadoc or inline documentation. The methods `readData`, `removeData`, `alreadySaved`, and `saveData` are package-private and directly manipulate Realm database state (including deleting records). The absence of documentation means the deduplication logic in `saveData` (which first deletes any matching event before inserting the new one) and the null-guard behaviour in `alreadySaved` and `removeData` are entirely unexplained. While these methods are not `public`, they are the primary API surface of the class and are consumed by other classes in the same package. Javadoc on package-private methods is strongly recommended for a persistence layer.

#### A47-2: Public fields on RealmObject have no documentation [INFO]
- File: `ShockEventsDb.java`, Lines: 15–17
- Description: The three public fields `mac_address`, `time`, and `magnitude` carry no Javadoc or field-level comments. In particular `magnitude` is a raw `long` with no documented unit, scale, or origin. The sibling class `ShockEventsItem` uses the same field name and applies the formula `GFORCE_COEFFICIENT * Math.sqrt(magnitude)` to convert it to g-force, implying the field stores a squared or raw sensor value — but this is entirely undocumented in `ShockEventsDb`.

---

## File: ShockEventsItem.java
**Full path:** `app/src/main/java/au/com/collectiveintelligence/fleetiq360/WebService/BLE/ShockEventsItem.java`

### Reading Evidence
- Class: `ShockEventsItem`
- Public Methods:
  - `gForce()` (line 19) — returns `double`
- Package-private Methods:
  - `calculateImpactLevel(int threshold)` (line 13)
- Public Fields: `mac_address` (line 8), `time` (line 9), `level` (line 11)
- Package-private Fields: `magnitude` (line 10)
- Constants:
  - `GFORCE_COEFFICIENT = 0.00388` (line 6, `private static final double`)
- Types/Enums:
  - `ImpactLevel` enum (line 23): values `RED`, `AMBER`, `BLUE`

### Findings

#### A47-3: No Javadoc on public method gForce() [INFO]
- File: `ShockEventsItem.java`, Line: 19
- Description: The only public method in the class, `gForce()`, has no Javadoc. The method applies the formula `GFORCE_COEFFICIENT * Math.sqrt(magnitude)` where `GFORCE_COEFFICIENT` is `0.00388`. The physical meaning of the coefficient, the units of the `magnitude` field, and the unit of the return value (implied to be g-force in units of g) are entirely undocumented. A caller cannot determine from the method signature or any comment whether the result is in m/s², g, or some other unit. This is a meaningful omission for a safety-related measurement.

#### A47-4: GFORCE_COEFFICIENT constant is undocumented [INFO]
- File: `ShockEventsItem.java`, Line: 6
- Description: The constant `GFORCE_COEFFICIENT = 0.00388` has no comment explaining its derivation, units, or the sensor/hardware specification it corresponds to. Because impact severity directly drives business logic (ImpactLevel classification) and potentially regulatory or safety reporting, the origin of this coefficient should be documented to allow future maintainers to verify or update it if hardware changes.

#### A47-5: ImpactLevel enum values have no documentation [INFO]
- File: `ShockEventsItem.java`, Lines: 23–27
- Description: The `ImpactLevel` enum defines `RED`, `AMBER`, and `BLUE` with no Javadoc on the enum type or its values. The meaning of the colour levels (severity ordering, what actions they trigger, whether they correspond to a regulatory or customer-defined threshold scheme) is undocumented. The `calculateImpactLevel` method establishes that `RED > threshold*10` and `AMBER > threshold*5`, but these thresholds and their relationship to the level names appear nowhere in documentation.

#### A47-6: calculateImpactLevel threshold semantics are undocumented [INFO]
- File: `ShockEventsItem.java`, Line: 13
- Description: The package-private method `calculateImpactLevel(int threshold)` applies `threshold * 10` for RED and `threshold * 5` for AMBER against the raw `magnitude` field, but there is no comment explaining the unit or expected range of `threshold`, why the multipliers 10 and 5 are used, or what the `magnitude` field's unit is. Given that the result drives safety classification of forklift impact events, the lack of any explanation of the calculation is a documentation gap with potential safety implications.

#### A47-7: magnitude field is package-private and undocumented [INFO]
- File: `ShockEventsItem.java`, Line: 10
- Description: The field `magnitude` has no access modifier (package-private) and no Javadoc or comment. It is used in both `gForce()` and `calculateImpactLevel()` as a raw numeric value, but its unit, expected range, and how it is populated are entirely undocumented.

---

## File: DriverStatsItem.java
**Full path:** `app/src/main/java/au/com/collectiveintelligence/fleetiq360/WebService/DriverStatsItem.java`

### Reading Evidence
- Class: `DriverStatsItem` (implements `Serializable`)
- Public Methods:
  - `DriverStatsItem()` — default constructor (line 14)
  - `DriverStatsItem(JSONObject jsonObject)` — JSON constructor, throws `JSONException` (line 17)
- Public Fields: `field` (line 10), `object` (line 11), `value` (line 12)
- Constants/Types: none
- Enums: none

### Findings

#### A47-8: No Javadoc on DriverStatsItem class or any of its members [INFO]
- File: `DriverStatsItem.java`, Lines: 8, 14, 17
- Description: The class `DriverStatsItem`, its two constructors, and its three public fields (`field`, `object`, `value`) all lack any Javadoc or inline comments. The field names are generic (`field`, `object`, `value`) and give no indication of the JSON API schema they represent, the domain concept they model, or the expected format/range of values. A reader has no way to know from this file alone what a "driver stats item" is, what server endpoint produces it, or what the three string fields represent semantically.

#### A47-9: JSONObject constructor silently ignores null jsonObject [INFO]
- File: `DriverStatsItem.java`, Lines: 17–37
- Description: The constructor `DriverStatsItem(JSONObject jsonObject)` wraps all field population in an `if (jsonObject != null)` guard (line 19), so passing `null` constructs a valid but entirely empty object (all fields remain `null`) without any exception or documented contract. This silent null-tolerance is not documented via `@param` Javadoc or an inline comment, meaning callers cannot determine whether passing `null` is an intended use case or a silent failure mode. Given that the constructor is declared `throws JSONException`, callers may reasonably expect it to always produce a fully-populated object, or to throw on invalid input.
