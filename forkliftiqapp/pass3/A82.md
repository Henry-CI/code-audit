# Pass 3 Findings: A82

## File: UserInfoPrefs.java
**Full path:** `app/src/main/java/au/com/collectiveintelligence/fleetiq360/model/UserInfoPrefs.java`

### Reading Evidence
- Class: `UserInfoPrefs` (extends `ModelPrefs`)
- Public Methods: none (the only non-private method, `getUserInfoPrefs()`, is package-private, not public)
- Constants/Types:
  - `TAG` (private static String, line 14) — value: `UserInfoPrefs.class.getSimpleName()`
  - `USER_INFO_PREFS_KEY` (private static String, line 15) — value: `"usr_info_key"`

### Findings

#### A82-1: Class-level Javadoc is absent; creation comment is not a Javadoc block [INFO]
- File: `UserInfoPrefs.java`, Line: 8–10
- Description: The only comment present is `/** Created by Administrator on 2017/6/10. */`. This is a Javadoc-formatted block but contains only a creation timestamp with no description of the class's purpose, responsibilities, or relationship to the parent class `ModelPrefs`. The class has no public methods to document individually, but the class itself lacks meaningful documentation.

#### A82-2: `USER_INFO_PREFS_KEY` constant is defined but unused within the file [INFO]
- File: `UserInfoPrefs.java`, Line: 15
- Description: The constant `USER_INFO_PREFS_KEY = "usr_info_key"` is declared private but is never referenced anywhere in the file. The package-private method `getUserInfoPrefs()` uses the hard-coded string literal `"usrInfoPrefs"` for the SharedPreferences name instead of this constant. This is a documentation gap in that the purpose of the constant is undocumented and its relationship (if any) to the preferences file name is not explained. No Javadoc or inline comment clarifies the discrepancy.

---

## File: EquipmentDriverAccessPresenter.java
**Full path:** `app/src/main/java/au/com/collectiveintelligence/fleetiq360/presenter/EquipmentDriverAccessPresenter.java`

### Reading Evidence
- Class: `EquipmentDriverAccessPresenter`
- Public Methods:
  - `EquipmentDriverAccessPresenter(BaseFragment ui)` — constructor, line 40
  - `createAndSaveSession()` — line 44
- Private Methods (not subject to public-API Javadoc requirement, listed for completeness):
  - `startSession()` — line 106
  - `getEquipmentItem(int unitId)` — line 117
  - `onSessionNotStopped(final SessionResult sessionResult)` — line 133
  - `deleteSession(final int sessionId)` — line 209
  - `stopSession(SessionResult sessionResult)` — line 237
  - `resumeSession(SessionResult result, EquipmentItem equipmentItem)` — line 275
  - `onSessionSaved()` — line 282
- Constants/Types: none defined in this class

### Findings

#### A82-3: Constructor `EquipmentDriverAccessPresenter(BaseFragment ui)` is undocumented [INFO]
- File: `EquipmentDriverAccessPresenter.java`, Line: 40
- Description: The public constructor has no Javadoc comment. There is no documentation describing the `ui` parameter, its expected state, or any preconditions (e.g., the fragment must be attached to an activity).

#### A82-4: Public method `createAndSaveSession()` is undocumented [INFO]
- File: `EquipmentDriverAccessPresenter.java`, Line: 44
- Description: The method has no Javadoc comment. Its behaviour is non-trivial: it reads `MyCommonValue.currentEquipmentItem`, builds a `SessionStartParameter`, makes an asynchronous web call, and handles multiple distinct failure modes (HTTP 400 with parseable body, HTTP 400 without parseable body, HTTP 502, and any other network error that triggers offline session creation). None of this is described in any comment. The offline fallback path (lines 88–99) in particular — where a temporary session result is created and saved locally despite the network failure — is a significant undocumented behaviour that a maintainer could easily misunderstand as a bug.

#### A82-5: No class-level Javadoc on `EquipmentDriverAccessPresenter` [INFO]
- File: `EquipmentDriverAccessPresenter.java`, Line: 37
- Description: The class has no Javadoc or any other comment explaining its role in the MVP architecture, which UI fragment it is designed to support, or its lifecycle expectations.

---

## File: EquipmentSelectForkPresenter.java
**Full path:** `app/src/main/java/au/com/collectiveintelligence/fleetiq360/presenter/EquipmentSelectForkPresenter.java`

### Reading Evidence
- Class: `EquipmentSelectForkPresenter`
- Public Fields:
  - `ui` (public `EquipmentListFragment`, line 22)
- Public Methods:
  - `EquipmentSelectForkPresenter(EquipmentListFragment ui)` — constructor, line 25
  - `getEquipmentList()` — line 30
  - `showImage(String url, ImageView imageView)` — line 57
- Nested Interface (public):
  - `ShowResultCallBack` — line 75
    - `void uiUpdateEquipmentList(GetEquipmentResultArray resultArray)` — line 76
- Private Fields:
  - `uiCb` (private `ShowResultCallBack`, line 23)
- Constants/Types: none defined

### Findings

#### A82-6: Constructor `EquipmentSelectForkPresenter(EquipmentListFragment ui)` is undocumented [INFO]
- File: `EquipmentSelectForkPresenter.java`, Line: 25
- Description: The public constructor has no Javadoc. The parameter `ui` is expected to implement `ShowResultCallBack` (the constructor casts it on line 27); this implicit requirement is nowhere documented and could cause a runtime `ClassCastException` if a caller passes an `EquipmentListFragment` subclass that does not implement the interface.

#### A82-7: Public method `getEquipmentList()` is undocumented [INFO]
- File: `EquipmentSelectForkPresenter.java`, Line: 30
- Description: The method has no Javadoc. Its behaviour includes an offline fallback: on network failure it attempts to retrieve a cached list from `EquipmentDb` and, if the cache is also absent, calls `uiUpdateEquipmentList(null)` before showing an error dialog. The fact that the callback may receive `null` is a contract detail that callers must handle; it is not documented anywhere.

#### A82-8: Public method `showImage(String url, ImageView imageView)` is undocumented [INFO]
- File: `EquipmentSelectForkPresenter.java`, Line: 57
- Description: The method has no Javadoc. Notably it calls `UserPhotoFragment.SSLCertificateHandler.nuke()` (line 71), which disables SSL certificate validation globally for the process. This is a security-relevant side effect that is completely undocumented. A maintainer reading only the method signature would have no indication that calling it affects the SSL trust configuration of the entire application.

#### A82-9: `showImage` calls `SSLCertificateHandler.nuke()` — security-relevant behaviour is undocumented [MEDIUM]
- File: `EquipmentSelectForkPresenter.java`, Line: 71
- Description: `UserPhotoFragment.SSLCertificateHandler.nuke()` is invoked unconditionally on every call to `showImage()`. Based on the naming convention common in Android codebases, this method bypasses SSL certificate validation. This is a security-relevant action with process-wide scope. No comment, Javadoc, or inline explanation is present to explain why this is necessary, whether it is intentional, what the expected lifetime of the effect is, or what threat model trade-off was accepted. The absence of documentation elevates the risk that future maintainers will not recognise the security implication. Severity is rated MEDIUM because the missing documentation obscures a behaviour with a concrete security impact (trust-all SSL) rather than merely a functional one.

#### A82-10: Public field `ui` on `EquipmentSelectForkPresenter` is undocumented and unnecessarily public [INFO]
- File: `EquipmentSelectForkPresenter.java`, Line: 22
- Description: The field `ui` is declared `public` with no Javadoc. Exposing the backing fragment reference as a public field instead of a private field with an accessor removes encapsulation and provides no documentation about expected lifecycle or nullability. No comment explains the design decision.

#### A82-11: Interface `ShowResultCallBack` and its method `uiUpdateEquipmentList` are undocumented [INFO]
- File: `EquipmentSelectForkPresenter.java`, Lines: 75–77
- Description: The nested public interface `ShowResultCallBack` and its sole method `uiUpdateEquipmentList(GetEquipmentResultArray resultArray)` have no Javadoc. Critically, the contract that `resultArray` may be `null` (as established by the `onFailed` path in `getEquipmentList()` at line 49) is not documented on either the interface method or the presenter method that calls it. Implementors of the interface have no documented indication they must handle a null argument.
