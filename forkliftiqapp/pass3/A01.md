# Pass 3 Findings: A01

---

## File: LibCircleImageView/src/main/java/de/hdodenhof/circleimageview/CircleImageView.java

### Reading Evidence

- **Class:** `CircleImageView extends ImageView` (line 39)
- **Public Methods:**
  - `CircleImageView(Context context)` (line 78) — constructor
  - `CircleImageView(Context context, AttributeSet attrs)` (line 84) — constructor
  - `CircleImageView(Context context, AttributeSet attrs, int defStyle)` (line 88) — constructor
  - `init()` (line 103)
  - `getScaleType()` (line 114) — `@Override`
  - `setScaleType(ScaleType scaleType)` (line 119) — `@Override`
  - `setAdjustViewBounds(boolean adjustViewBounds)` (line 126) — `@Override`
  - `onDraw(Canvas canvas)` (line 133) — `@Override` protected
  - `onSizeChanged(int w, int h, int oldw, int oldh)` (line 153) — `@Override` protected
  - `setPadding(int left, int top, int right, int bottom)` (line 159) — `@Override`
  - `setPaddingRelative(int start, int top, int end, int bottom)` (line 165) — `@Override`
  - `getBorderColor()` (line 170)
  - `setBorderColor(@ColorInt int borderColor)` (line 174)
  - `setBorderColorResource(@ColorRes int borderColorRes)` (line 188) — `@Deprecated`
  - `getFillColor()` (line 200) — `@Deprecated`
  - `setFillColor(@ColorInt int fillColor)` (line 213) — `@Deprecated`
  - `setFillColorResource(@ColorRes int fillColorRes)` (line 233) — `@Deprecated`
  - `getBorderWidth()` (line 237)
  - `setBorderWidth(int borderWidth)` (line 241)
  - `isBorderOverlay()` (line 250)
  - `setBorderOverlay(boolean borderOverlay)` (line 254)
  - `isDisableCircularTransformation()` (line 263)
  - `setDisableCircularTransformation(boolean disableCircularTransformation)` (line 267)
  - `setImageBitmap(Bitmap bm)` (line 277) — `@Override`
  - `setImageDrawable(Drawable drawable)` (line 283) — `@Override`
  - `setImageResource(@DrawableRes int resId)` (line 289) — `@Override`
  - `setImageURI(Uri uri)` (line 295) — `@Override`
  - `setColorFilter(ColorFilter cf)` (line 301) — `@Override`
  - `getColorFilter()` (line 312) — `@Override`
  - `onMeasure(int widthMeasureSpec, int heightMeasureSpec)` (line 439) — `@Override` protected

- **Constants/Fields (private static final):**
  - `SCALE_TYPE = ScaleType.CENTER_CROP` (line 41)
  - `BITMAP_CONFIG = Bitmap.Config.ARGB_8888` (line 43)
  - `COLORDRAWABLE_DIMENSION = 2` (line 44)
  - `DEFAULT_BORDER_WIDTH = 0` (line 46)
  - `DEFAULT_BORDER_COLOR = Color.BLACK` (line 47)
  - `DEFAULT_FILL_COLOR = Color.TRANSPARENT` (line 48)
  - `DEFAULT_BORDER_OVERLAY = false` (line 49)

### Findings

#### A01-1: `init()` is undocumented [INFO]
- **File:** `LibCircleImageView/src/main/java/de/hdodenhof/circleimageview/CircleImageView.java`, Line: 103
- **Description:** The public method `init()` has no Javadoc. It sets the forced scale type (`CENTER_CROP`), marks the view as ready, and flushes any pending `setup()` call queued before the view was ready. This method is also unusual as a public initializer on a `View` subclass (callers could invoke it redundantly); lack of documentation leaves its intended usage contract unclear.

#### A01-2: `setScaleType()` override is undocumented — throws unconditionally for non-`CENTER_CROP` values [INFO]
- **File:** `LibCircleImageView/src/main/java/de/hdodenhof/circleimageview/CircleImageView.java`, Line: 119
- **Description:** `setScaleType()` always throws `IllegalArgumentException` unless the caller passes `CENTER_CROP`. This is a significant deviation from the `ImageView` contract and is not documented with any Javadoc or `@throws` tag. Callers relying on the parent-class API have no indication that this restriction exists.

#### A01-3: `setAdjustViewBounds()` override is undocumented — always throws [INFO]
- **File:** `LibCircleImageView/src/main/java/de/hdodenhof/circleimageview/CircleImageView.java`, Line: 126
- **Description:** `setAdjustViewBounds(true)` unconditionally throws `IllegalArgumentException`. Passing `false` is silently accepted. Neither behavior is documented. There is no Javadoc and no `@throws` tag to warn callers.

#### A01-4: `getBorderColor()` is undocumented [INFO]
- **File:** `LibCircleImageView/src/main/java/de/hdodenhof/circleimageview/CircleImageView.java`, Line: 170
- **Description:** No Javadoc. Returns the current border color as a packed ARGB integer. No `@return` tag.

#### A01-5: `setBorderColor()` is undocumented [INFO]
- **File:** `LibCircleImageView/src/main/java/de/hdodenhof/circleimageview/CircleImageView.java`, Line: 174
- **Description:** No Javadoc. Accepts a `@ColorInt` packed color, no-ops if the value is unchanged, updates the border paint, and calls `invalidate()`. No `@param` tag.

#### A01-6: `getBorderWidth()` is undocumented [INFO]
- **File:** `LibCircleImageView/src/main/java/de/hdodenhof/circleimageview/CircleImageView.java`, Line: 237
- **Description:** No Javadoc. Returns border width in pixels. No `@return` tag.

#### A01-7: `setBorderWidth()` is undocumented [INFO]
- **File:** `LibCircleImageView/src/main/java/de/hdodenhof/circleimageview/CircleImageView.java`, Line: 241
- **Description:** No Javadoc. Sets the border width in pixels, no-ops if unchanged, then calls `setup()` which triggers a full relayout and redraw. No `@param` tag.

#### A01-8: `isBorderOverlay()` is undocumented [INFO]
- **File:** `LibCircleImageView/src/main/java/de/hdodenhof/circleimageview/CircleImageView.java`, Line: 250
- **Description:** No Javadoc. Returns whether the border is drawn overlapping the image (true) or inset (false). No `@return` tag.

#### A01-9: `setBorderOverlay()` is undocumented [INFO]
- **File:** `LibCircleImageView/src/main/java/de/hdodenhof/circleimageview/CircleImageView.java`, Line: 254
- **Description:** No Javadoc. No `@param` tag.

#### A01-10: `isDisableCircularTransformation()` is undocumented [INFO]
- **File:** `LibCircleImageView/src/main/java/de/hdodenhof/circleimageview/CircleImageView.java`, Line: 263
- **Description:** No Javadoc. No `@return` tag.

#### A01-11: `setDisableCircularTransformation()` is undocumented [INFO]
- **File:** `LibCircleImageView/src/main/java/de/hdodenhof/circleimageview/CircleImageView.java`, Line: 267
- **Description:** No Javadoc. When set to `true`, the view delegates drawing to the superclass `ImageView` (disabling the circular crop). When set to `false`, the bitmap is re-initialized for circular rendering. No `@param` tag.

#### A01-12: `onMeasure()` comment is misleading [LOW]
- **File:** `LibCircleImageView/src/main/java/de/hdodenhof/circleimageview/CircleImageView.java`, Line: 441
- **Description:** The inline comment `// Snap to width` is inaccurate. The implementation calls `setMeasuredDimension(getMeasuredHeight(), getMeasuredHeight())` — it snaps **both** dimensions to the **measured height**, not to the width. The comment contradicts the actual behavior and could mislead future maintainers. This is a low-severity inaccuracy but could cause confusion when diagnosing layout sizing bugs.

#### A01-13: Three constructors are undocumented [INFO]
- **File:** `LibCircleImageView/src/main/java/de/hdodenhof/circleimageview/CircleImageView.java`, Lines: 78, 84, 88
- **Description:** All three public constructors (`Context`, `Context+AttributeSet`, `Context+AttributeSet+defStyle`) lack Javadoc. The three-argument constructor performs non-trivial work: it reads XML styled attributes (`civ_border_width`, `civ_border_color`, `civ_border_overlay`, `civ_fill_color`) and calls `init()`. None of this is documented.

---

## File: LibCommon/src/main/java/com/yy/libcommon/BaseActivity.java

### Reading Evidence

- **Class:** `BaseActivity extends AppCompatActivity implements BaseController, FragmentInterface.FragmentHandle` (line 28)
- **Public Methods:**
  - `getScreenWidth()` (line 40)
  - `backToHome()` (line 48)
  - `onBackPressed()` (line 56) — `@Override`
  - `addFragment(@IdRes int containerViewId, Fragment fragment, String tag)` (line 75) — `@Override`
  - `addFragment(@IdRes int containerViewId, Fragment fragment, String tag, boolean addStack)` (line 83)
  - `hideFragment(String tag)` (line 95) — `@Override`
  - `removeFragment(String tag)` (line 101)
  - `findFramentByTag(String tag)` (line 107)
  - `showFragment(@IdRes int containerViewId, String tag, String className)` (line 113) — `@Override`
  - `showFragmentWithoutStack(@IdRes int containerViewId, String tag, Fragment fragment)` (line 134)
  - `showFragmentWithStack(@IdRes int containerViewId, String tag, Fragment fragment)` (line 149)
  - `addFragmentWithAnimation(@AnimRes int enter, @AnimRes int exit, @AnimRes int popEnter, @AnimRes int popExit, @IdRes int containerViewId, Fragment fragment, String tag, boolean addStack)` (line 164)
  - `onRequestPermissionsResult(int requestCode, String[] permissions, int[] grantResults)` (line 180) — `@Override`
  - `showDialog(String title, String msg)` (line 186)
  - `hideKeyboard(View view)` (line 254)
  - `runLater(final Runnable runnable, long delayMillis)` (line 292)
  - `setBestOrientation()` (line 306)
  - `getSubFragPermission()` (line 323)
  - `getCurrentFragmentManager()` (line 328) — `@Override`
  - `showToast(String msg)` (line 332)
  - `showDialog(String title, String msg, ErrorDialog.OnErrorCallback callback)` (line 338)
  - `showProgress(String title, String message)` (line 359)
  - `showSavingProgress()` (line 367)
  - `showDeletingProgress()` (line 375)
  - `showLoadingProgress()` (line 384)
  - `updateProgress(String message)` (line 393)
  - `hideProgress()` (line 399)

- **Protected Methods (non-public but relevant):**
  - `initKeyboard()` (line 196) — protected
  - `showProgressDialog()` (line 351) — protected
  - `onSaveInstanceState(Bundle outState)` (line 229) — `@Override` protected
  - `onCreate(Bundle savedInstanceState)` (line 238) — `@Override` protected
  - `onStart()` (line 260) — `@Override` protected
  - `onResume()` (line 267) — `@Override` protected
  - `onPause()` (line 275) — `@Override` protected
  - `onStop()` (line 281) — `@Override` protected
  - `onDestroy()` (line 287) — `@Override` protected

- **Constants/Fields:**
  - `TAG = "BaseActivity"` — private static final (line 30)
  - `isStarted` — protected boolean (line 33)
  - `isResumed` — protected boolean (line 34)
  - `mCustomProgressDialog` — protected field (line 37)
  - `subFragPermission` — protected field (line 38)

### Findings

#### A01-14: Entire `BaseActivity` class has no Javadoc [INFO]
- **File:** `LibCommon/src/main/java/com/yy/libcommon/BaseActivity.java`, Line: 28
- **Description:** The class declaration has no Javadoc comment. There is no description of the class purpose, its role as a base class, its lifecycle assumptions, or the threading model.

#### A01-15: All public methods in `BaseActivity` are undocumented [INFO]
- **File:** `LibCommon/src/main/java/com/yy/libcommon/BaseActivity.java`
- **Description:** None of the 27 public or overriding methods in this class carry a Javadoc comment. The affected methods are:
  - `getScreenWidth()` (line 40)
  - `backToHome()` (line 48)
  - `onBackPressed()` (line 56)
  - `addFragment(containerViewId, fragment, tag)` (line 75)
  - `addFragment(containerViewId, fragment, tag, addStack)` (line 83)
  - `hideFragment(tag)` (line 95)
  - `removeFragment(tag)` (line 101)
  - `findFramentByTag(tag)` (line 107)
  - `showFragment(containerViewId, tag, className)` (line 113)
  - `showFragmentWithoutStack(containerViewId, tag, fragment)` (line 134)
  - `showFragmentWithStack(containerViewId, tag, fragment)` (line 149)
  - `addFragmentWithAnimation(enter, exit, popEnter, popExit, containerViewId, fragment, tag, addStack)` (line 164)
  - `onRequestPermissionsResult(...)` (line 180)
  - `showDialog(title, msg)` (line 186)
  - `hideKeyboard(view)` (line 254)
  - `runLater(runnable, delayMillis)` (line 292)
  - `setBestOrientation()` (line 306)
  - `getSubFragPermission()` (line 323)
  - `getCurrentFragmentManager()` (line 328)
  - `showToast(msg)` (line 332)
  - `showDialog(title, msg, callback)` (line 338)
  - `showProgress(title, message)` (line 359)
  - `showSavingProgress()` (line 367)
  - `showDeletingProgress()` (line 375)
  - `showLoadingProgress()` (line 384)
  - `updateProgress(message)` (line 393)
  - `hideProgress()` (line 399)

#### A01-16: `onBackPressed()` behavior deviates from documented Android contract without explanation [LOW]
- **File:** `LibCommon/src/main/java/com/yy/libcommon/BaseActivity.java`, Line: 56
- **Description:** The standard Android behavior for `onBackPressed()` is to navigate back in the activity/fragment stack. This override sends the user to the device home screen instead (via `ACTION_MAIN` / `CATEGORY_HOME`). The original back-stack logic and a confirmation dialog are commented out. There is no Javadoc explaining this deliberate deviation, leaving subclass authors unaware that pressing Back will exit to the home screen rather than pop the stack.

#### A01-17: `onRequestPermissionsResult()` will throw `NullPointerException` if `subFragPermission` is null [MEDIUM]
- **File:** `LibCommon/src/main/java/com/yy/libcommon/BaseActivity.java`, Line: 182
- **Description:** The method unconditionally calls `subFragPermission.onRequestPermissionsResult(...)` without a null guard. `subFragPermission` is only assigned inside `onCreate()`. If the system delivers a permission result before `onCreate()` completes (an edge case possible under process restoration), this will throw a `NullPointerException`. The method has no Javadoc and no warning about this assumption. This is classified MEDIUM because permission callbacks can arrive during activity reconstruction.

#### A01-18: `setBestOrientation()` name is inaccurate — always forces portrait [LOW]
- **File:** `LibCommon/src/main/java/com/yy/libcommon/BaseActivity.java`, Line: 306
- **Description:** The method name `setBestOrientation()` implies adaptive logic to select an appropriate orientation. The implementation unconditionally calls `setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_PORTRAIT)`. The adaptive logic (which would select landscape for tablets >=7 inches) is entirely commented out. The method name is therefore misleading relative to actual behavior. There is no Javadoc to clarify.

#### A01-19: `runLater()` silently swallows exceptions [LOW]
- **File:** `LibCommon/src/main/java/com/yy/libcommon/BaseActivity.java`, Line: 292
- **Description:** The `Runnable` passed to `runLater()` is executed inside an empty `catch (Exception e)` block (lines 298-300). Any exception thrown by the runnable is silently discarded with no logging. There is no Javadoc warning callers that their runnable exceptions will be suppressed, which may make failures difficult to diagnose.

#### A01-20: `findFramentByTag()` has a typo in the method name [INFO]
- **File:** `LibCommon/src/main/java/com/yy/libcommon/BaseActivity.java`, Line: 107
- **Description:** The method is named `findFramentByTag` (missing the `g` in "Fragment"). While not a documentation issue per se, there is no Javadoc that could otherwise clarify the intent or note the naming error. Subclasses that override or callers that use this method must use the misspelled name.

#### A01-21: `showFragment()` creates a Fragment via reflection without documenting the `className` contract [LOW]
- **File:** `LibCommon/src/main/java/com/yy/libcommon/BaseActivity.java`, Line: 113
- **Description:** The `className` parameter is used with `Class.forName(className).newInstance()` via reflection. There is no Javadoc explaining that the class must be on the classpath, must be a `Fragment` subclass, and must have a no-argument constructor. Exceptions (`InstantiationException`, `IllegalAccessException`, `ClassNotFoundException`) are caught and swallowed with only `printStackTrace()`, meaning silent failure if the class name is wrong. No `@param` or `@throws` documentation exists.

#### A01-22: `showProgressDialog()` silently no-ops when `mCustomProgressDialog` is null [INFO]
- **File:** `LibCommon/src/main/java/com/yy/libcommon/BaseActivity.java`, Line: 351
- **Description:** Protected method `showProgressDialog()` returns immediately if `mCustomProgressDialog` is null (line 353-355). This guard behavior is not documented. Subclasses calling `showProgressDialog()` directly (without first calling `showProgress()`) will get silent no-op behavior with no indication of why nothing appeared.

---

## File: LibCommon/src/main/java/com/yy/libcommon/BaseController.java

### Reading Evidence

- **Class:** `interface BaseController` (line 9)
- **Public Methods (interface members — all implicitly public abstract):**
  - `getCurrentFragmentManager()` (line 11)
  - `isDestroyed()` (line 12)
  - `getSubFragPermission()` (line 14)
- **Constants/Types:** None
- **Commented-out method declarations (lines 16-23):** `showProgress`, `updateProgress`, `hideProgress`, `showToast`, `checkCameraPermissionWithRun`, `checkFilePermissionWithRun`, `requestCameraPermission`, `requestFilePermission`

### Findings

#### A01-23: Interface `BaseController` has no class-level Javadoc [INFO]
- **File:** `LibCommon/src/main/java/com/yy/libcommon/BaseController.java`, Line: 9
- **Description:** The interface has only a creation comment (`// Created by steveyang on 30/11/16.`) but no Javadoc describing its purpose, intended implementors, or the contract it establishes.

#### A01-24: All three interface methods are undocumented [INFO]
- **File:** `LibCommon/src/main/java/com/yy/libcommon/BaseController.java`, Lines: 11, 12, 14
- **Description:** `getCurrentFragmentManager()`, `isDestroyed()`, and `getSubFragPermission()` have no Javadoc. For an interface, method-level documentation is especially important since it defines the contract implementors must fulfill. No `@return` tags are present.

#### A01-25: Commented-out API surface creates misleading interface contract [LOW]
- **File:** `LibCommon/src/main/java/com/yy/libcommon/BaseController.java`, Lines: 16-23
- **Description:** Eight method declarations (`showProgress`, `updateProgress`, `hideProgress`, `showToast`, `checkCameraPermissionWithRun`, `checkFilePermissionWithRun`, `requestCameraPermission`, `requestFilePermission`) are commented out. These methods are actually implemented on `BaseActivity` (e.g., `showProgress` at line 359, `showToast` at line 332, `hideProgress` at line 399) but are not part of the formal `BaseController` interface. Code that depends on the interface type rather than the concrete `BaseActivity` type cannot call these methods, despite them being present. There is no Javadoc or comment explaining the rationale for removing them from the interface, which could mislead maintainers into thinking these features were removed rather than just excluded from the interface contract.
