# Pass 3 Findings: A03

---

## File: LibCommon/src/main/java/com/yy/libcommon/BaseThemedDialog.java

### Reading Evidence

- **Class:** `BaseThemedDialog extends BaseDialog` (public)
- **Public Fields (no Javadoc):**
  - `base_themed_dialog_right_text_view` (line 37) — `public TextView`
  - `base_themed_dialog_left_text_view` (line 38) — `public TextView`
  - `headerRightText` (line 40) — `public String`
  - `headerLeftText` (line 41) — `public String`
- **Public Methods:**
  - Constructor `BaseThemedDialog()` (line 108)
  - `onCreateView(LayoutInflater, ViewGroup, Bundle)` (line 89) — `@Override`
  - `setLayout(int layoutResource)` (line 112)
  - `setTitleText(String titleText)` (line 116)
  - `onActivityCreated(Bundle savedInstanceState)` (line 156) — `@Override`
- **Protected Methods (subclass-visible API):**
  - `onLeftButton()` (line 48)
  - `onRightButton()` (line 52)
  - `setupViews()` (line 57) — `@Override`
  - `inflateLayout(LayoutInflater inflater)` (line 122)
  - `vibrateOnPress(View view)` (line 179)
  - `setLayoutClickable(View view, boolean enabled)` (line 199)
  - `findViewById(int viewId)` (line 166)
- **Constants (private):**
  - `DIALOG_SHADOW_WIDTH = 16` (line 25)
  - `LOLLIPOP_DIALOG_SHADOW_WIDTH = 32` (line 26)
  - `VIBRATION_DURATION_MS = 10` (line 27)
  - `TITLE_BAR_HEIGHT = 60` (line 28)
- **Class-level comment:** Creation credit only (lines 18–22); no Javadoc description of class purpose or usage contract.

### Findings

#### A03-1: No Javadoc on public constructor `BaseThemedDialog()` [INFO]
- **File:** `LibCommon/src/main/java/com/yy/libcommon/BaseThemedDialog.java`, Line: 108
- **Description:** The public constructor has no Javadoc. It initializes `mRequests` as an empty `ArrayList`. Callers are given no documentation about what state the object is in after construction or what side effects occur.

#### A03-2: No Javadoc on public method `setLayout(int layoutResource)` [INFO]
- **File:** `LibCommon/src/main/java/com/yy/libcommon/BaseThemedDialog.java`, Line: 112
- **Description:** No Javadoc. The method stores a layout resource ID used later during `inflateLayout()`. There is no documentation of when this must be called relative to the fragment lifecycle (it must be called before `onCreateView`), nor what happens if it is not called or is called late.

#### A03-3: No Javadoc on public method `setTitleText(String titleText)` [INFO]
- **File:** `LibCommon/src/main/java/com/yy/libcommon/BaseThemedDialog.java`, Line: 116
- **Description:** No Javadoc. The method silently does nothing when `titleText` is `null` (null-guard at line 117), but this behavior is undocumented. Callers cannot know whether null is safe to pass.

#### A03-4: No Javadoc on public override `onCreateView(LayoutInflater, ViewGroup, Bundle)` [INFO]
- **File:** `LibCommon/src/main/java/com/yy/libcommon/BaseThemedDialog.java`, Line: 89
- **Description:** No Javadoc. As an `@Override` of a framework method this is lower severity, but it performs custom inflation and initialization that subclasses depend on. The absence of any documentation of its side effects (vibrator setup, window feature requests, title-view binding) makes subclass maintenance harder.

#### A03-5: No Javadoc on protected override `setupViews()` [INFO]
- **File:** `LibCommon/src/main/java/com/yy/libcommon/BaseThemedDialog.java`, Line: 57
- **Description:** No Javadoc. `setupViews()` is a hook intended for subclass override (used in `CustomProgressDialog`). The method attaches click listeners to the left/right header buttons and conditionally sets their visibility and text based on `headerRightText`/`headerLeftText`. Without documentation, subclasses do not know they must call `super.setupViews()` to get correct header behavior, nor that the fields `headerRightText` and `headerLeftText` must be set before this method is called.

#### A03-6: No Javadoc on protected method `inflateLayout(LayoutInflater)` [INFO]
- **File:** `LibCommon/src/main/java/com/yy/libcommon/BaseThemedDialog.java`, Line: 122
- **Description:** No Javadoc. This method performs conditional layout inflation and dialog window width calculation (including a different shadow constant for Lollipop+). Additionally, the method unconditionally re-initializes `mVibrator`, `mVibrateButtons`, and re-requests window features and re-binds title/button views (lines 143–151), duplicating work already performed in `onCreateView()` (lines 95–103). The redundancy is undocumented and could mislead maintainers into thinking either block is safe to remove. This dual-initialization is a latent correctness risk with no explanatory comment.

#### A03-7: Undocumented silent no-op behavior in `vibrateOnPress(View)` — quadratic listener registration [LOW]
- **File:** `LibCommon/src/main/java/com/yy/libcommon/BaseThemedDialog.java`, Line: 179
- **Description:** No Javadoc. The method adds the supplied `view` to `mVibrateButtons` and then iterates over the *entire* `mVibrateButtons` list to re-register an `OnTouchListener` on every previously registered view. Each call attaches an additional listener to all existing entries. This means if `vibrateOnPress()` is called N times, the first view added will have N touch listeners attached, triggering N vibrations per press. This behavior is almost certainly unintentional but is completely undocumented, making it invisible to callers and future maintainers.

#### A03-8: No Javadoc on protected method `setLayoutClickable(View, boolean)` [INFO]
- **File:** `LibCommon/src/main/java/com/yy/libcommon/BaseThemedDialog.java`, Line: 199
- **Description:** No Javadoc. The method delegates to `Util.setLayoutClickable()` but provides no documentation of what "layout clickable" means, which views are affected (the view hierarchy under the given view, presumably), or what the `enabled` flag controls.

#### A03-9: No Javadoc on protected method `findViewById(int viewId)` [INFO]
- **File:** `LibCommon/src/main/java/com/yy/libcommon/BaseThemedDialog.java`, Line: 166
- **Description:** No Javadoc. This method shadows the framework `Activity.findViewById()` name but searches from `mLayoutView` (the inflated sub-layout), not from the root dialog view. The scoped search root is undocumented, creating a risk that callers will expect root-level search behavior. If `mLayoutView` is null (e.g., if `setLayout()` was never called and `inflateLayout()` did not inflate), this will throw a `NullPointerException` with no documented precondition.

#### A03-10: No Javadoc on public fields `headerRightText` and `headerLeftText` [INFO]
- **File:** `LibCommon/src/main/java/com/yy/libcommon/BaseThemedDialog.java`, Lines: 40–41
- **Description:** These public fields control the content and visibility of the dialog header buttons but are completely undocumented. There is no indication that they must be set before `setupViews()` runs (i.e., before the fragment view is attached) for the values to take effect.

#### A03-11: No Javadoc on public fields `base_themed_dialog_right_text_view` and `base_themed_dialog_left_text_view` [INFO]
- **File:** `LibCommon/src/main/java/com/yy/libcommon/BaseThemedDialog.java`, Lines: 37–38
- **Description:** Public `TextView` fields with no documentation. Exposing view references as public fields is architecturally fragile; the lack of any comment stating their intended use, lifecycle validity (only valid after `onCreateView`), or why they are public rather than accessed via a method is a documentation gap.

---

## File: LibCommon/src/main/java/com/yy/libcommon/CommonLib/NetworkDetect.java

### Reading Evidence

- **Class:** `NetworkDetect` (public, no base class)
- **Public Methods:**
  - `isNetworkConnected(Context context)` (line 13) — `static public boolean`
- **Constants/Types:** None defined in the file.
- **Class-level comment:** Creation credit only (lines 8–10); no Javadoc description.

### Findings

#### A03-12: No Javadoc on class `NetworkDetect` [INFO]
- **File:** `LibCommon/src/main/java/com/yy/libcommon/CommonLib/NetworkDetect.java`, Line: 11
- **Description:** The class has only a creation credit comment. There is no description of the class's purpose or intended usage.

#### A03-13: No Javadoc on `isNetworkConnected(Context)` — missing permission requirement and null-safety contract [LOW]
- **File:** `LibCommon/src/main/java/com/yy/libcommon/CommonLib/NetworkDetect.java`, Line: 13
- **Description:** The method has no Javadoc at all. Three undocumented behavioral facts are relevant to callers:
  1. The method requires the `android.permission.ACCESS_NETWORK_STATE` permission to be declared in the manifest. If the permission is absent the `ConnectivityManager` call will throw a `SecurityException`. This is a runtime-visible contract with no documentation.
  2. `connMgr.getActiveNetworkInfo()` is guarded for null (the `networkInfo != null` check), but there is no documentation of what `false` return means — no connectivity, no active interface, or an error state. All three map to `false` silently.
  3. If `context.getSystemService(Context.CONNECTIVITY_SERVICE)` itself returns null (possible on some custom/emulated environments), the method will throw a `NullPointerException` at line 16. This unchecked failure path is undocumented.

---

## File: LibCommon/src/main/java/com/yy/libcommon/CustomProgressDialog.java

### Reading Evidence

- **Class:** `CustomProgressDialog extends BaseThemedDialog` (public)
- **Public Methods:**
  - Constructor `CustomProgressDialog()` (line 25)
  - `onCreate(Bundle savedInstanceState)` (line 30) — `@Override`
  - `newInstance(String title, String details)` (line 39) — `public static`
  - `updateText(String message)` (line 77)
- **Constants (private):**
  - `TITLE = "TITLE"` (line 17) — Bundle argument key
  - `DETAILS = "DETAILS"` (line 18) — Bundle argument key
- **Class-level comment:** Creation credit only (lines 10–14); no Javadoc description.

### Findings

#### A03-14: No Javadoc on class `CustomProgressDialog` [INFO]
- **File:** `LibCommon/src/main/java/com/yy/libcommon/CustomProgressDialog.java`, Line: 15
- **Description:** The class has only a creation credit comment. There is no documentation of the class's purpose (a progress dialog with a title and detail text), its lifecycle, or its relationship to `BaseThemedDialog`.

#### A03-15: No Javadoc on `newInstance(String, String)` factory method [INFO]
- **File:** `LibCommon/src/main/java/com/yy/libcommon/CustomProgressDialog.java`, Line: 39
- **Description:** No Javadoc. This is the intended public construction path for the fragment (the public constructor exists for the framework but `newInstance` is the documented Android Fragment pattern for passing arguments safely across recreation). Without documentation: callers do not know that either or both parameters may be `null` (handled in `setupViews()` by falling back to the `R.string.loading` string resource), nor what the `title` vs `details` distinction controls in the UI (title drives the title bar; details drives the body text view).

#### A03-16: No Javadoc on `updateText(String)` — undocumented silent no-op conditions [LOW]
- **File:** `LibCommon/src/main/java/com/yy/libcommon/CustomProgressDialog.java`, Line: 77
- **Description:** No Javadoc. The method silently does nothing in two distinct situations: (1) `mDetailsTextView` is null, which can occur if the view has not yet been created or has already been destroyed; (2) `isResumed()` returns false, meaning the fragment is not in the resumed state. Both are legitimate lifecycle edge cases but neither is documented. Callers calling `updateText()` from a background thread callback (a common usage pattern for progress dialogs) will receive no feedback that the update was dropped. The absence of any documentation of the thread-safety requirement is also a gap — `setText()` must be called on the main thread, but nothing documents this constraint.

#### A03-17: No Javadoc on public constructor `CustomProgressDialog()` [INFO]
- **File:** `LibCommon/src/main/java/com/yy/libcommon/CustomProgressDialog.java`, Line: 25
- **Description:** No Javadoc. The constructor calls `setLayout()` with the progress dialog layout resource. Per the Android Fragment contract a public no-arg constructor must exist for system-driven re-instantiation, but there is no comment explaining this, nor a note directing callers to use `newInstance()` for normal construction with arguments.
