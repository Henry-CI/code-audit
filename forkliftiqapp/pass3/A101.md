# Pass 3 Findings: A101

## File: User.java
**Full path:** `app/src/main/java/au/com/collectiveintelligence/fleetiq360/user/User.java`

### Reading Evidence
- Class: `User`
- Public Methods:
  - `fullName()` (line 66)
  - `definedName()` (line 70)
  - `complianceIsValid()` (line 78)
  - `hasAssociatedDrivers()` (line 82)
  - `associatedDrivers()` (line 86)
  - `updateInformation(String firstName, String lastName, String complianceDate)` (line 90)
  - `updateLicense(String licenseNumber, String securityNumber, String address, String expiryDate)` (line 97)
  - `updateCompliance(Date complianceDate)` (line 105)
  - `getId()` (line 115)
  - `getCompanyId()` (line 119)
  - `getFirstName()` (line 123)
  - `getLastName()` (line 127)
  - `getEmail()` (line 131)
  - `getPassword()` (line 135)
  - `getLicenseNumber()` (line 143)
  - `getExpiryDate()` (line 147)
  - `getAddress()` (line 151)
  - `getSecurityNumber()` (line 155)
  - `getPhotoUrl()` (line 159)
  - `isContactPerson()` (line 163)
  - `getDateFormat()` (line 167)
  - `getMaxSessionLength()` (line 171)
  - `getGps_frequency()` (line 175)
  - `getComplianceDate()` (line 179)
- Non-public methods (excluded from public method audit):
  - `User(...)` constructor (line 30) — package-private
  - `setPassword(String password)` (line 110) — package-private
  - `getPhoneNumber()` (line 139) — package-private
- Constants/Types: None defined. Fields are all instance variables (private). Default `dateFormat` fallback value `"MM/dd/yyyy"` is inlined in the constructor (line 60), not a named constant.

### Findings

#### A101-1: `fullName()` is undocumented [INFO]
- File: `User.java`, Line: 66
- Description: No Javadoc present. The method concatenates `firstName` and `lastName` with a space separator and returns the result. It has no null-guard; if either field is `null`, a `NullPointerException` will propagate from `String.format`. No documentation exists.

#### A101-2: `definedName()` is undocumented [INFO]
- File: `User.java`, Line: 70
- Description: No Javadoc present. The method returns `fullName()` if either `firstName` or `lastName` is non-empty, falls back to `email` if non-empty, and finally returns `"-"`. The logic is non-trivial enough that the fallback chain warrants documentation. Note: the condition `!firstName.isEmpty() || !lastName.isEmpty()` will throw `NullPointerException` if either field is `null`. No documentation exists.

#### A101-3: `complianceIsValid()` is undocumented [INFO]
- File: `User.java`, Line: 78
- Description: No Javadoc present. Returns `true` when `complianceDate` is non-null, `false` otherwise. The semantic interpretation (a non-null date means compliance is valid) is not obvious and warrants documentation.

#### A101-4: `hasAssociatedDrivers()` is undocumented [INFO]
- File: `User.java`, Line: 82
- Description: No Javadoc present. Returns `true` only when the user is a contact person (`isContactPerson == true`) AND there is at least one driver in the same company. Both conditions must be satisfied; this combined semantics is not evident from the method name alone. No documentation exists.

#### A101-5: `associatedDrivers()` is undocumented [INFO]
- File: `User.java`, Line: 86
- Description: No Javadoc present. Returns all `User` objects belonging to the same company via `UserDb.driversOfCompany(companyId)`. Does not check `isContactPerson` first (unlike `hasAssociatedDrivers()`), so it returns results for any user type. This inconsistency with the related method is undocumented.

#### A101-6: `updateInformation(String, String, String)` is undocumented [INFO]
- File: `User.java`, Line: 90
- Description: No Javadoc present. The method updates `firstName`, `lastName`, and `complianceDate`, then persists via `UserDb.save(this)`. The `complianceDate` parameter is a `String` that is parsed using `ServerDateFormatter`, which has failure semantics (null or exception on bad input) that are completely undocumented. The side-effect of persisting to the database is also not documented.

#### A101-7: `updateLicense(String, String, String, String)` is undocumented [INFO]
- File: `User.java`, Line: 97
- Description: No Javadoc present. Updates `licenseNumber`, `securityNumber`, `address`, and `expiryDate` (the last being parsed from a `String`), then persists via `UserDb.save(this)`. The `expiryDate` parameter is a `String` parsed by `ServerDateFormatter`. Same concerns as A101-6 regarding parse failure and persistence side-effects apply, and no documentation exists.

#### A101-8: `updateCompliance(Date)` is undocumented [INFO]
- File: `User.java`, Line: 105
- Description: No Javadoc present. Updates `complianceDate` with a `Date` object (unlike `updateInformation` which accepts a `String`) and persists via `UserDb.save(this)`. The different parameter type relative to `updateInformation` could cause confusion; no documentation distinguishes the two.

#### A101-9: Accessor methods are undocumented [INFO]
- File: `User.java`, Lines: 115, 119, 123, 127, 131, 135, 143, 147, 151, 155, 159, 163, 167, 171, 175, 179
- Description: None of the following public getter methods have Javadoc: `getId()`, `getCompanyId()`, `getFirstName()`, `getLastName()`, `getEmail()`, `getPassword()`, `getLicenseNumber()`, `getExpiryDate()`, `getAddress()`, `getSecurityNumber()`, `getPhotoUrl()`, `isContactPerson()`, `getDateFormat()`, `getMaxSessionLength()`, `getGps_frequency()`, `getComplianceDate()`. While trivial getters rarely require Javadoc, `getPassword()` returns a stored password value (security-sensitive) and `getDateFormat()` has a non-obvious default (`"MM/dd/yyyy"` set in the constructor when the supplied value is `null`) — both are worth noting. Reported collectively as a single INFO finding.

---

## File: UserDb.java
**Full path:** `app/src/main/java/au/com/collectiveintelligence/fleetiq360/user/UserDb.java`

### Reading Evidence
- Class: `UserDb`
- Public Methods:
  - `save(final User user)` (line 13)
  - `userEmails()` (line 32)
  - `get(final int id)` (line 45)
  - `get(final String email, final String password)` (line 55)
- Non-public methods (excluded from public method audit):
  - `driversOfCompany(final int companyId)` (line 65) — package-private
- Constants/Types: None defined.

### Findings

#### A101-10: `save(User)` is undocumented [INFO]
- File: `UserDb.java`, Line: 13
- Description: No Javadoc present. The method upserts a `User` into the Realm database. The upsert logic (update if found by `id`, insert otherwise, then call `realm.insertOrUpdate`) is non-trivial. Side-effects, threading model (via `SafeRealm.Execute`), and the fact that this is a void operation with no error return are all undocumented.

#### A101-11: `userEmails()` is undocumented [INFO]
- File: `UserDb.java`, Line: 32
- Description: No Javadoc present. Returns a sorted `ArrayList<String>` of all user email addresses stored in Realm. The return type, sort order, and the fact that it returns emails for all stored users regardless of company are all undocumented.

#### A101-12: `get(int)` is undocumented [INFO]
- File: `UserDb.java`, Line: 45
- Description: No Javadoc present. Fetches a `User` by numeric ID. Returns `null` if no match is found. The nullable return value is not documented. No `@NonNull`/`@Nullable` annotation is present.

#### A101-13: `get(String, String)` is undocumented [INFO]
- File: `UserDb.java`, Line: 55
- Description: No Javadoc present. Fetches a `User` by email and password (plaintext password comparison against stored value). Returns `null` if no matching record is found. The credential-matching semantics, the plaintext password concern, and the nullable return are all undocumented. The security implication of comparing passwords in plaintext is notable.

---

## File: UserRealmObject.java
**Full path:** `app/src/main/java/au/com/collectiveintelligence/fleetiq360/user/UserRealmObject.java`

### Reading Evidence
- Class: `UserRealmObject` (extends `RealmObject`)
- Annotations: `@PrimaryKey` on `id` field (line 9)
- Public Methods:
  - `UserRealmObject()` — no-arg constructor (line 28)
- Non-public methods (excluded from public method audit):
  - `UserRealmObject(User user)` (line 31) — package-private constructor
  - `makeUser()` (line 51) — package-private
  - `getEmail()` (line 71) — package-private
  - `setValues(User user)` (line 75) — package-private
- Constants/Types: None defined. `@PrimaryKey` annotation marks `id` as the Realm primary key.

### Findings

#### A101-14: `UserRealmObject()` no-arg constructor is undocumented [INFO]
- File: `UserRealmObject.java`, Line: 28
- Description: No Javadoc present. The no-arg constructor is required by the Realm framework and exists solely to satisfy that requirement. A brief comment explaining this constraint would help maintainers understand why an otherwise-empty constructor is present. As this is the only public method in the class, it is the sole public-method finding for this file.

---

## Summary

All three files (`User.java`, `UserDb.java`, `UserRealmObject.java`) have zero Javadoc on any method — public or otherwise. Every public method is undocumented. No inaccurate documentation was found (because no documentation exists). All findings are rated INFO.

Notable items beyond bare undocumented methods:
- `UserDb.get(String, String)` (A101-13): Plaintext password comparison in Realm query is a security concern that documentation should at minimum acknowledge.
- `User.getPassword()` (A101-9): Returns a stored plaintext password; security-sensitive and undocumented.
- `User.definedName()` and `User.fullName()` (A101-2, A101-1): Both can throw `NullPointerException` if `firstName` or `lastName` is `null`; undocumented contract.
- `User.updateInformation()` / `User.updateLicense()` (A101-6, A101-7): String date parameters parsed by `ServerDateFormatter` with undocumented failure behavior.
- `User.getDateFormat()` (A101-9): Has a silent default of `"MM/dd/yyyy"` when the original value was `null`; undocumented.
